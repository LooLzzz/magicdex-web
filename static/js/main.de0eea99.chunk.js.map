{"version":3,"sources":["Themes/index.js","Config/index.js","Logic/redux/initialState.js","Logic/redux/reducers/appReducers.js","Logic/redux/reducers/accountReducers.js","Logic/redux/reducers/themeReducers.js","Logic/redux/reducerSlice.js","Logic/redux/reducers/index.js","Logic/redux/store.js","Logic/redux/index.js","Components/Home/styles.js","Components/Home/index.js","Providers/CardPriceDataProvider/index.js","Providers/FilteredDataProvider/index.js","Providers/index.js","Api/MagicdexApi/utils.js","Api/MagicdexApi/auth.js","Api/MagicdexApi/collection.js","Api/MagicdexApi/index.js","Api/index.js","CardRenders/utils.js","CardRenders/styles.js","CardRenders/index.js","Components/Collection/Views/CardInfo/FieldsPanel/index.js","Components/Collection/Views/CardInfo/EditPanel/styles.js","Components/Collection/Views/CardInfo/EditPanel/index.js","Components/Collection/Views/CardInfo/styles.js","Components/Collection/Views/CardInfo/index.js","Components/Collection/Views/CardTableView/CardRow/styles.js","Components/Collection/Views/CardTableView/CardRow/index.js","Components/Collection/Views/CardTableView/styles.js","Components/Collection/Views/CardTableView/index.js","Components/Collection/Views/CardGridView/styles.js","Components/Collection/Views/CardGridView/index.js","Components/Collection/Views/ContextMenu/styles.js","Components/Collection/Views/ContextMenu/index.js","Components/Collection/FilterFields/utils.js","Components/Collection/FilterFields/FilterPopover/styles.js","Components/Collection/FilterFields/FilterPopover/index.js","Components/Collection/FilterFields/styles.js","Components/Collection/FilterFields/index.js","Components/Collection/MyFabs/index.js","Components/Collection/.Import/ImportWizard/styles.js","Components/Collection/.Import/ImportWizard/index.js","Components/Collection/.Import/BulkImport/index.js","Components/Collection/.Import/styles.js","Components/Collection/.Import/index.js","Components/Collection/.Export/styles.js","Components/Collection/.Export/index.js","Components/Collection/styles.js","Components/Collection/index.js","Components/App/styles.js","Components/App/index.js","Components/MenuPopover/styles.js","Components/MenuPopover/index.js","Components/TopMenu/styles.js","Components/TopMenu/index.js","Components/CardImage/ImageOverlay/styles.js","Components/CardImage/ImageOverlay/index.js","Components/CardImage/TransformableCard/styles.js","Components/CardImage/TransformableCard/index.js","Components/CardImage/styles.js","Components/CardImage/index.js","Components/BottomBar/styles.js","Components/BottomBar/index.js","Components/Decks/styles.js","Components/Decks/index.js","Components/Profile/styles.js","Components/Profile/index.js","Components/Forms/BaseForm/styles.js","Components/Forms/BaseForm/index.js","Components/Forms/Login/styles.js","Components/Forms/Login/index.js","Components/Forms/Register/styles.js","Components/Forms/Register/index.js","index.js"],"names":["baseTheme","createTheme","getContrastText","palette","sharedOverrides","MuiCssBaseline","padding","fontFamily","borderRadius","textAlign","a","textDecoration","cursor","maxWidth","spacing","MuiListItemText","multiline","marginTop","marginBottom","MuiTextField","root","width","margin","MuiPaper","rounded","MuiListSubheader","display","alignItems","columnGap","MuiListItem","secondaryAction","paddingRight","darkPrimary","main","darkSecondary","darkThirdly","colors","purple","secondary","getDarkTheme","type","table","divider","primary","contrastText","thridly","background","grey","overrides","code","backgroundColor","color","MuiCircularProgress","circle","getLightTheme","default","paper","axios","defaults","headers","common","Config","MODIFY_DB_ALLOWED","API_URL","PER_PAGE","CONDITIONS","BREAKPOINTS","xs","sm","md","lg","xl","themeType","localStorage","getItem","accessToken","INITIAL_STATE","activeUser","username","collection","JSON","parse","theme","currentTheme","app","currency","topMenu","currentTab","view","pageNumber","perPage","currentOpenCardId","undefined","cardsSelectableEnabled","selectedCardIds","filters","cardInfo","viewIndex","editEnabled","tableView","columns","gridView","tiltEnabled","transform3dEnabled","appReducers","setCurrency","state","action","payload","toggleCurrency","toLowerCase","setCurrentTab","tab","setView","setCurrentOpenCardId","id","setSelectedCardIds","Array","isArray","Error","Object","prototype","toString","call","_","uniq","addSelectedCardIds","concat","removeSelectedCardIds","difference","setFilters","addFilters","assign","removeFilters","omit","setCardsSelectableEnabled","enabled","toggleCardsSelectableEnabled","setPageNumber","setPerPage","setViewIndex_CardInfo","index","setEditEnabled_CardInfo","setColumns_TableView","setTiltEnabled_GridView","toggleTiltEnabled_GridView","setTransform3dEnabled_GridView","toggleTransform3dEnabled_GridView","accountReducers","setActiveUser","setItem","removeItem","setCurrentCollection","stringify","updateCollection","cards","item","_id","card","idx","push","findIndex","splice","themeReducers","toggleThemeType","reducerSlice","combineReducers","account","createSlice","name","initialState","reducers","actions","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","useStyles","height","flexDirection","justifyContent","content","connect","dispatch","withStyles","props","classes","useEffect","Grid","container","className","component","Paper","src","alt","Typography","variant","varinat","Divider","password","slice","trim","split","map","i","addCardPrice","prices","foil","amount","price","Number","total_price","children","data","rest","useState","cardPriceData","setCardPriceData","React","Children","child","cloneElement","filteredData","setFilteredData","filter","row","every","entries","key","value","Function","length","intersection","includes","addLayoutKeywords","arrayContains","array","values","intersectionWith","b","is_transform","layout","is_split","is_flip","Utils","getAuthHeaders","token","Authorization","authHeadersDecorator","func","args","catchErrors","error","response","console","request","message","fetchScryfallCardData","Scryfall","getSets","all_sets","setData","zipObjectDeep","set","card_ids","getCollection","cardData","set_data","set_id","populateCardData","scryfall_id","scryfallData","Promise","all","date_created","Date","mana_cost","card_faces","populatedCards","pickCardFields","fields","_pick","c","pick","hasOwnProperty","ROUTE_URL","Auth","login","FormData","append","post","then","register","put","obj","keyMap","keys","reduce","acc","Collections","getCards","page","per_page","params","get","catch","err","updateCards","deleteCards","delete","getAllCards","deleteAllCards","getCardById","card_id","updateCardById","deleteCardById","MagicdexApi","getCardPrints","oracle_id","collector_number","res","getLangs","search","unique","include_multilingual","include_extras","order","dir","include_variations","lang","utils","addLeadingZero","date","toManaFont","txt","replace","sym","cost","style","clsx","toColorIndicator","compact","ci","transformStringArray","arr","searchStart","searchEnd","strTransformation","str","startIdx","endIdx","transformed","substring","limitPrecision","num","precision","Math","round","chip","boxShadow","shadows","preWrap","whiteSpace","mana","marginRight","fontSize","colorIndicator","flavorText","fontStyle","lineBreak","condition","widthLimit","breakpoints","down","renders","DefaultRender","memo","columnName","cardFace","RenderName","renderStyle","lgDown","useMediaQuery","v","noWrap","title","Hidden","mdDown","RenderOracleText","oracleText","align","words","match","transform","href","text","RenderPowerToughness","power","toughness","RenderSet","useTheme","rarity","parent_set_code","upperFirst","RenderBoolean","Chip","label","size","RenderCondition","cond","toUpperCase","rgb","NM","LP","MP","HP","DAMAGED","condStyles","RenderAmount","RenderPrice","RenderTag","tags","tag","RenderManaCost","manaCost","cmc","RenderType","typeLine","color_indicator","RenderDate","getFullYear","getMonth","getDate","year","month","day","join","RenderFlavorText","flavor_text","RenderCell","FieldsPanel","artist","collectorNumber","powerToughness","direction","Box","flexGrow","paddingTop","wrap","accordion","paddingBottom","listing","editButtonContainer","tagFilters","setEditEnabled","_updateHeight","updateHeight","onMenuHover","enqueueSnackbar","useSnackbar","smDown","setTimeout","modalOpen","setModalOpen","newCard","setNewCard","printsSet","setPrintsSet","printsLang","setPrintsLang","rulings","setRulings","resetNewCard","signed","altered","misprint","fetch","rulings_uri","json","lodash","chain","reverse","published_at","sortBy","handleChipClick","e","handleDeleteButtonClick","confirm","clonedCard","handleCardInfoChange","field","min","max","clampInt","uniqBy","selectedSet","selectedCollectorNumber","find","_rest","Button","onClick","cardClone","cloneDeep","Zoom","in","transformOrigin","IconButton","Delete","TextField","inputProps","inputMode","onChange","target","marginLeft","select","MenuItem","FormControlLabel","control","Checkbox","checked","disabled","SelectProps","onClose","InputProps","startAdornment","InputAdornment","position","CircularProgress","onMouseEnter","onMouseLeave","set_name","Autocomplete","multiple","freeSolo","disableClearable","limitTags","options","newValue","onInputChange","newInputValue","renderInput","helperText","borderSpacing","verticalAlign","colSpan","Tooltip","arrow","placement","enterDelay","paddingLeft","Accordion","expanded","TransitionProps","onEntering","onEntered","onExiting","onExited","AccordionSummary","expandIcon","ExpandMore","AccordionDetails","rule","oracle_text","comment","Modal","closeAfterTransition","open","BackdropProps","timeout","Fade","baseContainer","topArrow","zIndex","top","border","borderWidth","left","transition","image","setViewIndex","refs","rootComponent","rootProps","topArrowProps","swipeableViewsRef","useRef","menuHoverItem","setMenuHoverItem","useImperativeHandle","current","handleViewIndexChange","showPrice","mdUp","elevation","ignoreNativeScroll","ref","animateHeight","onChangeIndex","slideStyle","overflow","lgUp","alignSelf","flexItem","orientation","ChevronRight","ChevronLeft","hoverItem","floatingBackgroundColor","borderBottom","floating","checkboxCell","checkbox","addSelectedCardId","removeSelectedCardId","selectable","setRef","cardInfoRef","checkboxRef","isOpen","setIsOpen","showContent","setShowContent","clearSelectedCardsOnExit","contextMenuState","setContextMenuState","isMouseOver","setIsMouseOver","mouseY","mouseX","handleIsOpenToggle","collapseUpdate","isAppearing","setState","TableRow","onContextMenu","preventDefault","clientX","clientY","onMouseDown","button","selected","TableCell","stopPropagation","KeyboardArrowUp","KeyboardArrowDown","Collapse","mountOnEnter","unmountOnExit","onEnter","borderTopColor","tableContainer","tableFooter","borderTop","currentHoveringCard","setCurrentHoveringCard","setSortByCol","sortOrder","setSortOrder","sortedData","setSortedData","paginatedData","setPaginatedData","_sortBy","type_line","orderBy","TableContainer","Table","TableHead","tableHead","columnDisplayName","sortDirection","TableSortLabel","active","event","colName","handleHeaderClick","indeterminate","iconCell","TableBody","handleRowHover","TableFooter","TablePagination","rowsPerPageOptions","labelRowsPerPage","count","rowsPerPage","labelDisplayedRows","from","to","onPageChange","onRowsPerPageChange","parseInt","native","ActionsComponent","FirstPage","ceil","LastPage","toggleTiltEnabled","toggleTransform3dEnabled","menuItemRef","cardWidth","containerRef","setRefs","useSize","containerWidth","cardsPerRow","setCardsPerRow","selectedCard","setSelectedCard","targetCollapse","box","n","floor","times","collapse","createRef","handleCardClick","selectedCardData","targetCollapseIdx","getBoundingClientRect","handleMiddleMouseClick","handleContextMenu","persist","onEditClick","Portal","ListItemText","packTransformButton","showCheckbox","tiltProps","tiltMaxAngleX","tiltMaxAngleY","imageProps","offsetLeft","modal","ids","clearSelectedCards","tagArray","setTagArray","closeMenu","handleTagChange","handleMenuItemClick","confirmAction","len","clonedArr","countBy","flatMap","Menu","keepMounted","disableAutoFocusItem","Boolean","anchorReference","anchorPosition","MenuListProps","dense","ListItemIcon","minWidth","Edit","onKeyDown","TextOption","AutocompleteOptions","disableCloseOnSelect","filterSelectedOptions","ChipProps","renderTags","getTagProps","option","icon","popover","MenuPopover","forwardRef","menuAnchor","setMenuAnchor","menuOpen","filterButtonRef","makeStyles","openMenu","handleMenuOpen","handleMenuClose","menuAnnchor","currentTarget","Popover","anchorEl","anchorOrigin","vertical","horizontal","ClickAwayListener","onClickAway","List","disablePadding","minus","rangeInput","autocompleteInput","filtersMenuRef","setsData","setSetsData","cardName","setCardName","setOracleText","setTypeLine","selectedSets","setSelectedSets","allSets","set_type","released_at","fetchSets","endAdornment","FilterPopover","ListSubheader","ListItem","Fragment","groupBy","getOptionLabel","getOptionSelected","MyFabs","history","useHistory","handleFabClick","Fab","Add","CloudDownload","autocomplete","input","listbox","setCard","newCards","setNewCards","cardNames","setCardNames","listboxOpen","setListboxOpen","handleSubmit","reset","handleReset","focus","handleFocus","resetCard","getCardNamed","resolve","reject","source","closeModal","handleAddToNewCards","startsWith","handleCardNameChange","clearOnEscape","handleHomeEndKeys","onOpen","inputRef","disableFocusListener","disableHoverListener","disableTouchListener","gutterBottom","cardListText","setCardListText","errorMessages","setErrorMessages","bulkToCards","errors","lines","line","getCard","setPrints","flag","setLangs","sort","fullWidth","rows","placeholder","InputLabelProps","shrink","topBottomPadding","minHeight","hoverHighlight","hover","view1Container","view2Container","viewRef","wizardRef","bulkRef","currentViewIndex","_setCurrentViewIndex","wizardBackdrop","setWizardBackdrop","setCurrentViewIndex","handleImportTypeClick","formRef","onSubmit","instantValidate","header","headerProps","ImportExport","contentProps","disableBackdrop","textfieldInputRef","selectedExportType","setSelectedExportType","textfieldHelperText","setTextfieldHelperText","handleTextFocus","navigator","clipboard","writeText","onFocus","readOnly","FileCopy","fontWeight","textTransform","fab","bottom","right","filtersContainer","subheader","setColumns","location","useLocation","menuRef","viewParam","URLSearchParams","handleViewChange","FilterFields","MoreVert","listProps","ToggleButtonGroup","exclusive","ToggleButton","ViewList","ViewModule","ViewCompact","Skeleton","leftRightPadding","bottomBar","dark","_theme","snackbarRef","routes","Route","path","Home","exact","Collection","Import","Export","Decks","Login","Register","Profile","Redirect","ThemeProvider","CssBaseline","autoHideDuration","maxSnack","toastId","endIcon","Close","closeSnackbar","HashRouter","TopMenu","iconButtonProps","popoverProps","iconButtonRef","Icon","setIcon","mainSidesPadding","appBar","iconButton","dropdown_tab","goto","attributes","AppBar","Tabs","Tab","AccountCircle","Settings","ListItemSecondaryAction","Switch","edge","loading","opacity","backgroundSize","base","overlay","baseSrc","baseProps","overlaySrc","overlayEnabled","overlayProps","isLoaded","setLoaded","labelPlacement","onLoad","face","front","back","_flipped","flipped","setFlipped","scaleX","setScaleX","image_uris","png","imageContainer","dfcSymbol","checkboxContainer","priceContainer","buttonContainer","buttonThridly","MyTooltip","tooltip","typography","pxToRem","buttonProps","handleTransform","setValueTo","tiltEnable","glareEnable","glareBorderRadius","glarePosition","glareMaxOpacity","_isDoublesided","onLeave","large","normal","handleCheckboxChange","Link","rel","LooLzzz","Bedopear","ScryfallClient","alignContent","iconSize","divider1","divider2","validationRules","iconProps","actionsProps","onError","Header","setHeader","Content","setContent","Actions","setActions","isLoading","setIsLoading","rules","forEach","ValidatorForm","hasValidationRule","addValidationRule","Dialog","DialogContent","usernameInput","setUsernameInput","passwordInput","setPasswordInput","user","msg","msgs","handleClear","resetValidations","validators","autoComplete","passwordRepeatInput","setPasswordRepeatInput","passwordInputRef","isPasswordMatch","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.de0eea99.chunk.js","sourcesContent":["/* eslint-disable no-unused-vars */\r\n\r\nimport { createTheme, colors } from \"@material-ui/core\"\r\n\r\n\r\nconst baseTheme = createTheme()\r\nconst getContrastText = baseTheme.palette.getContrastText\r\n// console.log({ baseTheme })\r\n\r\n\r\n/** SHARED VALUES **/\r\nconst sharedOverrides = {\r\n  MuiCssBaseline: {\r\n    \"@global\": {\r\n      \"code\": {\r\n        padding: '2px',\r\n        // marginLeft: '0.25em',\r\n        // backgroundColor: 'rgba(255,255,255,0.1)',\r\n        fontFamily: '\"Red Hat Mono\", Consolas, monospace',\r\n        // fontSize: '0.93em',\r\n        borderRadius: '0.5em',\r\n      },\r\n      \".alignLeft\": {\r\n        textAlign: \"left\",\r\n      },\r\n      \".alignRight\": {\r\n        textAlign: \"right\",\r\n      },\r\n      a: {\r\n        textDecoration: \"none\",\r\n      },\r\n      \"a:hover\": {\r\n        textDecoration: \"underline\",\r\n      },\r\n      \".cursor-pointer\": {\r\n        cursor: \"pointer\",\r\n      },\r\n      '.floating': {\r\n        // position: 'absolute',\r\n        // zIndex: '999',\r\n        maxWidth: baseTheme.spacing(25),\r\n        padding: `${baseTheme.spacing(0.5)}px ${baseTheme.spacing(1.25)}px ${baseTheme.spacing(0.5)}px ${baseTheme.spacing(1.25)}px`,\r\n      },\r\n    },\r\n  },\r\n  MuiListItemText: {\r\n    multiline: {\r\n      marginTop: 0,\r\n      marginBottom: 0,\r\n    },\r\n  },\r\n  MuiTextField: {\r\n    root: {\r\n      width: \"100%\",\r\n      margin: \"0.4em\",\r\n    },\r\n  },\r\n  MuiPaper: {\r\n    rounded: {\r\n      borderRadius: \"12.5px\",\r\n    },\r\n  },\r\n  MuiListSubheader: {\r\n    root: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      columnGap: '0.6em',\r\n    },\r\n  },\r\n  MuiListItem: {\r\n    secondaryAction: {\r\n      paddingRight: baseTheme.spacing(8),\r\n    },\r\n  },\r\n}\r\n\r\n\r\n/** DARK THEME **/\r\nconst darkPrimary = {\r\n  main: '#2D5295',\r\n  // main: '#2D4583',\r\n  // main: '#404664',\r\n}\r\nconst darkSecondary = {\r\n  // main: colors.purple[500],\r\n  // main: '#731FA1',\r\n  // main: '#BF9EEE',\r\n  // main: '#8A8FEE',\r\n  main: '#DA7B08',\r\n  // main: '#F3533B',\r\n  // main: '#FA9F42',\r\n  // main: '#F56C40',\r\n  // main: colors.orange['900'],\r\n  // main: colors.deepPurple['200'],\r\n}\r\nconst darkThirdly = {\r\n  main: colors.purple[800],\r\n  secondary: colors.purple[700]\r\n  // main: '#DA7B08',\r\n  // main: '#731FA1',\r\n  // main: '#45155F',\r\n}\r\n\r\nconst getDarkTheme = () =>\r\n  createTheme({\r\n    palette:\r\n    {\r\n      type: 'dark',\r\n      table: {\r\n        divider: '#424242',\r\n      },\r\n      primary: {\r\n        ...darkPrimary,\r\n        contrastText: getContrastText(darkPrimary.main)\r\n      },\r\n      secondary: {\r\n        ...darkSecondary,\r\n        contrastText: getContrastText(darkSecondary.main)\r\n      },\r\n      thridly: {\r\n        ...darkThirdly,\r\n        contrastText: getContrastText(darkThirdly.main)\r\n      },\r\n      background: {\r\n        secondary: colors.grey['700'],\r\n      }\r\n    },\r\n\r\n    overrides:\r\n    {\r\n      ...sharedOverrides,\r\n      MuiCssBaseline: {\r\n        '@global': {\r\n          ...sharedOverrides.MuiCssBaseline,\r\n          code: {\r\n            ...sharedOverrides.MuiCssBaseline.code,\r\n            backgroundColor: 'rgba(255,255,255,0.1)',\r\n          },\r\n          a: {\r\n            color: darkSecondary.main,\r\n          },\r\n          '.floating': {\r\n            ...sharedOverrides.MuiCssBaseline['.floating'],\r\n            backgroundColor: colors.grey['700'],\r\n            color: getContrastText(colors.grey['700']),\r\n          },\r\n          '.buttonThridly-root': {\r\n            color: getContrastText(darkThirdly.main),\r\n            backgroundColor: darkThirdly.main,\r\n            '&:hover': {\r\n              backgroundColor: darkThirdly.secondary,\r\n            },\r\n          },\r\n        },\r\n      },\r\n      MuiCircularProgress: {\r\n        circle: {\r\n          color: 'white',\r\n        },\r\n      },\r\n    },\r\n  })\r\n\r\n\r\n/** LIGHT THEME **/\r\nconst getLightTheme = () =>\r\n  createTheme({\r\n    palette: {\r\n      type: 'light',\r\n      secondary: {\r\n        // main: colors.orange[900],\r\n        // main: colors.purple['A400'],\r\n        // main: '#9568AD',\r\n        // main: '#D695F9',\r\n        main: '#E3468C',\r\n        contrastText: getContrastText('#E3468C'),\r\n      },\r\n      table: {\r\n        divider: 'rgba(150, 150, 150, 0.75)'\r\n      },\r\n      background: {\r\n        default: '#D5D5D5',\r\n        paper: '#F0F0F0',\r\n        secondary: colors.grey['400'],\r\n      },\r\n      thridly: {\r\n        main: colors.purple[500],\r\n        secondary: colors.purple[700],\r\n        contrastText: getContrastText(colors.purple[500]),\r\n      },\r\n    },\r\n\r\n    overrides: {\r\n      ...sharedOverrides,\r\n      MuiCssBaseline: {\r\n        '@global': {\r\n          ...sharedOverrides.MuiCssBaseline,\r\n          code: {\r\n            ...sharedOverrides.MuiCssBaseline.code,\r\n            backgroundColor: 'rgba(0,0,0,0.1)',\r\n          },\r\n          a: {\r\n            // color: '#4f6ce2',\r\n            color: '#bf9eee',\r\n          },\r\n          '.floating': {\r\n            ...sharedOverrides.MuiCssBaseline['.floating'],\r\n            backgroundColor: colors.grey['A100'],\r\n            color: getContrastText(colors.grey['A100']),\r\n          },\r\n          '.buttonThridly-root': {\r\n            color: getContrastText(colors.purple[500]),\r\n            backgroundColor: colors.purple[500],\r\n            '&:hover': {\r\n              backgroundColor: colors.purple[700],\r\n            },\r\n          },\r\n        },\r\n      },\r\n      MuiCircularProgress: {\r\n        circle: {\r\n          color: 'currentColor',\r\n        },\r\n      },\r\n    },\r\n  })\r\n\r\n\r\nexport { getDarkTheme, getLightTheme }\r\n","import axios from 'axios'\r\n\r\naxios.defaults.headers.common['access-Control-Allow-Origin'] = '*'\r\naxios.defaults.headers.common['access-Control-Allow-Credentials'] = true\r\n\r\nconst Config = {\r\n  // MODIFY_DB_ALLOWED: false,\r\n  MODIFY_DB_ALLOWED: true,\r\n\r\n  // API_URL: 'https://magicdex-server.herokuapp.com',\r\n  API_URL: 'https://magicdex-server.deta.dev',\r\n  // API_URL: 'https://magicdex-server-test.herokuapp.com',\r\n  // API_URL: 'http://localhost:5000',\r\n\r\n  PER_PAGE: 25,\r\n  CONDITIONS: [\r\n    'NM',\r\n    'LP',\r\n    'MP',\r\n    'HP',\r\n    'DAMAGED',\r\n  ],\r\n\r\n  BREAKPOINTS: {\r\n    xs: 0,\r\n    sm: 600,\r\n    md: 900,\r\n    lg: 1200,\r\n    xl: 1536,\r\n  },\r\n}\r\n\r\nexport default Config\r\n\r\nexport const {\r\n  MODIFY_DB_ALLOWED,\r\n  API_URL,\r\n  CONDITIONS,\r\n  BREAKPOINTS,\r\n  PER_PAGE,\r\n} = Config","import { getDarkTheme, getLightTheme } from \"@/Themes\"\r\nimport { PER_PAGE } from '@/Config'\r\n\r\n\r\n/** LOCAL STORAGE **/\r\nlet themeType = localStorage.getItem(\"themeType\") ?? 'dark'\r\nlet accessToken = localStorage.getItem(\"accessToken\")\r\nlet username = localStorage.getItem(\"username\")\r\nlet collection = JSON.parse(localStorage.getItem(\"collection\")) ?? []\r\n\r\nthemeType = themeType ? themeType : \"dark\"\r\n\r\n\r\n/** STATE **/\r\nconst INITIAL_STATE = {\r\n  activeUser: {\r\n    username,\r\n    accessToken,\r\n    collection,\r\n  },\r\n\r\n\r\n  theme: {\r\n    currentTheme: themeType === 'dark' ? getDarkTheme() : getLightTheme(),\r\n    themeType: themeType,\r\n  },\r\n\r\n\r\n  app: {\r\n    currency: 'usd',\r\n    topMenu: {\r\n      currentTab: 'home',\r\n    },\r\n\r\n    collection: {\r\n      view: 'table',\r\n      pageNumber: 0,\r\n      perPage: PER_PAGE,\r\n      currentOpenCardId: undefined,\r\n      cardsSelectableEnabled: false,\r\n      selectedCardIds: [],\r\n      filters: {},\r\n\r\n      cardInfo: {\r\n        viewIndex: 0,\r\n        editEnabled: false,\r\n      },\r\n      tableView: {\r\n        columns: {},\r\n      },\r\n      gridView: {\r\n        tiltEnabled: false,\r\n        transform3dEnabled: false,\r\n      },\r\n    },\r\n  },\r\n}\r\n\r\nexport default INITIAL_STATE\r\n","import _ from 'lodash'\r\n\r\n\r\nconst appReducers = {\r\n  /** GENERAL APP **/\r\n  setCurrency: (state, action) => {\r\n    state.app.currency = action.payload.currency\r\n  },\r\n\r\n  toggleCurrency: (state, action) => {\r\n    const currency = state.app.currency.toLowerCase()\r\n    state.app.currency = currency === 'usd' ? 'eur' : 'usd'\r\n  },\r\n\r\n\r\n  /** TOP-MENU **/\r\n  setCurrentTab: (state, action) => {\r\n    state.app.topMenu.currentTab = action.payload.tab\r\n  },\r\n\r\n\r\n  /** COLLECTION **/\r\n  setView: (state, action) => {\r\n    state.app.collection.view = action.payload.view\r\n    state.app.collection.currentOpenCardId = null\r\n  },\r\n\r\n  setCurrentOpenCardId: (state, action) => {\r\n    state.app.collection.currentOpenCardId = action.payload.id\r\n  },\r\n\r\n  setSelectedCardIds: (state, action) => {\r\n    const { selectedCardIds } = action.payload\r\n\r\n    if (Array.isArray(selectedCardIds))\r\n      state.app.collection.selectedCardIds = _.uniq(selectedCardIds)\r\n    else\r\n      throw new Error(`Parameter ${Object.prototype.toString.call(selectedCardIds)} is not an Array`)\r\n  },\r\n\r\n  addSelectedCardIds: (state, action) => {\r\n    const { selectedCardIds, id } = action.payload\r\n\r\n    state.app.collection.selectedCardIds = _.uniq(\r\n      state.app.collection.selectedCardIds.concat(id || selectedCardIds)\r\n    )\r\n  },\r\n\r\n  removeSelectedCardIds: (state, action) => {\r\n    const { selectedCardIds, id } = action.payload\r\n\r\n    state.app.collection.selectedCardIds = _.difference(\r\n      state.app.collection.selectedCardIds,\r\n      id ? [id] : selectedCardIds\r\n    )\r\n  },\r\n\r\n  setFilters: (state, action) => {\r\n    state.app.collection.filters = action.payload.filters\r\n  },\r\n\r\n  addFilters: (state, action) => {\r\n    Object.assign(\r\n      state.app.collection.filters,\r\n      action.payload.filters // object with key-value pairs // { [key]: value }\r\n    )\r\n  },\r\n\r\n  removeFilters: (state, action) => {\r\n    state.app.collection.filters = _.omit(\r\n      state.app.collection.filters,\r\n      action.payload.filters //list of keys to remove // [keys]\r\n    )\r\n  },\r\n\r\n  setCardsSelectableEnabled: (state, action) => {\r\n    state.app.collection.cardsSelectableEnabled = action.payload.enabled\r\n\r\n    if (!state.app.collection.cardsSelectableEnabled)\r\n      state.app.collection.selectedCardIds = []\r\n  },\r\n\r\n  toggleCardsSelectableEnabled: (state, action) => {\r\n    state.app.collection.cardsSelectableEnabled = !state.app.collection.cardsSelectableEnabled\r\n\r\n    if (!state.app.collection.cardsSelectableEnabled)\r\n      state.app.collection.selectedCardIds = []\r\n  },\r\n\r\n  setPageNumber: (state, action) => {\r\n    state.app.collection.pageNumber = action.payload.pageNumber\r\n  },\r\n\r\n  setPerPage: (state, action) => {\r\n    state.app.collection.perPage = action.payload.perPage\r\n    state.app.collection.pageNumber = 0\r\n  },\r\n\r\n  //collection.cardInfo\r\n  setViewIndex_CardInfo: (state, action) => {\r\n    state.app.collection.cardInfo.viewIndex = action.payload.index\r\n  },\r\n\r\n  setEditEnabled_CardInfo: (state, action) => {\r\n    state.app.collection.cardInfo.editEnabled = action.payload.enabled\r\n  },\r\n\r\n  //collection.tableView\r\n  setColumns_TableView: (state, action) => {\r\n    state.app.collection.tableView.columns = action.payload.columns\r\n  },\r\n\r\n  //collection.gridView\r\n  setTiltEnabled_GridView: (state, action) => {\r\n    state.app.collection.gridView.tiltEnabled = action.payload.enabled\r\n  },\r\n\r\n  toggleTiltEnabled_GridView: (state, action) => {\r\n    state.app.collection.gridView.tiltEnabled = !state.app.collection.gridView.tiltEnabled\r\n  },\r\n\r\n  setTransform3dEnabled_GridView: (state, action) => {\r\n    state.app.collection.gridView.transform3dEnabled = action.payload.enabled\r\n  },\r\n\r\n  toggleTransform3dEnabled_GridView: (state, action) => {\r\n    state.app.collection.gridView.transform3dEnabled = !state.app.collection.gridView.transform3dEnabled\r\n  },\r\n}\r\n\r\nexport default appReducers\r\n","\r\nconst accountReducers = {\r\n  setActiveUser: (state, action) => {\r\n    const { username, accessToken } = action.payload\r\n\r\n    if (!username && !accessToken) {\r\n      localStorage.removeItem('username')\r\n      localStorage.removeItem('accessToken')\r\n      localStorage.removeItem('collection')\r\n    }\r\n    else {\r\n      username && localStorage.setItem('username', username)\r\n      accessToken && localStorage.setItem('accessToken', accessToken)\r\n    }\r\n\r\n    state.activeUser = {\r\n      ...state.activeUser,\r\n      accessToken,\r\n      username,\r\n    }\r\n  },\r\n\r\n  setCurrentCollection: (state, action) => {\r\n    const { collection } = action.payload\r\n\r\n    if (collection)\r\n      localStorage.setItem('collection', JSON.stringify(collection || []))\r\n    else\r\n      localStorage.removeItem('collection')\r\n\r\n    state.activeUser.collection = collection\r\n  },\r\n\r\n  updateCollection: (state, action) => {\r\n    const { cards } = action.payload\r\n    const { collection } = state.activeUser\r\n\r\n    for (const item of cards) {\r\n      const { _id, action, card } = item\r\n      let idx = -1\r\n\r\n      switch (action) {\r\n        case 'CREATED':\r\n          collection.push(card)\r\n          break\r\n\r\n        case 'UPDATED':\r\n          idx = collection.findIndex(item => item._id === _id)\r\n          if (idx !== -1)\r\n            Object.assign(collection[idx], card)\r\n          break\r\n\r\n        case 'DELETED':\r\n          idx = collection.findIndex(item => item._id === _id)\r\n          if (idx !== -1)\r\n            collection.splice(idx, 1)\r\n          break\r\n\r\n        case 'NOP':\r\n        default:\r\n          break\r\n      }\r\n    }\r\n\r\n    state.activeUser.collection = collection\r\n    localStorage.setItem('collection', JSON.stringify(collection || []))\r\n  },\r\n}\r\n\r\nexport default accountReducers","import { getDarkTheme, getLightTheme } from \"@/Themes\"\r\n\r\n\r\nconst themeReducers = {\r\n  toggleThemeType: (state, action) => {\r\n    const type = state.theme.themeType === 'dark' ? 'light' : 'dark' // toggle theme type\r\n    localStorage.setItem(\"themeType\", type)\r\n\r\n    state.theme = {\r\n      ...state.theme,\r\n      themeType: type,\r\n      currentTheme: type === 'dark' ? getDarkTheme() : getLightTheme(),\r\n    }\r\n  },\r\n}\r\n\r\nexport default themeReducers\r\n","import { createSlice } from \"@reduxjs/toolkit\"\r\n\r\nimport initialState from \"./initialState\"\r\nimport { appReducers, accountReducers, themeReducers } from \"./reducers\"\r\n\r\n\r\nexport const reducerSlice = createSlice({\r\n  name: \"actions\",\r\n  initialState: initialState,\r\n  reducers: {\r\n    ...appReducers,\r\n    ...accountReducers,\r\n    ...themeReducers,\r\n  },\r\n})\r\n\r\nexport default reducerSlice.reducer\r\n\r\nexport const {\r\n  actions\r\n} = reducerSlice","import appReducers from './appReducers'\r\nimport accountReducers from './accountReducers'\r\nimport themeReducers from './themeReducers'\r\n\r\nimport { combineReducers } from \"redux\"\r\n\r\nexport default combineReducers({\r\n  app: appReducers,\r\n  account: accountReducers,\r\n  theme: themeReducers,\r\n})\r\n\r\nexport {\r\n  appReducers,\r\n  accountReducers,\r\n  themeReducers,\r\n}","import { configureStore } from \"@reduxjs/toolkit\"\r\nimport reducerSlice from \"./reducerSlice\"\r\n\r\nexport default configureStore({\r\n  reducer: { actions: reducerSlice },\r\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware({\r\n    serializableCheck: false\r\n  })\r\n})\r\n","import store from \"./store\"\r\nimport reducer, { actions } from './reducerSlice'\r\n\r\nexport default reducer\r\nexport { store }\r\n\r\nexport const {\r\n  /** .activeUser **/\r\n  setActiveUser,\r\n  setCurrentCollection,\r\n  updateCollection,\r\n\r\n  /** .theme **/\r\n  toggleThemeType,\r\n\r\n  /** .app **/\r\n  setCurrency,\r\n  toggleCurrency, // toggles between 'usd' and 'eur'\r\n  \r\n  /** .app.topMenu **/\r\n  setCurrentTab,\r\n\r\n  /** .app.collection **/\r\n  setView,\r\n  setCurrentOpenCardId,\r\n  setSelectedCardIds,\r\n  removeSelectedCardIds,\r\n  addSelectedCardIds,\r\n  setFilters,\r\n  addFilters,\r\n  removeFilters,\r\n  setCardsSelectableEnabled,\r\n  toggleCardsSelectableEnabled,\r\n  setPageNumber,\r\n  setPerPage,\r\n  \r\n  /** .app.collection.cardInfo **/\r\n  setViewIndex_CardInfo,\r\n  setEditEnabled_CardInfo,\r\n\r\n  /** .app.collection.tableView **/\r\n  setColumns_TableView,\r\n  \r\n  /** .app.collection.gridView **/\r\n  setTiltEnabled_GridView,\r\n  toggleTiltEnabled_GridView,\r\n  setTransform3dEnabled_GridView,\r\n  toggleTransform3dEnabled_GridView,\r\n\r\n} = actions","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    root: {\r\n      height: '100%',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n    content: {\r\n      padding: `${theme.spacing(3)}px ${theme.spacing(5)}px ${theme.spacing(3)}px ${theme.spacing(5)}px`,\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { useEffect } from 'react'\r\nimport { Typography, Paper, Grid, Divider } from \"@material-ui/core\"\r\nimport { withStyles } from \"@material-ui/styles\"\r\nimport { connect } from \"react-redux\"\r\n\r\nimport Config from '@/Config'\r\nimport { setCurrentTab } from \"@/Logic/redux\"\r\nimport useStyles from \"./styles\"\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({})\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  'dispatch': {\r\n    setCurrentTab: (payload) => dispatch(setCurrentTab(payload)),\r\n  }\r\n})\r\n\r\n\r\nconst Home = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n  } = props\r\n\r\n\r\n  //EFFECTS\r\n  useEffect(() => {\r\n    //onMount\r\n    dispatch.setCurrentTab({ tab: 'home' })\r\n  }, [])\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid container justifyContent='center' className={classes.root}>\r\n      <Grid item container component={Paper} xs={12} sm={10} md={9} lg={8} className={classes.content} spacing={1}>\r\n        <Grid item container justifyContent='center' xs={12}>\r\n          <Grid item xs={11} sm={10} md={9}>\r\n            <img src='/logo.png' width='100%' alt=\"home\" />\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item xs={12} component={Typography} variant='h6'>\r\n          Welcome to Magicdex\r\n        </Grid>\r\n        <Grid item xs={12} component={Typography} varinat='body2'>\r\n          This is webapp is still in development, feel free to explore and report any bug you encounter.\r\n        </Grid>\r\n        <Grid item>\r\n          <Divider />\r\n        </Grid>\r\n        <Grid item xs={12} component={Typography} variant='body2'>\r\n          Active Config:\r\n          {\r\n            JSON.stringify({\r\n              MODIFY_DB_ALLOWED: Config.MODIFY_DB_ALLOWED,\r\n              API_URL: Config.API_URL,\r\n              username: 'test',\r\n              password: 'test',\r\n            }, null, 2)\r\n              .slice(2, -1)\r\n              .trim()\r\n              .split('\\n')\r\n              .map((item, i) => (\r\n                <div key={i}>\r\n                  <code>\r\n                    {item}\r\n                  </code>\r\n                </div>\r\n              ))\r\n          }\r\n        </Grid>\r\n        <Grid item xs={12} component={Typography} variant='h2'>\r\n          <span className=\"ss ss-fw ss-afr\" />\r\n          <span className=\"ss ss-fw ss-war\" />\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  connect(mapStateToProps, mapDispatchToProps)(\r\n    withStyles(useStyles)(\r\n      Home\r\n    )\r\n  )","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  currency: state.actions.app.currency,\r\n})\r\n\r\n\r\n/** UTILS **/\r\nconst addCardPrice = (card, currency = 'usd') => {\r\n  const { prices, foil, amount } = card\r\n  const price = Number(foil ? prices?.[`${currency}_foil`] : prices?.[currency])\r\n\r\n  return {\r\n    ...card,\r\n    currency,\r\n    price,\r\n    total_price: price * amount,\r\n  }\r\n}\r\n\r\n\r\n/** COMPONENT **/\r\nconst CardPriceDataProvider = ({\r\n  /** VARS **/\r\n  children,\r\n  data = [],\r\n  ...props\r\n}) => {\r\n  const {\r\n    currency,\r\n    ...rest\r\n  } = props\r\n  const [cardPriceData, setCardPriceData] = useState(data)\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    setCardPriceData(\r\n      data instanceof Array && data.map(card => addCardPrice(card, currency)))\r\n  }, [data, currency])\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    React.Children.map(children, child =>\r\n      React.cloneElement(child, {\r\n        data: cardPriceData,\r\n        ...rest,\r\n      })\r\n    )\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  connect(mapStateToProps)(\r\n    CardPriceDataProvider\r\n  )\r\n\r\nexport { addCardPrice }","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport _ from 'lodash'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  filters: state.actions.app.collection.filters,\r\n})\r\n\r\n\r\n/** COMPONENT **/\r\nconst FilteredDataProvider = ({\r\n  /** VARS **/\r\n  children,\r\n  data = [],\r\n  ...props\r\n}) => {\r\n  const {\r\n    filters,\r\n    ...rest\r\n  } = props\r\n  const [filteredData, setFilteredData] = useState(data)\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    setFilteredData(\r\n      _.filter(data ?? [],\r\n        row => (\r\n          _.every(Object.entries(filters ?? {}),\r\n            ([key, value]) => {\r\n              if (typeof value === 'boolean')\r\n                return value\r\n\r\n              if (value instanceof Function)\r\n                return value(row[key], row)\r\n\r\n              if (Array.isArray(value)) {\r\n                if (value.length > 0) {\r\n                  if (Array.isArray(row[key]))\r\n                    return _.intersection(value, row[key]).length > 0\r\n                  return value.includes(row[key])\r\n                }\r\n                return true\r\n              }\r\n\r\n              // default\r\n              return row[key] === value\r\n            })\r\n        ))\r\n    )\r\n  }, [filters, data])\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    React.Children.map(children, child =>\r\n      React.cloneElement(child, {\r\n        data: filteredData,\r\n        ...rest,\r\n      })\r\n    )\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  connect(mapStateToProps)(\r\n    FilteredDataProvider\r\n  )","import CardPriceDataProvider, { addCardPrice } from './CardPriceDataProvider'\r\nimport FilteredDataProvider from './FilteredDataProvider'\r\nimport intersectionWith from 'lodash/intersectionWith'\r\n\r\n\r\nconst addLayoutKeywords = (card) => {\r\n  const arrayContains = (array, values, type = 'some') => {\r\n    array = array\r\n      ? array instanceof Array\r\n        ? array\r\n        : [array]\r\n      : []\r\n    values = values\r\n      ? values instanceof Array\r\n        ? values\r\n        : [values]\r\n      : []\r\n\r\n    const intersection = intersectionWith(array, values,\r\n      (a, b) => a.includes(b)\r\n    )\r\n    switch (type) {\r\n      case 'some':\r\n        return intersection.length > 0\r\n      case 'every':\r\n        return intersection.length === values.length\r\n      default:\r\n        return false\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...card,\r\n    is_transform: arrayContains(card.layout, ['modal', 'transform']),\r\n    is_split: arrayContains(card.layout, ['split', 'fuse']),\r\n    is_flip: arrayContains(card.layout, ['flip']),\r\n  }\r\n}\r\n\r\nexport {\r\n  CardPriceDataProvider,\r\n  FilteredDataProvider,\r\n  addCardPrice,\r\n  addLayoutKeywords,\r\n}","import Scryfall from \"scryfall-client\"\r\nimport pick from 'lodash/pick'\r\nimport zipObjectDeep from \"lodash/zipObjectDeep\"\r\nimport intersectionWith from 'lodash/intersectionWith'\r\n\r\n\r\nconst Utils = {\r\n  getAuthHeaders: () => {\r\n    let token = localStorage.getItem(\"accessToken\")\r\n\r\n    return token ? { Authorization: `Bearer ${token}` } : {}\r\n  },\r\n\r\n  authHeadersDecorator: (func) => (\r\n    function (args) {\r\n      args = {\r\n        ...args,\r\n        headers: {\r\n          ...args?.headers,\r\n          ...getAuthHeaders(),\r\n        },\r\n      }\r\n      return func(args)\r\n    }\r\n  ),\r\n\r\n  catchErrors: (error) => {\r\n    if (error.response)\r\n      console.error('Request made and server responded', error.response)\r\n    else if (error.request)\r\n      console.error('Request was made but no response was recieved', error.request)\r\n    else\r\n      console.error(\"Something happened in setting up the request that triggered an error\", error.message)\r\n\r\n    throw error\r\n  },\r\n\r\n  fetchScryfallCardData: async (cardInfo) => {\r\n    const all_sets = await Scryfall.getSets()\r\n    const setData = zipObjectDeep(all_sets.map(set => set.id), all_sets) // { 'M19': {...}, 'M20': {...}, ... }\r\n\r\n    const card_ids = cardInfo.map(card => ({ id: card.id }))\r\n    const cardData = await Scryfall.getCollection(card_ids)\r\n\r\n    return cardData.map((card) => ({\r\n      ...card,\r\n      set_data: setData[card.set_id],\r\n    }))\r\n  },\r\n\r\n  arrayContains: (array, values, type = 'some') => {\r\n    array = array instanceof Array ? array : [array]\r\n    values = values instanceof Array ? values : [values]\r\n\r\n    const intersection = intersectionWith(array, values,\r\n      (a, b) => a.includes(b)\r\n    )\r\n    switch (type) {\r\n      case 'some':\r\n        return intersection.length > 0\r\n      case 'every':\r\n        return intersection.length === values.length\r\n      default:\r\n        return false\r\n    }\r\n  },\r\n\r\n  populateCardData: async (cards) => {\r\n    const cardInfo =\r\n      (Array.isArray(cards) ? cards : [cards])\r\n        .map(card => {\r\n          card.id = card.scryfall_id\r\n          delete card.scryfall_id\r\n          return card\r\n        })\r\n\r\n    const scryfallData = await fetchScryfallCardData(cardInfo)\r\n\r\n    const populatedCards = await Promise.all(\r\n      cardInfo.map(async (card, i) => {\r\n        const { is_transform, is_split, is_flip } = {\r\n          is_transform: arrayContains(scryfallData[i].layout, ['modal', 'transform']),\r\n          is_split: arrayContains(scryfallData[i].layout, ['split', 'fuse']),\r\n          is_flip: arrayContains(scryfallData[i].layout, ['flip']),\r\n        }\r\n\r\n        return Object.assign(scryfallData[i], {\r\n          ...card,\r\n          is_transform,\r\n          is_split,\r\n          is_flip,\r\n          // rulings: await scryfallData[i].getRulings(),\r\n          date_created: new Date(card.date_created),\r\n          mana_cost: is_transform\r\n            ? [scryfallData[i].card_faces[0].mana_cost, scryfallData[i].card_faces[1].mana_cost]\r\n            : scryfallData[i].mana_cost,\r\n        })\r\n      })\r\n    )\r\n\r\n    return Array.isArray(cards)\r\n      ? populatedCards\r\n      : populatedCards[0]\r\n  },\r\n\r\n  pickCardFields: (cards, fields = ['_id', 'id', 'amount', 'tag', 'foil', 'condition', 'signed', 'altered', 'misprint']) => {\r\n    const _pick = (card) => {\r\n      const c = pick(card, fields)\r\n      \r\n      if (c.hasOwnProperty('id')) {\r\n        c.scryfall_id = c.id\r\n        delete c.id\r\n      }\r\n      \r\n      return c\r\n    }\r\n\r\n    if (Array.isArray(cards))\r\n      return cards\r\n        .map(_pick)\r\n\r\n    // else\r\n    return _pick(cards)\r\n  }\r\n}\r\n\r\nexport default Utils\r\n\r\nexport const {\r\n  getAuthHeaders,\r\n  authHeadersDecorator,\r\n  catchErrors,\r\n  fetchScryfallCardData,\r\n  arrayContains,\r\n  populateCardData,\r\n  pickCardFields,\r\n} = Utils\r\n","import axios from \"axios\"\r\n\r\nimport { authHeadersDecorator } from './utils'\r\nimport { API_URL } from \"@/Config\"\r\n\r\n\r\nconst ROUTE_URL = `${API_URL}/auth`\r\n\r\nconst renameKeys = (obj, keyMap) =>\r\n  Object.keys(obj)\r\n    .reduce((acc, key) => {\r\n      const newKey = keyMap[key] || key\r\n      acc[newKey] = obj[key]\r\n      return acc\r\n    }, {})\r\n\r\nconst Auth = {\r\n  /**\r\n   * Try to login with the given credentials.\r\n   * If credentials provided it will try to use the saved access token.\r\n   * @param {String?} username\r\n   * @param {String?} password\r\n   * @returns Response Object\r\n   */\r\n  login: authHeadersDecorator(({ username, password, headers }) => {\r\n    // let params = { username, password }\r\n    const payload = new FormData()\r\n    payload.append('username', username)\r\n    payload.append('password', password)\r\n\r\n    return axios\r\n      .post(ROUTE_URL, payload, { headers })\r\n      .then(response => ({\r\n        'accessToken': response.data['access_token']\r\n      }))\r\n      // .then(response => renameKeys(response.data, { 'access-token': 'accessToken' }))\r\n      // .catch(err => catchErrors(err));\r\n  }),\r\n\r\n  /**\r\n   * Try to register a new user.\r\n   * @param {String?} username\r\n   * @param {String?} password\r\n   * @returns Response Object\r\n   */\r\n  register: ({ username, password }) => {\r\n    const payload = { username, password }\r\n\r\n    return axios\r\n      .put(ROUTE_URL, payload)\r\n      .then(response => renameKeys(response.data, { 'access_token': 'accessToken' }))\r\n    // .catch(err => catchErrors(err));\r\n  },\r\n}\r\n\r\nexport default Auth\r\n\r\nexport const {\r\n  login,\r\n  register,\r\n} = Auth\r\n","import axios from 'axios'\r\n\r\nimport { API_URL } from '@/Config'\r\nimport { getAuthHeaders, catchErrors, populateCardData, pickCardFields } from './utils'\r\n\r\n\r\nconst ROUTE_URL = `${API_URL}/collections`\r\n\r\n\r\nconst Collections = {\r\n  /**\r\n   * Retrieve cards from active user's collection.\r\n   */\r\n  getCards: (page, per_page, cards) => {\r\n    const headers = getAuthHeaders()\r\n    const params = { page, per_page, cards }\r\n\r\n    return axios\r\n      .get(ROUTE_URL, { params, headers })\r\n      .then(response => populateCardData(response.data.data))\r\n      .catch(err => catchErrors(err))\r\n  },\r\n\r\n  /**\r\n   * Insert or update cards from active user's collection.\r\n   */\r\n  updateCards: async (cards) => {\r\n    const headers = getAuthHeaders()\r\n\r\n    // keep only relevant data\r\n    cards = pickCardFields(cards)\r\n\r\n    try {\r\n      let response = await axios.post(ROUTE_URL, { cards }, { headers })\r\n\r\n      response = await Promise.all(response.data.map(async (item, i) => ({\r\n        ...item,\r\n        card: item.card\r\n          ? {\r\n            ...await populateCardData(item.card),\r\n            ...item.card,\r\n          }\r\n          : cards[i]\r\n      })))\r\n\r\n      return response\r\n    }\r\n    catch (error) {\r\n      catchErrors(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Delete cards from active user's collection.\r\n   */\r\n  deleteCards: (cards) => {\r\n    const headers = getAuthHeaders()\r\n\r\n    return axios\r\n      .delete(ROUTE_URL, { cards }, { headers })\r\n      .then(response => response)\r\n      .catch(err => catchErrors(err))\r\n  },\r\n\r\n\r\n  /**\r\n   * Retrieve all cards from active user's collection.\r\n   */\r\n  getAllCards: (cards) => {\r\n    const headers = getAuthHeaders()\r\n    const params = { cards }\r\n\r\n    return axios\r\n      .get(`${ROUTE_URL}/all`, { params, headers })\r\n      .then(response => populateCardData(response.data.data))\r\n      .catch(err => catchErrors(err))\r\n  },\r\n\r\n  /**\r\n   * Clear active user's collection.\r\n   */\r\n  deleteAllCards: () => {\r\n    const headers = getAuthHeaders()\r\n\r\n    return axios\r\n      .delete(`${ROUTE_URL}/all`, { headers })\r\n      .then(response => response)\r\n      .catch(err => catchErrors(err))\r\n  },\r\n\r\n  /**\r\n   * Retrieve a specific card from active user's collection.\r\n   */\r\n  getCardById: (card_id) => {\r\n    const headers = getAuthHeaders()\r\n\r\n    return axios\r\n      .get(`${ROUTE_URL}/${card_id}`, { headers })\r\n      .then(response => populateCardData(response.data))\r\n      .catch(err => catchErrors(err))\r\n  },\r\n\r\n  /**\r\n   * Update a specific card from active user's collection.\r\n   */\r\n  updateCardById: (card_id, data) => {\r\n    const headers = getAuthHeaders()\r\n\r\n    return axios\r\n      .post(`${ROUTE_URL}/${card_id}`, data, { headers })\r\n      .then(response => response)\r\n      .catch(err => catchErrors(err))\r\n  },\r\n\r\n  /**\r\n   * Delete a specific card from active user's collection.\r\n   */\r\n  deleteCardById: (card_id) => {\r\n    const headers = getAuthHeaders()\r\n\r\n    return axios\r\n      .delete(`${ROUTE_URL}/${card_id}`, { headers })\r\n      .then(response => response)\r\n      .catch(err => catchErrors(err))\r\n  },\r\n}\r\n\r\n\r\n/** EXPORTS **/\r\n// const decoratedCollections =\r\n//   Object.fromEntries(\r\n//     Object\r\n//       .entries(Collections)\r\n//       .map(([k, v]) => [k, authHeadersDecorator(v)])\r\n//   )\r\n\r\n// export default decoratedCollections\r\nexport default Collections\r\n\r\nexport const {\r\n  getCards,\r\n  updateCards,\r\n  deleteCards,\r\n  getAllCards,\r\n  deleteAllCards,\r\n  getCardById,\r\n  updateCardById,\r\n  deleteCardById,\r\n  // } = decoratedCollections\r\n} = Collections\r\n","import { login, register } from \"./auth\"\r\nimport {\r\n  getAllCards,\r\n  deleteAllCards,\r\n  getCards,\r\n  updateCards,\r\n  deleteCards,\r\n  getCardById,\r\n  updateCardById,\r\n  deleteCardById,\r\n} from \"./collection\"\r\n\r\n\r\nconst MagicdexApi = {\r\n  login,\r\n  register,\r\n  getCards,\r\n  updateCards,\r\n  deleteCards,\r\n  getAllCards,\r\n  deleteAllCards,\r\n  getCardById,\r\n  updateCardById,\r\n  deleteCardById,\r\n}\r\n\r\nexport default MagicdexApi","import Scryfall from 'scryfall-client'\r\nimport filter from 'lodash/filter'\r\n\r\nimport MagicdexApi from \"./MagicdexApi\"\r\nimport { fetchScryfallCardData } from './MagicdexApi/utils'\r\n\r\n\r\n/**\r\n * get card print information from scryfall.\r\n * @param {object} card - should include {'oracle_id', 'set', 'collector_number'}\r\n * @param {string} type - search type, one of ['set', 'lang', 'both'], default 'set'\r\n */\r\nconst getCardPrints = async (card, type = 'set') => {\r\n  const { oracle_id, set, collector_number } = card\r\n  let res = []\r\n\r\n  /** METHODS **/\r\n  const getLangs = async () => {\r\n    res = await Scryfall.search(`oracleid:${oracle_id}+set:${set}+lang:any`, {\r\n      unique: 'prints',\r\n      include_multilingual: true,\r\n      include_extras: true,\r\n    })\r\n    res = filter(res, { collector_number })\r\n    return res\r\n  }\r\n\r\n  const getSets = async () => {\r\n    res = await Scryfall.search(`oracleid:${oracle_id}`, {\r\n      unique: 'prints',\r\n      order: 'released',\r\n      dir: 'desc',\r\n      include_variations: true,\r\n      include_extras: true,\r\n    })\r\n    return res\r\n  }\r\n\r\n  /** FUNCTION MAPPING **/\r\n  switch (type) {\r\n    case 'both':\r\n      try {\r\n        res = {\r\n          lang: await getLangs(),\r\n          set: await getSets(),\r\n        }\r\n      }\r\n      catch (err) {\r\n        console.error({ error: err })\r\n      }\r\n      break\r\n\r\n    case 'lang':\r\n      try {\r\n        res = await getLangs()\r\n      }\r\n      catch (err) {\r\n        console.error({ error: err })\r\n      }\r\n      break\r\n\r\n    default:\r\n    case 'set':\r\n      try {\r\n        res = await getSets()\r\n      }\r\n      catch (err) {\r\n        console.error({ error: err })\r\n      }\r\n      break\r\n  }\r\n\r\n  /** RETURN VALUE **/\r\n  res = await fetchScryfallCardData(res)\r\n  return res\r\n}\r\n\r\nexport {\r\n  MagicdexApi,\r\n  getCardPrints,\r\n}","import clsx from 'clsx'\r\nimport compact from 'lodash/compact'\r\n\r\n\r\nconst utils = {\r\n  addLeadingZero: (date) => (\r\n    date < 10\r\n      ? date = '0' + date\r\n      : date\r\n  ),\r\n\r\n  toManaFont: (txt, props) => {\r\n    if (typeof txt === 'string')\r\n      txt = txt\r\n        .replace(/(^{)|(\\/)|(}$)/g, '') // remove starting '{', trailing '}' and any '/'\r\n        .split('}{')\r\n    return txt\r\n      .map(sym => {\r\n        switch (sym) {\r\n          default:\r\n            return sym\r\n\r\n          case 'T':\r\n            return 'tap'\r\n        }\r\n      })\r\n      .map(sym => sym ? `ms-${sym.toLowerCase()}` : '')\r\n      .map((cost, i) => (\r\n        <span\r\n          key={i}\r\n          {...props}\r\n          style={props?.style}\r\n          className={clsx('ms', 'ms-cost', 'ms-shadow', 'ms-fw', cost, ...props?.className)} />\r\n      ))\r\n  },\r\n\r\n  toColorIndicator: (txt, props) => {\r\n    if (typeof txt === 'string')\r\n      txt = txt\r\n        .replace(/(^{)|(\\/)|(}$)/g, '') // remove starting '{', trailing '}' and any '/'\r\n        .split('}{')\r\n    txt = compact(txt) // remove empty strings\r\n\r\n    return txt\r\n      .map((ci, i) => (\r\n        <span\r\n          key={i}\r\n          {...props}\r\n          style={props?.style}\r\n          className={clsx('ms', 'ms-ci', `ms-ci-${ci.length}`, `ms-ci-${ci.toLowerCase()}`)} />\r\n      ))\r\n  },\r\n\r\n  transformStringArray: (arr, searchStart, searchEnd, strTransformation) => {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      let str = arr[i]\r\n      if (typeof str !== 'string')\r\n        continue\r\n\r\n      let startIdx = str.search(searchStart)\r\n      let endIdx = str.search(searchEnd)\r\n\r\n      if (startIdx === -1 || endIdx === -1)\r\n        continue\r\n\r\n      let substr = str.substring(startIdx, endIdx + 1) // include search characters\r\n      let transformed = strTransformation(substr)\r\n      transformed = transformed instanceof Array ? transformed : [transformed]\r\n      // replace element at index i with transformed string\r\n      arr.splice(i, 1,\r\n        str.substring(0, startIdx),\r\n        ...transformed,\r\n        str.substring(endIdx + 1)\r\n      )\r\n    }\r\n    return compact(arr) // remove any empty strings\r\n  },\r\n\r\n  limitPrecision: (num, precision = 2) => {\r\n    precision = 10 ** precision\r\n  \r\n    return Math.round(Number(num) * precision) / precision\r\n  }\r\n}\r\n\r\nexport default utils\r\n\r\nexport const {\r\n  addLeadingZero,\r\n  toManaFont,\r\n  toColorIndicator,\r\n  transformStringArray,\r\n  limitPrecision,\r\n} = utils","const useStyles = (theme) => {\r\n  return {\r\n    chip: {\r\n      boxShadow: theme.shadows[1],\r\n    },\r\n    preWrap: {\r\n      whiteSpace: 'pre-wrap',\r\n    },\r\n    mana: {\r\n      marginRight: '0.25em',\r\n      fontSize: '0.85em',\r\n    },\r\n    colorIndicator: {\r\n      marginRight: '0.25em',\r\n      fontSize: '0.9em',\r\n    },\r\n    set: {\r\n      fontSize: '1.25em',\r\n    },\r\n    flavorText: {\r\n      // marginTop: '0.2em',\r\n      fontStyle: 'italic',\r\n      fontFamily: 'Georgia, fangsong, Times New Roman',\r\n      whiteSpace: 'pre-wrap',\r\n      '&[lang=\"ph\"]': {\r\n        fontFamily: 'PhyrexianHorizontal',\r\n        lineBreak: 'anywhere',\r\n      }\r\n    },\r\n    condition: {\r\n      padding: '3px 8px 3px 8px',\r\n      borderRadius: 12,\r\n      boxShadow: theme.shadows[1],\r\n      fontFamily: '\"Red Hat Mono\", Consolas, monospace',\r\n      fontSize: '0.93em',\r\n    },\r\n    widthLimit: {\r\n      maxWidth: '22 em',\r\n      [theme.breakpoints.down('lg')]: {\r\n        maxWidth: '17em',\r\n      },\r\n      [theme.breakpoints.down(1400)]: {\r\n        maxWidth: '10em',\r\n      },\r\n      [theme.breakpoints.down('sm')]: {\r\n        maxWidth: '7em',\r\n      },\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","import { Fragment, memo } from 'react'\r\nimport { useTheme, useMediaQuery, Chip, Hidden, Typography } from '@material-ui/core'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport clsx from 'clsx'\r\nimport _ from 'lodash'\r\n\r\n// import { EllipsisText } from '@/Components'\r\nimport utils from './utils'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** Card render delegation helper function **/\r\nconst RenderCell = ({ card, columnName, ...rest }) => {\r\n  columnName = columnName.replace(/[ ]+/g, '_')\r\n  const props = { card, columnName, ...rest }\r\n\r\n  switch (columnName) {\r\n    case 'name':\r\n      return <renders.RenderName {...props} />\r\n\r\n    case 'set':\r\n      return <renders.RenderSet {...props} />\r\n\r\n    case 'condition':\r\n      return <renders.RenderCondition {...props} />\r\n\r\n    case 'power_toughness':\r\n      return <renders.RenderPowerToughness {...props} />\r\n\r\n    case 'oracle':\r\n    case 'oracle_text':\r\n      return <renders.RenderOracleText {...props} />\r\n\r\n    case 'signed':\r\n    case 'altered':\r\n    case 'misprint':\r\n    case 'foil':\r\n      return <renders.RenderBoolean {...props} />\r\n\r\n    case 'amount':\r\n      return <renders.RenderAmount {...props} />\r\n\r\n    case 'total_price':\r\n    case 'price':\r\n      return <renders.RenderPrice {...props} />\r\n\r\n    case 'tag':\r\n      return <renders.RenderTag {...props} />\r\n\r\n    case 'mana_cost':\r\n      return <renders.RenderManaCost {...props} />\r\n\r\n    case 'type_line':\r\n    case 'type':\r\n      return <renders.RenderType {...props} />\r\n\r\n    case 'date':\r\n    case 'date_created':\r\n    case 'date_added':\r\n      return <renders.RenderDate {...props} />\r\n\r\n    case 'flavor':\r\n    case 'flavor_text':\r\n      return <renders.RenderFlavorText {...props} />\r\n\r\n    default:\r\n      return <renders.DefaultRender {...props} />\r\n  }\r\n}\r\n\r\n\r\n/** RENDERS **/\r\nconst renders = {\r\n  DefaultRender: withStyles(useStyles)(memo(\r\n    ({ classes, card, columnName, cardFace }) => {\r\n      let { [columnName]: value } = cardFace !== undefined ? card.card_faces[cardFace] : card\r\n      value = value || card[columnName]\r\n\r\n      return (\r\n        value\r\n          ? <span className={classes.preWrap}>\r\n            {value}\r\n          </span>\r\n          : ''\r\n      )\r\n    }\r\n  )),\r\n\r\n  RenderName: withStyles(useStyles)(memo(\r\n    ({ classes, card, cardFace, renderStyle = 'row' }) => {\r\n      let { name } = cardFace !== undefined ? card.card_faces[cardFace] : card\r\n      const lgDown = useMediaQuery(theme => theme.breakpoints.down('md'))\r\n\r\n      switch (renderStyle) {\r\n        default:\r\n        case 'row':\r\n          name = name\r\n            .replace(/—/g, '-')\r\n            .replace(/Legendary/g, 'Lgd.')\r\n          const arr = name\r\n            .split('//')\r\n            .map(v => v.trim())\r\n          return (\r\n            <Typography noWrap variant='body2' className={classes.widthLimit} title={lgDown ? name : ''}>\r\n              {arr[0]}\r\n              {\r\n                arr.length > 1 &&\r\n                <Hidden mdDown>{' // ' + arr[1]}</Hidden>\r\n              }\r\n            </Typography>\r\n          )\r\n\r\n        case 'content':\r\n          return <b>{name}</b>\r\n      }\r\n    }\r\n  )),\r\n\r\n  RenderOracleText: withStyles(useStyles)(memo(\r\n    ({ classes, card, columnName = 'oracle_text', cardFace }) => {\r\n      let { [columnName]: oracleText } = cardFace !== undefined ? card.card_faces[cardFace] : card\r\n      let align = _.words(oracleText).length > 2 ? 'left' : 'center'\r\n\r\n      if (oracleText) {\r\n        oracleText = [oracleText]\r\n\r\n        /* handle `{X}` symbols */\r\n        oracleText = utils.transformStringArray(\r\n          oracleText,\r\n          /\\{/g,\r\n          /\\}/g,\r\n          match => (\r\n            utils.toManaFont(match, {\r\n              className: classes.mana,\r\n              style: {\r\n                fontSize: '0.68em',\r\n                transform: 'translateY(-1px)'\r\n              }\r\n            })\r\n          )\r\n        )\r\n\r\n        /* handle `(http://...)` paragraphs */\r\n        oracleText = utils.transformStringArray(\r\n          oracleText,\r\n          /\\(http/g,\r\n          /\\)/g,\r\n          match => {\r\n            match = match.slice(1, -1)\r\n            return (\r\n              <span style={{ fontStyle: 'italic', fontSize: '0.88em', lineBreak: 'anywhere' }}>\r\n                {'('}\r\n                <a href={match}>{match}</a>\r\n                {')'}\r\n              </span>\r\n            )\r\n          }\r\n        )\r\n\r\n        /* handle `(...)` paragraphs */\r\n        oracleText = utils.transformStringArray(\r\n          oracleText,\r\n          /\\(/g,\r\n          /\\)/g,\r\n          match => (\r\n            <span style={{ fontStyle: 'italic', fontSize: '0.88em' }}>{match}</span>\r\n          )\r\n        )\r\n      }\r\n\r\n      return (\r\n        oracleText\r\n          ?\r\n          <div align={align} className={classes.preWrap}>\r\n            {\r\n              oracleText.map((text, i) =>\r\n                <Fragment key={i}>\r\n                  {text}\r\n                </Fragment>\r\n              )\r\n            }\r\n          </div>\r\n          : ''\r\n      )\r\n    }\r\n  )),\r\n\r\n  RenderPowerToughness: withStyles(useStyles)(memo(\r\n    ({ classes, card, cardFace }) => {\r\n      const { power, toughness } = cardFace !== undefined ? card.card_faces[cardFace] : card\r\n\r\n      return power && toughness\r\n        ?\r\n        <span align='right' style={{ fontSize: '1rem' }}>\r\n          {`${power}/${toughness}`}\r\n        </span>\r\n        : ''\r\n    }\r\n  )),\r\n\r\n  RenderSet: withStyles(useStyles)(memo(\r\n    ({ classes, card, renderStyle = 'row' }) => {\r\n      const theme = useTheme()\r\n      const { set_data, rarity, foil } = card\r\n      const set = set_data?.parent_set_code ? set_data.parent_set_code : set_data.code\r\n      return (\r\n        <span\r\n          className={`${classes.set} ss ss-fw ss-${rarity} ss-${set}`}\r\n          title={renderStyle === 'content' ? `${set_data.name} - ${_.upperFirst(rarity)}${foil ? ' [F]' : ''}` : null}\r\n          style={{\r\n            ...(rarity === 'common' && theme.palette.type === 'dark' ? { color: '#CCCCCC' } : {})\r\n          }}\r\n        />\r\n      )\r\n    }\r\n  )),\r\n\r\n  RenderBoolean: withStyles(useStyles)(memo(\r\n    ({ classes, card, columnName, renderStyle = 'row' }) => {\r\n      const { [columnName]: value } = card\r\n\r\n      switch (renderStyle) {\r\n        default:\r\n        case 'row':\r\n          return value.toString() === 'true'\r\n            ? <Chip className={classes.chip} label='✔' size='small' />\r\n            : <Chip className={classes.chip} label='✖' size='small' />\r\n\r\n        case 'content':\r\n          return value.toString() === 'true'\r\n            ? <Chip className={classes.chip} label='Yes' size='small' color='secondary' />\r\n            : <Chip className={classes.chip} label='No' size='small' />\r\n      }\r\n    }\r\n  )),\r\n\r\n  RenderCondition: withStyles(useStyles)(memo(\r\n    ({ classes, card }) => {\r\n      const theme = useTheme()\r\n      const cond = card.condition.toUpperCase()\r\n\r\n      const condStyles = (cond) => {\r\n        const toStyle = (rgb) => ({\r\n          backgroundColor: rgb,\r\n          color: theme.palette.getContrastText(rgb),\r\n        })\r\n        const colors = {\r\n          NM: '#ffce10',\r\n          LP: '#ff9f10',\r\n          MP: '#ff9010',\r\n          HP: '#e84c10',\r\n          DAMAGED: '#c41313',\r\n        }\r\n\r\n        return toStyle(colors[cond])\r\n      }\r\n\r\n      return (\r\n        <code className={`${classes.condition}`} style={condStyles(cond)}>\r\n          {cond}\r\n        </code>\r\n      )\r\n    }\r\n  )),\r\n\r\n  RenderAmount: withStyles(useStyles)(memo(\r\n    ({ classes, card }) => (\r\n      <Chip\r\n        className={classes.chip}\r\n        label={'x' + card.amount}\r\n        size='small'\r\n      />\r\n    )\r\n  )),\r\n\r\n  RenderPrice: withStyles(useStyles)(memo(\r\n    ({ classes, card, columnName = 'price' }) => {\r\n      let { [columnName]: price, currency } = card\r\n      price = utils.limitPrecision(price, 2)\r\n      return (\r\n        price > 0\r\n          ? currency === 'usd'\r\n            ? '$' + price\r\n            : price + '€'\r\n          : '-'\r\n      )\r\n    }\r\n  )),\r\n\r\n  RenderTag: withStyles(useStyles)(memo(\r\n    ({ classes, card, columnName = 'tags', renderStyle = 'row' }) => {\r\n      let { [columnName]: tags } = card\r\n\r\n      return (\r\n        tags.length > 0\r\n          ? tags.map((tag, i) =>\r\n            <Chip\r\n              key={i}\r\n              label={tag}\r\n              size='small'\r\n            />\r\n          )\r\n          : ''\r\n      )\r\n    }\r\n  )),\r\n\r\n  RenderManaCost: withStyles(useStyles)(memo(\r\n    ({ classes, card, columnName = 'mana_cost', cardFace, renderStyle = 'row' }) => {\r\n      let { [columnName]: manaCost, cmc } = cardFace !== undefined ? card.card_faces[cardFace] : card\r\n      manaCost = manaCost || []\r\n\r\n      if (!(manaCost instanceof Array))\r\n        if (manaCost.includes('//'))\r\n          manaCost = manaCost.split('//').map(v => v.trim())\r\n        else\r\n          manaCost = [manaCost]\r\n      manaCost = _.compact(manaCost)\r\n\r\n      if (manaCost.length === 0)\r\n        return renderStyle === 'row' ? '-' : ''\r\n\r\n      manaCost = manaCost.map(cost => utils.toManaFont(cost, { className: classes.mana, style: { marginRight: '0.25em', fontSize: '0.85em' } }))\r\n      if (manaCost.length > 1)\r\n        manaCost.splice(1, 0, ' // ') // add a separator between the two mana costs\r\n      return (\r\n        <Typography variant=\"body2\" noWrap>\r\n          {\r\n            cmc\r\n              ? <span title={`${cmc} Cmc`}>\r\n                {manaCost}\r\n              </span>\r\n              : manaCost\r\n          }\r\n        </Typography>\r\n      )\r\n    }\r\n  )),\r\n\r\n  RenderType: withStyles(useStyles)(memo(\r\n    ({ classes, card, columnName = 'type_line', cardFace, renderStyle = 'row' }) => {\r\n      let { [columnName]: typeLine, color_indicator: colorIndicator } = cardFace !== undefined ? card.card_faces[cardFace] : card\r\n      const lgDown = useMediaQuery(theme => theme.breakpoints.down('md'))\r\n\r\n      switch (renderStyle) {\r\n        default:\r\n        case 'row':\r\n          typeLine = typeLine\r\n            .replace(/—/g, '-')\r\n            .replace(/Legendary/g, 'Lgd.')\r\n          const arr = typeLine\r\n            .split('//')\r\n            .map(v => v.trim())\r\n          return (\r\n            <Typography noWrap variant='body2' className={classes.widthLimit} title={lgDown ? typeLine : ''}>\r\n              {arr[0]}\r\n              {\r\n                arr.length > 1 &&\r\n                <Hidden mdDown>{' // ' + arr[1]}</Hidden>\r\n              }\r\n            </Typography>\r\n          )\r\n\r\n        case 'content':\r\n          typeLine = typeLine.replace(/—/g, '-')\r\n          colorIndicator = colorIndicator && utils.toColorIndicator(colorIndicator, { style: { marginRight: '0.25em', fontSize: '0.9em' } })\r\n          return (\r\n            colorIndicator\r\n              ? <>{colorIndicator}{typeLine}</>\r\n              : typeLine\r\n          )\r\n      }\r\n    }\r\n  )),\r\n\r\n  RenderDate: withStyles(useStyles)(memo(\r\n    ({ classes, card, columnName = 'date_added' }) => {\r\n      const date = new Date(card[columnName])\r\n      let [year, month, day] = [date.getFullYear(), date.getMonth() + 1, date.getDate()]\r\n\r\n      return (\r\n        [utils.addLeadingZero(day), utils.addLeadingZero(month), year].join('/')\r\n      )\r\n    }\r\n  )),\r\n\r\n  RenderFlavorText: withStyles(useStyles)(memo(\r\n    ({ classes, card, cardFace }) => {\r\n      const { lang } = card\r\n      const { flavor_text } = cardFace !== undefined ? card.card_faces[cardFace] : card\r\n      let align = _.words(flavor_text).length > 2 ? 'left' : 'center'\r\n\r\n      return (\r\n        flavor_text\r\n          ? <div align={align} lang={lang} className={clsx(classes.flavorText)}>\r\n            {flavor_text}\r\n          </div>\r\n          : ''\r\n      )\r\n    }\r\n  )),\r\n}\r\n\r\n/** EXPORTS **/\r\nexport default RenderCell\r\n\r\nexport const {\r\n  DefaultRender,\r\n  RenderName,\r\n  RenderOracleText,\r\n  RenderPowerToughness,\r\n  RenderSet,\r\n  RenderBoolean,\r\n  RenderAmount,\r\n  RenderPrice,\r\n  RenderTag,\r\n  RenderManaCost,\r\n  RenderType,\r\n  RenderDate,\r\n  RenderFlavorText,\r\n} = renders\r\n","// import { useEffect } from 'react'\r\nimport { Box, Grid, Typography } from '@material-ui/core'\r\n\r\nimport RenderCell from '@/CardRenders'\r\n\r\n\r\nconst FieldsPanel = ({\r\n  /** VARS **/\r\n  card,\r\n  renderStyle = 'content',\r\n  ...props\r\n}) => {\r\n  const {\r\n    ...rest\r\n  } = props\r\n\r\n  const [name, manaCost, typeLine, set, oracleText, flavorText, artist, collectorNumber, powerToughness] = [\r\n    card && RenderCell({ card, columnName: 'name', renderStyle, ...rest }),\r\n    card && RenderCell({ card, columnName: 'mana_cost', renderStyle, ...rest }),\r\n    card && RenderCell({ card, columnName: 'type_line', renderStyle, ...rest }),\r\n    card && RenderCell({ card, columnName: 'set', renderStyle, ...rest }),\r\n    card && RenderCell({ card, columnName: 'oracle_text', renderStyle, ...rest }),\r\n    card && RenderCell({ card, columnName: 'flavor_text', renderStyle, ...rest }),\r\n    card && RenderCell({ card, columnName: 'artist', renderStyle, ...rest }),\r\n    card && RenderCell({ card, columnName: 'collector_number', renderStyle, ...rest }),\r\n    card && RenderCell({ card, columnName: 'power_toughness', renderStyle, ...rest }),\r\n  ]\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid item container justifyContent='space-between' direction='column' style={{ height: '100%' }}>\r\n\r\n\r\n      <Grid item container justifyContent='center' spacing={2}>\r\n        <Grid item name='name'>\r\n          {name}\r\n        </Grid>\r\n        {manaCost && <Grid item name='mana-cost'>\r\n          {manaCost}\r\n        </Grid>}\r\n      </Grid>\r\n      <Grid item container component={Box} justifyContent='center' spacing={1} flexGrow={1}>\r\n        <Grid item name='type-line'>\r\n          {typeLine}\r\n        </Grid>\r\n        <Grid item name='set'>\r\n          {set}\r\n        </Grid>\r\n      </Grid>\r\n\r\n\r\n      {oracleText && <Grid item name='oracle-text' component={Box} paddingTop={1} flexGrow={1}>\r\n        {oracleText}\r\n      </Grid>}\r\n      {flavorText && <Grid item name='flavor-text' component={Box} align='left' flexGrow={1} paddingTop='0.45em'>\r\n        {flavorText}\r\n      </Grid>}\r\n\r\n\r\n      <Grid item container justifyContent='space-between' alignItems='baseline' wrap='nowrap' component={Typography} variant='overline' style={{ marginTop: '0.3em' }}>\r\n        <Grid item container spacing={1}>\r\n          <Grid item name='collector-number'>\r\n            #{collectorNumber}\r\n          </Grid>\r\n          <Grid item name='artist'>\r\n            <span className='ms ms-shadow ms-artist-nib' />{artist}\r\n          </Grid>\r\n        </Grid>\r\n        {powerToughness && <Grid item name='power-toughness'>\r\n          {powerToughness}\r\n        </Grid>}\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default FieldsPanel","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    root: {\r\n      // position: 'relative',\r\n    },\r\n    accordion: {\r\n      // backgroundColor: theme.palette.background.secondary,\r\n      backgroundColor: theme.palette.type === 'dark' ? 'rgba(255,255,255,0.12)' : 'rgba(0,0,0,0.12)',\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n    'accordion-expanded': {\r\n      paddingBottom: theme.spacing(1),\r\n    },\r\n    listing: {\r\n      margin: 0,\r\n      '& > li': {\r\n        margin: '8px 1.25em 8px 0',\r\n      },\r\n      '& > li:first-child': {\r\n        paddingTop: 0,\r\n      },\r\n      '& > li:last-child': {\r\n        paddingBottom: 0,\r\n      },\r\n    },\r\n    editButtonContainer: {\r\n      // position: 'absolute',\r\n      // top: 0,\r\n      // right: 0,\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { Fragment, useState, useEffect } from 'react'\r\nimport { Tooltip, Chip, useMediaQuery, Accordion, AccordionDetails, AccordionSummary, InputAdornment, Divider, Typography, Paper, Modal, CircularProgress, Grid, IconButton, Button, Fade, Zoom, FormControlLabel, TextField, Checkbox, MenuItem } from '@material-ui/core'\r\nimport { Autocomplete } from '@material-ui/lab'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport { Delete as DeleteIcon, ExpandMore as ExpandMoreIcon } from '@material-ui/icons'\r\nimport { useSnackbar } from 'notistack'\r\nimport { connect } from 'react-redux'\r\nimport lodash from 'lodash'\r\n\r\nimport { updateCollection, addFilters, setEditEnabled_CardInfo } from '@/Logic/redux'\r\nimport { getCardPrints, MagicdexApi } from '@/Api'\r\nimport Config from '@/Config'\r\nimport RenderCell from '@/CardRenders'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  tagFilters: state.actions.app.collection.filters.tag || [],\r\n  editEnabled: state.actions.app.collection.cardInfo.editEnabled,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    updateCollection: (cards) => dispatch(updateCollection({ cards })),\r\n    addFilters: (filters) => dispatch(addFilters({ filters })),\r\n    setEditEnabled: (enabled) => dispatch(setEditEnabled_CardInfo({ enabled })),\r\n  }\r\n})\r\n\r\n/** UTILS **/\r\nconst clampInt = (value, min, max) => Math.max(Math.min(value, max), min)\r\n\r\n\r\nconst EditPanel = ({\r\n  /** VARS **/\r\n  card,\r\n  updateHeight: _updateHeight,\r\n  onMenuHover,\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    tagFilters,\r\n    editEnabled,\r\n  } = props\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const smDown = useMediaQuery(theme => theme.breakpoints.down('sm'))\r\n  const updateHeight = () => setTimeout(() => _updateHeight(), 150)\r\n  const [modalOpen, setModalOpen] = useState(false)\r\n\r\n  const [newCard, setNewCard] = useState({})\r\n  const [printsSet, setPrintsSet] = useState([])\r\n  const [printsLang, setPrintsLang] = useState([])\r\n  const [rulings, setRulings] = useState(undefined)\r\n\r\n\r\n  /** FUNCTIONS **/\r\n  const resetNewCard = () => {\r\n    setPrintsSet([])\r\n    setPrintsLang([])\r\n    onMenuHover(null)\r\n    setModalOpen(false)\r\n    dispatch.setEditEnabled(false)\r\n\r\n    setNewCard({\r\n      id: card.id,\r\n      tag: card.tag,\r\n      amount: card.amount,\r\n      foil: card.foil,\r\n      condition: card.condition,\r\n      signed: card.signed,\r\n      altered: card.altered,\r\n      misprint: card.misprint,\r\n      set: card.set,\r\n      collector_number: card.collector_number,\r\n      lang: card.lang,\r\n    })\r\n\r\n    Promise\r\n      .all([\r\n        getCardPrints(card, 'set'),\r\n        getCardPrints(card, 'lang'),\r\n      ])\r\n      .then(([set, lang]) => {\r\n        setPrintsSet(set)\r\n        setPrintsLang(lang)\r\n      })\r\n  }\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    resetNewCard()\r\n\r\n    fetch(card.rulings_uri)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setRulings(lodash\r\n          .chain(data['data'])\r\n          .reverse()\r\n          .map(item => Object.assign(item, { published_at: new Date(item.published_at) }))\r\n          .sortBy('published_at')\r\n          .value()\r\n        )\r\n      })\r\n  }, [card])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleChipClick = (tag) => (e) => {\r\n    if (Array.isArray(tagFilters)) {\r\n      dispatch.addFilters({\r\n        tag: tagFilters.includes(tag)\r\n          ? tagFilters.filter(item => item !== tag)\r\n          : tagFilters.concat(tag)\r\n      })\r\n    }\r\n    else\r\n      dispatch.addFilters({\r\n        tag: [tag]\r\n      })\r\n  }\r\n\r\n  const handleEditButtonClick = (e) => {\r\n    if (editEnabled) {\r\n      // save changes\r\n      let cardClone = Object.assign(\r\n        lodash.cloneDeep(card),\r\n        newCard\r\n      )\r\n\r\n      if (Config.MODIFY_DB_ALLOWED)\r\n        MagicdexApi.updateCards([cardClone])\r\n          .then(res => {\r\n            dispatch.updateCollection(res)\r\n            enqueueSnackbar(`Updated ${card.name} [${card.set.toUpperCase()}]`, { variant: 'info' })\r\n          })\r\n          .catch(error => {\r\n            enqueueSnackbar(`Error updating ${card.name} [${card.set.toUpperCase()}]`, { variant: 'error' })\r\n            console.error({ error })\r\n          })\r\n      else {\r\n        dispatch.updateCollection([{ action: 'UPDATED', card: cardClone }])\r\n        enqueueSnackbar(`Updated ${card.name} [${card.set.toUpperCase()}]`, { variant: 'info' })\r\n      }\r\n    }\r\n\r\n    onMenuHover(null)\r\n    dispatch.setEditEnabled(!editEnabled)\r\n    updateHeight()\r\n  }\r\n\r\n  const handleCancelButtonClick = (e) => {\r\n    resetNewCard()\r\n    onMenuHover(null)\r\n    dispatch.setEditEnabled(false)\r\n    updateHeight()\r\n  }\r\n\r\n  const handleDeleteButtonClick = (confirm) => (e) => {\r\n    if (confirm) {\r\n      const clonedCard = { _id: card._id, amount: 0 }\r\n\r\n      if (Config.MODIFY_DB_ALLOWED)\r\n        MagicdexApi.updateCards([clonedCard])\r\n          .then(res => {\r\n            dispatch.updateCollection(res)\r\n            enqueueSnackbar(`Deleted ${card.name} [${card.set.toUpperCase()}]`, { variant: 'success' })\r\n          })\r\n          .catch(error => {\r\n            enqueueSnackbar(`Failed to delete ${card.name} [${card.set.toUpperCase()}]`, { variant: 'error' })\r\n          })\r\n      else {\r\n        dispatch.updateCollection(clonedCard.map(card => ({ action: 'UPDATED', card })))\r\n        enqueueSnackbar(`Deleted ${card.name} [${card.set.toUpperCase()}]`, { variant: 'success' })\r\n      }\r\n    }\r\n    else\r\n      setModalOpen(true)\r\n  }\r\n\r\n  const handleCardInfoChange = (field, value) => {\r\n    switch (field) {\r\n      case 'amount':\r\n        value = clampInt(value, 1, 999999)\r\n        setNewCard(card => ({ ...card, amount: value }))\r\n        onMenuHover({ ...card, ...newCard, amount: value })\r\n        break\r\n\r\n      case 'foil':\r\n        setNewCard(card => ({ ...card, foil: value }))\r\n        onMenuHover({ ...card, ...newCard, foil: value })\r\n        break\r\n\r\n      case 'condition':\r\n      case 'signed':\r\n      case 'altered':\r\n      case 'misprint':\r\n        setNewCard(card => ({ ...card, [field]: value }))\r\n        break\r\n\r\n      case 'tag':\r\n        value = lodash.chain(value)\r\n          .map(v => v.trim())\r\n          .compact()\r\n          .uniqBy(v => v.toLowerCase())\r\n          .value()\r\n        setNewCard(card => ({ ...card, tag: value }))\r\n        break\r\n\r\n      case 'set':\r\n        const [selectedSet, selectedCollectorNumber] = value.split(':')\r\n        const { foil, ...rest } = printsSet.find(card => card.set === selectedSet && card.collector_number === selectedCollectorNumber)\r\n        setNewCard(card => ({\r\n          ...card,\r\n          ...rest,\r\n        }))\r\n\r\n        // onMenuHover(null)\r\n        setPrintsLang([])\r\n        getCardPrints(rest, 'lang')\r\n          .then(setPrintsLang)\r\n        break\r\n\r\n      case 'lang':\r\n        const { foil: _, ..._rest } = printsLang.find(item => item.lang === value)\r\n        setNewCard(card => ({\r\n          ...card,\r\n          ..._rest,\r\n        }))\r\n        break\r\n\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <>\r\n      <Grid item container xs={12} spacing={1} justifyContent='center' alignItems='center' className={classes.root}>\r\n\r\n        <Grid item container xs={12} spacing={1} direction='row-reverse' justifyContent='flex-start' alignItems='center' className={classes.editButtonContainer}>\r\n          <Grid item>\r\n            <Button size='small' variant='contained' color='primary' onClick={handleEditButtonClick}>\r\n              {editEnabled ? 'Save' : 'Edit'}\r\n            </Button>\r\n          </Grid>\r\n          <Grid item>\r\n            <Zoom in={editEnabled} style={{ transformOrigin: 'center right' }}>\r\n              <Button size='small' variant='outlined' onClick={handleCancelButtonClick}>\r\n                cancel\r\n              </Button>\r\n            </Zoom>\r\n          </Grid>\r\n          <Grid item>\r\n            <Zoom in={editEnabled} style={{ transformOrigin: 'center right' }}>\r\n              <IconButton title='Delete' size='small' onClick={handleDeleteButtonClick(false)}>\r\n                <DeleteIcon />\r\n              </IconButton>\r\n            </Zoom>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        {\r\n          editEnabled\r\n            ? (\r\n              <Grid item container justifyContent='center' alignItems='flex-start' spacing={1}>\r\n                <Grid item container direction='column' justifyContent='center' alignItems='flex-start' style={{ maxWidth: 'min-content' }}>\r\n                  <Grid item>\r\n                    <TextField\r\n                      size='small'\r\n                      variant='outlined'\r\n                      type='number'\r\n                      label='Amount'\r\n                      color='secondary'\r\n                      value={newCard.amount}\r\n                      inputProps={{\r\n                        inputMode: 'numeric',\r\n                        min: 1,\r\n                      }}\r\n                      onChange={e => handleCardInfoChange('amount', e.target.value)}\r\n                      style={{ marginLeft: 0 }}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item style={{ width: '9em', paddingTop: 8 }}>\r\n                    <TextField select\r\n                      color='secondary'\r\n                      variant='outlined'\r\n                      margin='dense'\r\n                      size='small'\r\n                      align='left'\r\n                      label='Condition'\r\n                      value={newCard.condition || ''}\r\n                      onChange={e => handleCardInfoChange('condition', e.target.value)}\r\n                      style={{ marginLeft: 0 }}\r\n                    >\r\n                      {\r\n                        [['NM', 'NM'], ['LP', 'LP'], ['MP', 'MP'], ['HP', 'HP'], ['DAMAGED', 'Damaged']]\r\n                          .map(cond =>\r\n                            <MenuItem key={cond[0]} value={cond[0]}>{cond[1]}</MenuItem>)\r\n                      }\r\n                    </TextField>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <FormControlLabel\r\n                      label='Foil'\r\n                      control={\r\n                        <Checkbox\r\n                          checked={newCard.foil}\r\n                          onChange={e => handleCardInfoChange('foil', e.target.checked)}\r\n                        />\r\n                      }\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <FormControlLabel\r\n                      label='Signed'\r\n                      control={\r\n                        <Checkbox\r\n                          checked={newCard.signed}\r\n                          onChange={e => handleCardInfoChange('signed', e.target.checked)}\r\n                        />\r\n                      }\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <FormControlLabel\r\n                      label='Altered'\r\n                      control={\r\n                        <Checkbox\r\n                          checked={newCard.altered}\r\n                          onChange={e => handleCardInfoChange('altered', e.target.checked)}\r\n                        />\r\n                      }\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <FormControlLabel\r\n                      label='Misprint'\r\n                      control={\r\n                        <Checkbox\r\n                          checked={newCard.misprint}\r\n                          onChange={e => handleCardInfoChange('misprint', e.target.checked)}\r\n                        />\r\n                      }\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item container direction='column' spacing={1} xs={12} sm={10} md>\r\n                  <Grid item container wrap='nowrap' spacing={1}>\r\n                    <Grid item xs style={{ width: '1px' }}>\r\n                      <TextField select\r\n                        color='secondary'\r\n                        variant='outlined'\r\n                        margin='dense'\r\n                        size='small'\r\n                        align='left'\r\n                        disabled={printsSet.length <= 1}\r\n                        label='Set'\r\n                        value={(printsSet || []).length === 0 ? '' : `${newCard.set}:${newCard.collector_number}`}\r\n                        onChange={e => handleCardInfoChange('set', e.target.value)}\r\n                        SelectProps={{\r\n                          onClose: e => onMenuHover({ ...card, ...newCard })\r\n                        }}\r\n                        InputProps={printsSet.length === 0\r\n                          ? {\r\n                            startAdornment: (\r\n                              <InputAdornment position='start'>\r\n                                <CircularProgress size={20} />\r\n                              </InputAdornment>\r\n                            )\r\n                          }\r\n                          : {}\r\n                        }\r\n                      >\r\n                        {\r\n                          (printsSet || [])\r\n                            .map(item =>\r\n                              <MenuItem\r\n                                key={`${item.set}:${item.collector_number}`}\r\n                                value={`${item.set}:${item.collector_number}`}\r\n                                onMouseEnter={e => onMenuHover({ ...item, foil: newCard.foil })}\r\n                                onMouseLeave={e => onMenuHover({ ...card, ...newCard })}\r\n                              >\r\n                                {`${item.set_name} - #${item.collector_number}`}\r\n                              </MenuItem>\r\n                            )\r\n                        }\r\n                      </TextField>\r\n                    </Grid>\r\n\r\n                    <Grid item>\r\n                      <TextField select\r\n                        color='secondary'\r\n                        variant='outlined'\r\n                        margin='dense'\r\n                        size='small'\r\n                        align='left'\r\n                        label='Language'\r\n                        disabled={printsLang.length <= 1}\r\n                        value={(printsLang || []).length === 0 ? '' : newCard.lang}\r\n                        style={{ width: '6em' }}\r\n                        onChange={e => handleCardInfoChange('lang', e.target.value)}\r\n                        SelectProps={{\r\n                          onClose: e => onMenuHover({ ...card, ...newCard })\r\n                        }}\r\n                        InputProps={printsLang.length === 0\r\n                          ? {\r\n                            startAdornment: (\r\n                              <InputAdornment position='start'>\r\n                                <CircularProgress size={20} />\r\n                              </InputAdornment>\r\n                            )\r\n                          }\r\n                          : {}\r\n                        }\r\n                      >\r\n                        {\r\n                          (printsLang || [])\r\n                            .map(item =>\r\n                              <MenuItem\r\n                                key={item.lang}\r\n                                value={item.lang}\r\n                                onMouseEnter={e => onMenuHover({ ...item, foil: newCard.foil })}\r\n                                onMouseLeave={e => onMenuHover({ ...card, ...newCard })}\r\n                              >\r\n                                {item.lang}\r\n                              </MenuItem>\r\n                            )\r\n                        }\r\n                      </TextField>\r\n                    </Grid>\r\n                  </Grid>\r\n\r\n                  <Grid item style={{ marginRight: 11 }}>\r\n                    <Autocomplete multiple freeSolo disableClearable //autoSelect\r\n                      limitTags={4}\r\n                      label='Tags'\r\n                      variant='outlined'\r\n                      margin='dense'\r\n                      size='small'\r\n                      color='secondary'\r\n                      options={[]}\r\n                      value={newCard.tag}\r\n                      onChange={(e, newValue) => { handleCardInfoChange('tag', newValue) }}\r\n                      onInputChange={(e, newInputValue) => {\r\n                        if (newInputValue?.match(/[;,]/g)) {\r\n                          const values = lodash\r\n                            .chain(newInputValue)\r\n                            .split(/[;,]/)\r\n                            .map(v => v.trim())\r\n                            .compact()\r\n                            .uniqBy(v => v.toLowerCase())\r\n                            .value()\r\n                          if (values.length > 0)\r\n                            handleCardInfoChange('tag', newCard.tag.concat(values))\r\n                          else\r\n                            handleCardInfoChange('tag', newCard.tag)\r\n                        }\r\n                      }}\r\n                      renderInput={(props) => (\r\n                        <TextField multiline\r\n                          {...props}\r\n                          color='secondary'\r\n                          variant='outlined'\r\n                          label='Tags'\r\n                          helperText={\r\n                            ['Tags are seperated by ', <code>{'Enter'}</code>, ' or ', <code>{'[;,]'}</code>]\r\n                              .map((item, i) =>\r\n                                <Fragment key={i}>{item}</Fragment>\r\n                              )\r\n                          }\r\n                        />\r\n                      )}\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            )\r\n            : (\r\n              <Grid item container spacing={2}>\r\n                <Grid item xs={4} component='table' style={{ borderSpacing: 8, height: 'fit-content' }}>\r\n                  <tbody>\r\n                    {\r\n                      ['amount', 'condition', '', 'foil', 'signed', 'altered', 'misprint']\r\n                        .map((columnName, i) =>\r\n                          <tr key={i} style={{ verticalAlign: columnName === 'condition' ? 'baseline' : 'middle' }}>\r\n                            {\r\n                              columnName\r\n                                ? <>\r\n                                  <td style={{ width: 0 }}>\r\n                                    <Typography>\r\n                                      {lodash.upperFirst(columnName)}\r\n                                    </Typography>\r\n                                  </td>\r\n                                  <td align='center'>\r\n                                    <RenderCell\r\n                                      card={card}\r\n                                      columnName={columnName}\r\n                                      renderStyle='content'\r\n                                    />\r\n                                  </td>\r\n                                </>\r\n                                : <td colSpan={2}>\r\n                                  <Divider />\r\n                                </td>\r\n                            }\r\n                          </tr>\r\n                        )\r\n                    }\r\n                  </tbody>\r\n                </Grid>\r\n\r\n                <Grid item container xs justifyContent='flex-start' alignItems='flex-start'>\r\n                  <Grid item container xs={12} spacing={1}>\r\n                    <Grid item xs={12} component={Typography} variant='h6' align='left'>\r\n                      <Tooltip arrow\r\n                        placement='right'\r\n                        enterDelay={300}\r\n                        style={{ cursor: 'help' }}\r\n                        title={card.tag.length > 0 ? <>Click a tag to search for <br /> more cards with that tag</> : ''}\r\n                      >\r\n                        <span>Tags</span>\r\n                      </Tooltip>\r\n                    </Grid>\r\n                    <Grid item container spacing={1} style={{ paddingLeft: 16 }} >\r\n                      {\r\n                        card.tag.length > 0\r\n                          ? card.tag.map((tag, i) =>\r\n                            <Grid item key={i}>\r\n                              <Chip\r\n                                label={tag}\r\n                                color={Array.isArray(tagFilters) && tagFilters.includes(tag) ? 'secondary' : 'default'}\r\n                                onClick={handleChipClick(tag)}\r\n                                size='small'\r\n                                variant='outlined'\r\n                              />\r\n                            </Grid>\r\n                          )\r\n                          : <Typography style={{ fontFamily: 'Determination Mono' }}>\r\n                            * But nobody came.\r\n                          </Typography>\r\n                      }\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                {\r\n                  rulings?.length > 0 &&\r\n                  <>\r\n                    <Grid item xs={12}>\r\n                      <Divider />\r\n                    </Grid>\r\n                    <Grid item container style={{ paddingTop: 12 }}>\r\n                      <Accordion\r\n                        className={classes.accordion}\r\n                        classes={{ expanded: classes['accordion-expanded'] }}\r\n                        TransitionProps={{\r\n                          onEntering: updateHeight,\r\n                          onEntered: updateHeight,\r\n                          onExiting: updateHeight,\r\n                          onExited: updateHeight,\r\n                        }}\r\n                      >\r\n                        <AccordionSummary expandIcon={<ExpandMoreIcon />} >\r\n                          <Typography variant='h6'>\r\n                            {smDown ? 'Rulings' : 'Additional Rulings'}\r\n                          </Typography>\r\n                        </AccordionSummary>\r\n                        <AccordionDetails style={{ padding: 0 }}>\r\n                          <ul className={classes.listing}>\r\n                            {\r\n                              rulings.map((rule, i) =>\r\n                                <li key={i}>\r\n                                  <RenderCell\r\n                                    card={{ oracle_text: rule.comment }}\r\n                                    columnName='oracle_text'\r\n                                  />\r\n                                </li>\r\n                              )\r\n                            }\r\n                          </ul>\r\n                        </AccordionDetails>\r\n                      </Accordion>\r\n                    </Grid>\r\n                  </>\r\n                }\r\n              </Grid>\r\n            )\r\n        }\r\n      </Grid>\r\n\r\n      <Grid container spacing={5} justifyContent='center' alignItems='center'\r\n        component={Modal} closeAfterTransition\r\n        onClose={e => setModalOpen(false)}\r\n        open={modalOpen}\r\n        BackdropProps={{ timeout: 500 }}\r\n      >\r\n        <Grid item component={Fade} in={modalOpen}>\r\n          <Paper>\r\n            <Grid container justifyContent='center' alignItems='center' spacing={2}>\r\n              <Grid item xs={12} align='center'>\r\n                <Typography noWrap variant='h5' align='left'>\r\n                  Confirm Action\r\n                </Typography>\r\n                <Typography noWrap variant='body1' align='left'>\r\n                  Are you sure you want to delete this card?\r\n                </Typography>\r\n                <Typography noWrap variant='body2' align='left' color='error'>\r\n                  This action is irreversible.\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item container justifyContent='flex-end' xs={12} spacing={1}>\r\n                <Grid item>\r\n                  <Button variant='outlined' onClick={e => setModalOpen(false)}>\r\n                    Nop\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Button variant='contained' color='secondary' onClick={handleDeleteButtonClick(true)}>\r\n                    Yep\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n\r\n    </>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      EditPanel\r\n    )\r\n  )","\r\nconst useStyles = (theme) => {\r\n  const smDown = theme.breakpoints.down('sm')\r\n\r\n  return {\r\n    baseContainer: {\r\n      position: 'relative',\r\n    },\r\n    root: {\r\n      // width: '100%',\r\n      backgroundColor: theme.palette.background.secondary,\r\n      position: 'relative',\r\n      marginTop: theme.spacing(1),\r\n      padding: `${theme.spacing(5)}px ${theme.spacing(5)}px ${theme.spacing(5)}px ${theme.spacing(4)}px`,\r\n      // display: 'flex',\r\n      // flexWrap: 'wrap',\r\n      // alignItems: 'baseline',\r\n      // flexDirection: 'column',\r\n      // justifyContent: 'center',\r\n      // alignContent: 'center',\r\n    },\r\n    topArrow: {\r\n      content: '\"\"',\r\n      zIndex: 1,\r\n      top: -1,\r\n      width: 0,\r\n      height: 0,\r\n      position: 'absolute',\r\n      backgroundColor: 'unset',\r\n      border: 'solid transparent',\r\n      borderWidth: '1.5rem 1.75rem 0rem 1.75rem',\r\n      left: `calc(50% - (1.75rem / 2))`,\r\n      transition: 'all 0.3s ease',\r\n    },\r\n    image: {\r\n      marginRight: -theme.spacing(1),\r\n      // width: 'fit-content',\r\n    },\r\n    content: {\r\n      transition: 'all 0.3s ease',\r\n      padding: theme.spacing(2),\r\n      marginTop: 0,\r\n      maxWidth: '42.5vw',\r\n      [smDown]: {\r\n        maxWidth: '70vw',\r\n      },\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { useState, useEffect, useRef, useImperativeHandle } from 'react'\r\nimport { IconButton, Grid, Paper, Hidden, Divider, useMediaQuery } from '@material-ui/core'\r\nimport { ChevronRight as ChevronRightIcon, ChevronLeft as ChevronLeftIcon } from '@material-ui/icons'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport { connect } from 'react-redux'\r\nimport SwipeableViews from 'react-swipeable-views'\r\n\r\nimport { setViewIndex_CardInfo } from '@/Logic/redux'\r\nimport { CardImage } from '@/Components'\r\nimport { addCardPrice, addLayoutKeywords } from '@/Providers'\r\nimport FieldsPanel from './FieldsPanel'\r\nimport EditPanel from './EditPanel'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  viewIndex: state.actions.app.collection.cardInfo.viewIndex,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setViewIndex: (index) => dispatch(setViewIndex_CardInfo({ index })),\r\n  }\r\n})\r\n\r\n\r\nconst CardInfo = ({\r\n  /** VARS **/\r\n  refs,\r\n  card,\r\n  rootComponent,\r\n  rootProps,\r\n  topArrowProps,\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    viewIndex,\r\n  } = props\r\n  const swipeableViewsRef = useRef()\r\n  const [menuHoverItem, setMenuHoverItem] = useState()\r\n\r\n  // const xsDown = useMediaQuery(theme => theme.breakpoints.down('xm'))\r\n  const smDown = useMediaQuery(theme => theme.breakpoints.down('sm'))\r\n  const mdDown = useMediaQuery(theme => theme.breakpoints.down('md'))\r\n  // const lgDown = useMediaQuery(theme => theme.breakpoints.down('lg'))\r\n  // const xlDown = useMediaQuery(theme => theme.breakpoints.down('xl'))\r\n\r\n\r\n  /** EFFECTS **/\r\n  useImperativeHandle(refs, () => ({\r\n    updateHeight: swipeableViewsRef.current?.updateHeight || (() => { }),\r\n  }))\r\n\r\n  useEffect(() => {\r\n    //onMount\r\n    dispatch.setViewIndex(0)\r\n  }, [])\r\n\r\n  // useEffect(() => {\r\n  //   // onMount\r\n  //   const params = new URLSearchParams(location.search)\r\n  //   params.set('card_id', card._id)\r\n  //   history.push({\r\n  //     search: params.toString()\r\n  //   })\r\n\r\n  //   // onUnmount\r\n  //   return () => {\r\n  //     const params = new URLSearchParams(location.search)\r\n  //     params.delete('card_id')\r\n  //     history.push({\r\n  //       search: params.toString()\r\n  //     })\r\n  //   }\r\n  // }, [card])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleViewIndexChange = value => e => {\r\n    dispatch.setViewIndex(value)\r\n  }\r\n\r\n  const onMenuHover = (hoverItem) => {\r\n    if (hoverItem) {\r\n      // hoverItem.foil = card.foil\r\n      hoverItem = addCardPrice(hoverItem, card.currency)\r\n      hoverItem = addLayoutKeywords(hoverItem)\r\n      setMenuHoverItem(hoverItem)\r\n    }\r\n    else\r\n      setMenuHoverItem(null)\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <div className={classes.baseContainer}>\r\n      <div\r\n        className={classes.topArrow}\r\n        {...topArrowProps}\r\n      />\r\n\r\n      <Grid container\r\n        justifyContent='center'\r\n        alignItems={smDown ? 'center' : 'flex-start'}\r\n        direction={smDown ? 'column' : 'row'}\r\n        component={rootComponent}\r\n        wrap='nowrap'\r\n        className={classes.root}\r\n        {...rootProps}\r\n      >\r\n\r\n        {/* CARD PREVIEW */}\r\n        <Hidden smDown>\r\n          <Grid item className={classes.image}>\r\n            <CardImage showPrice tiltEnabled transform3dEnabled\r\n              card={menuHoverItem || card}\r\n            />\r\n          </Grid>\r\n        </Hidden>\r\n        <Hidden mdUp>\r\n          <Grid item style={{ marginBottom: 16 }}>\r\n            <CardImage showPrice tiltEnabled transform3dEnabled\r\n              card={menuHoverItem || card}\r\n            />\r\n          </Grid>\r\n        </Hidden>\r\n\r\n        <Grid item xs={12} md={9} lg={8} xl={7}\r\n          align='center'\r\n          component={Paper}\r\n          elevation={3}\r\n          className={classes.content}\r\n        >\r\n          <SwipeableViews ignoreNativeScroll\r\n            ref={swipeableViewsRef}\r\n            animateHeight\r\n            index={viewIndex}\r\n            onChangeIndex={handleViewIndexChange}\r\n            slideStyle={{ overflow: 'hidden' }}\r\n          >\r\n\r\n            {/* VIEW 1 */}\r\n            <Grid container justifyContent='center' alignItems='center' wrap='nowrap' style={{ padding: 1.5 }}>\r\n              <Grid item xs={12}>\r\n                {\r\n                  card.is_transform || card.is_split || card.is_flip\r\n                    ?\r\n                    <Grid item container justifyContent='center' alignItems='stretch' spacing={mdDown ? 0 : 2}>\r\n                      {/* Front Face */}\r\n                      <Grid item container justifyContent='center' xs={12} sm={11} lg>\r\n                        <FieldsPanel\r\n                          card={card}\r\n                          cardFace={0}\r\n                        />\r\n                      </Grid>\r\n\r\n                      <Hidden lgUp>\r\n                        <Grid container wrap='nowrap' alignItems='center' style={{ alignSelf: 'center' }}>\r\n                          <Grid item xs component={Divider} style={{ marginBottom: 8 }} />\r\n                        </Grid>\r\n                      </Hidden>\r\n                      <Hidden mdDown>\r\n                        <Divider flexItem orientation='vertical' />\r\n                      </Hidden>\r\n\r\n                      {/* Back Face */}\r\n                      <Grid item container justifyContent='center' xs={12} sm={11} lg>\r\n                        <FieldsPanel\r\n                          card={card}\r\n                          cardFace={1}\r\n                        />\r\n                      </Grid>\r\n                    </Grid>\r\n\r\n                    : /* Single faced card */\r\n                    <Grid item container justifyContent='center' xs={12} md={10} lg={9} xl={8}>\r\n                      <FieldsPanel\r\n                        card={card}\r\n                      />\r\n                    </Grid>\r\n                }\r\n              </Grid>\r\n\r\n              <Grid item style={{ alignSelf: 'flex-start' }}>\r\n                <IconButton size='small' onClick={handleViewIndexChange(1)}>\r\n                  <ChevronRightIcon />\r\n                </IconButton>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            {/* VIEW 2 */}\r\n            <Grid container justifyContent='center' alignItems='center' wrap='nowrap' style={{ padding: 1.5 }}>\r\n              <Grid item style={{ alignSelf: 'flex-start' }}>\r\n                <IconButton size='small' onClick={handleViewIndexChange(0)}>\r\n                  <ChevronLeftIcon />\r\n                </IconButton>\r\n              </Grid>\r\n\r\n              <Grid item container xs>\r\n                <EditPanel\r\n                  card={card}\r\n                  updateHeight={swipeableViewsRef.current?.updateHeight}\r\n                  onMenuHover={onMenuHover}\r\n                />\r\n              </Grid>\r\n\r\n            </Grid>\r\n\r\n          </SwipeableViews>\r\n        </Grid>\r\n\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      CardInfo\r\n    )\r\n  )\r\n","import grey from \"@material-ui/core/colors/grey\"\r\n\r\n\r\nconst useStyles = (theme) => {\r\n  const floatingBackgroundColor = theme.palette.type === 'dark' ? grey[700] : grey['A100']\r\n\r\n  return {\r\n    root: {\r\n      '& > *': {\r\n        borderBottom: 'unset',\r\n      },\r\n    },\r\n    content: {\r\n      position: 'relative',\r\n    },\r\n    floating: {\r\n      zIndex: 2,\r\n      position: 'absolute',\r\n      top: theme.spacing(1),\r\n      left: theme.spacing(9),\r\n      maxWidth: theme.spacing(25),\r\n      width: 'max-content',\r\n      padding: `${theme.spacing(0.5)}px ${theme.spacing(1.25)}px ${theme.spacing(0.5)}px ${theme.spacing(1.25)}px`,\r\n      backgroundColor: floatingBackgroundColor,\r\n      color: theme.palette.getContrastText(floatingBackgroundColor),\r\n    },\r\n    checkboxCell: {\r\n      // borderLeft: `1px solid ${theme.palette.divider}`,\r\n      // paddingRight: 0,\r\n    },\r\n    checkbox: {\r\n      padding: '5px 0 5px 8px',\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { Fragment, useState, useEffect, useRef } from 'react'\r\nimport { Hidden, TableRow, TableCell, Collapse, IconButton, Checkbox, Paper } from '@material-ui/core'\r\nimport { withStyles, useTheme } from '@material-ui/styles'\r\nimport { connect } from 'react-redux'\r\nimport upperFirst from 'lodash/upperFirst'\r\nimport clsx from 'clsx'\r\nimport {\r\n  KeyboardArrowDown as KeyboardArrowDownIcon,\r\n  KeyboardArrowUp as KeyboardArrowUpIcon\r\n} from '@material-ui/icons'\r\n\r\nimport { addSelectedCardIds, removeSelectedCardIds, setCurrentOpenCardId } from '@/Logic/redux'\r\nimport RenderCell from '@/CardRenders'\r\nimport { CardInfo, ContextMenu } from '@/Components/Collection/Views'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  selectedCardIds: state.actions.app.collection.selectedCardIds,\r\n  cardsSelectableEnabled: state.actions.app.collection.cardsSelectableEnabled,\r\n  currentOpenCardId: state.actions.app.collection.currentOpenCardId,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    addSelectedCardId: (id) => dispatch(addSelectedCardIds({ id })),\r\n    removeSelectedCardId: (id) => dispatch(removeSelectedCardIds({ id })),\r\n    setCurrentOpenCardId: (id) => dispatch(setCurrentOpenCardId({ id })),\r\n  }\r\n})\r\n\r\n\r\nconst CardRow = ({\r\n  /** VARS **/\r\n  columns,\r\n  key,\r\n  card,\r\n  onMouseEnter,\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    cardsSelectableEnabled: selectable,\r\n    selectedCardIds,\r\n    currentOpenCardId,\r\n  } = props\r\n  const theme = useTheme()\r\n  const setRef = useRef()\r\n  const cardInfoRef = useRef()\r\n  const checkboxRef = useRef()\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [showContent, setShowContent] = useState(false)\r\n  const [contextMenuState, setContextMenuState] = useState({ clearSelectedCardsOnExit: false })\r\n\r\n  const [isMouseOver, setIsMouseOver] = useState(false)\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    setIsOpen(currentOpenCardId === card._id)\r\n  }, [currentOpenCardId])\r\n\r\n  useEffect(() => {\r\n    if (contextMenuState.mouseY && contextMenuState.mouseX) {\r\n      //opening\r\n      if (selectedCardIds.length === 0) {\r\n        dispatch.addSelectedCardId(card._id)\r\n        setContextMenuState(state => ({\r\n          ...state,\r\n          clearSelectedCardsOnExit: true,\r\n        }))\r\n      }\r\n    }\r\n    else {\r\n      //closing\r\n      if (contextMenuState.clearSelectedCardsOnExit) {\r\n        dispatch.removeSelectedCardId(card._id)\r\n        setContextMenuState({\r\n          clearSelectedCardsOnExit: false,\r\n        })\r\n      }\r\n    }\r\n  }, [contextMenuState.mouseY, contextMenuState.mouseX])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleSelectChange = (e) => {\r\n    e.target.checked\r\n      ? dispatch.addSelectedCardId(card._id)\r\n      : dispatch.removeSelectedCardId(card._id)\r\n  }\r\n\r\n  const handleCheckboxCellClick = (e) => {\r\n    e.stopPropagation()\r\n\r\n    !checkboxRef.current.checked\r\n      ? dispatch.addSelectedCardId(card._id)\r\n      : dispatch.removeSelectedCardId(card._id)\r\n  }\r\n\r\n  const handleMiddleMouseClick = (e) => {\r\n    e.preventDefault()\r\n    if (e.button === 1) // middle mouse click\r\n      selectedCardIds.includes(card._id)\r\n        ? dispatch.removeSelectedCardId(card._id)\r\n        : dispatch.addSelectedCardId(card._id)\r\n  }\r\n\r\n  const handleContextMenu = (e) => {\r\n    e.preventDefault()\r\n    setContextMenuState(state => ({\r\n      ...state,\r\n      mouseX: e.clientX,\r\n      mouseY: e.clientY,\r\n    }))\r\n  }\r\n\r\n  const handleIsOpenToggle = () => {\r\n    if (!isOpen)\r\n      dispatch.setCurrentOpenCardId(card._id)\r\n    else\r\n      dispatch.setCurrentOpenCardId(null)\r\n  }\r\n\r\n  const collapseUpdate = (showContent) => (isAppearing) => {\r\n    if (showContent != null)\r\n      setShowContent(showContent)\r\n    cardInfoRef.current?.updateHeight()\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Fragment key={key}>\r\n      <ContextMenu\r\n        setState={setContextMenuState}\r\n        {...contextMenuState}\r\n      />\r\n\r\n      <TableRow\r\n        className={clsx(classes.root, 'cursor-pointer')}\r\n        onClick={handleIsOpenToggle}\r\n        onMouseEnter={onMouseEnter}\r\n        onContextMenu={handleContextMenu}\r\n        onMouseDown={handleMiddleMouseClick}\r\n        style={{\r\n          backgroundColor: (\r\n            selectedCardIds.includes(card._id)\r\n              ? theme.palette.action.selected\r\n              : 'unset'\r\n          ),\r\n        }}\r\n      >\r\n        {\r\n          Object\r\n            .entries(columns)\r\n            .map(\r\n              ([columnName, columnDisplayName], i) => (\r\n                <TableCell\r\n                  key={i}\r\n                  align='center'\r\n                  className={classes.content}\r\n                  {...( /* renderSet() setup */\r\n                    columnName === 'set'\r\n                      ? {\r\n                        ref: setRef,\r\n                        onMouseEnter: e => setIsMouseOver(true),\r\n                        onMouseLeave: e => setIsMouseOver(false),\r\n                      }\r\n                      : {}\r\n                  )} /* renderSet() setup */\r\n                >\r\n                  <RenderCell\r\n                    card={card}\r\n                    columnName={columnName}\r\n                  />\r\n                  {\r\n                    columnName === 'set' && isMouseOver && (\r\n                      <Paper elevation={5} className={classes.floating} onMouseEnter={e => setIsMouseOver(false)}>\r\n                        {[card.set_name, upperFirst(card.rarity), '#' + card.collector_number].join(' - ')}\r\n                      </Paper>\r\n                    )\r\n                  }\r\n                </TableCell>\r\n              )\r\n            )\r\n        }\r\n\r\n        {/* CHECKBOX / DROPDOWN-ARROW */}\r\n        {\r\n          selectable\r\n            ?\r\n            <TableCell onClick={handleCheckboxCellClick} className={classes.checkboxCell}>\r\n              <Checkbox\r\n                size='small'\r\n                checked={selectedCardIds.includes(card._id)}\r\n                onChange={handleSelectChange}\r\n                className={classes.checkbox}\r\n                inputProps={{\r\n                  ref: checkboxRef,\r\n                }}\r\n              />\r\n            </TableCell>\r\n            :\r\n            <Hidden smDown>\r\n              <TableCell>\r\n                <IconButton size='small' onClick={handleIsOpenToggle}>\r\n                  {\r\n                    isOpen\r\n                      ? <KeyboardArrowUpIcon />\r\n                      : <KeyboardArrowDownIcon />\r\n                  }\r\n                </IconButton>\r\n              </TableCell>\r\n            </Hidden>\r\n        }\r\n      </TableRow>\r\n\r\n      <TableRow onMouseEnter={onMouseEnter} className={classes.row} style={{ display: showContent ? 'table-row' : 'none' }}>\r\n        <TableCell colSpan={10} style={{ padding: 0 }}>\r\n          <Collapse mountOnEnter unmountOnExit\r\n            timeout='auto'\r\n            in={isOpen}\r\n            onEnter={collapseUpdate(true)}\r\n            onExited={collapseUpdate(false)}\r\n            onEntering={collapseUpdate()}\r\n          >\r\n            <CardInfo\r\n              card={card}\r\n              refs={cardInfoRef}\r\n              topArrowProps={{\r\n                style: {\r\n                  borderTopColor: theme.palette.background.paper,\r\n                },\r\n              }}\r\n            />\r\n          </Collapse>\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      CardRow\r\n    )\r\n  )","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    root: {\r\n      paddingBottom: theme.spacing(1),\r\n    },\r\n    'card-image': {\r\n      zIndex: 1,\r\n      position: 'sticky',\r\n      top: theme.spacing(8),\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    tableContainer: {\r\n      maxWidth: '90vw',\r\n      // overflow: 'visible',\r\n    },\r\n    tableFooter: {\r\n      borderTop: `1px solid ${theme.palette.divider}`,\r\n    }\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Grid, Tooltip, Checkbox, IconButton, Paper, Hidden, Table, TableContainer, TableRow, TableHead, TableBody, TableFooter, TableCell, TableSortLabel, TablePagination } from '@material-ui/core'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport {\r\n  ChevronRight as ChevronRightIcon,\r\n  ChevronLeft as ChevronLeftIcon,\r\n  FirstPage as FirstPageIcon,\r\n  LastPage as LastPageIcon,\r\n} from '@material-ui/icons'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\n\r\nimport { setSelectedCardIds, setPageNumber, setPerPage } from '@/Logic/redux'\r\nimport { CardImage } from '@/Components'\r\nimport CardRow from './CardRow'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  columns: state.actions.app.collection.tableView.columns,\r\n  cardsSelectableEnabled: state.actions.app.collection.cardsSelectableEnabled,\r\n  selectedCardIds: state.actions.app.collection.selectedCardIds,\r\n  pageNumber: state.actions.app.collection.pageNumber,\r\n  perPage: state.actions.app.collection.perPage,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setSelectedCardIds: (selectedCardIds) => dispatch(setSelectedCardIds({ selectedCardIds })),\r\n    setPageNumber: (pageNumber) => dispatch(setPageNumber({ pageNumber })),\r\n    setPerPage: (perPage) => dispatch(setPerPage({ perPage })),\r\n  }\r\n})\r\n\r\n\r\nconst CardTableView = ({\r\n  /** VARS **/\r\n  data,\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    columns,\r\n    pageNumber,\r\n    perPage,\r\n    cardsSelectableEnabled,\r\n    selectedCardIds,\r\n  } = props\r\n  const [currentHoveringCard, setCurrentHoveringCard] = useState()\r\n  const [sortBy, setSortByCol] = useState()\r\n  const [sortOrder, setSortOrder] = useState('desc')\r\n  const [sortedData, setSortedData] = useState(data)\r\n  const [paginatedData, setPaginatedData] = useState(data)\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    setPaginatedData(() =>\r\n      perPage === -1\r\n        ? sortedData // show all\r\n        : sortedData.slice(\r\n          pageNumber * perPage,\r\n          pageNumber * perPage + perPage\r\n        )\r\n    )\r\n  }, [sortedData, pageNumber, perPage])\r\n\r\n  useEffect(() => {\r\n    let _sortBy //= sortBy === 'mana_cost' ? 'cmc' : sortBy\r\n    switch (sortBy) {\r\n      case 'mana_cost':\r\n      case 'mana_value':\r\n        _sortBy = ['cmc']\r\n        break\r\n\r\n      case 'total_price':\r\n      case 'prices':\r\n      case 'price':\r\n        _sortBy = ['price']\r\n        break\r\n\r\n      case 'type':\r\n      case 'type_line':\r\n        _sortBy = [(card) => card.type_line.replace('Legendary ', '')]\r\n        break\r\n\r\n      case 'set':\r\n      case 'rarity':\r\n        _sortBy = [\r\n          (card) => {\r\n            return card.set_data.parent_set_code ?? card.set\r\n          },\r\n          (card) => {\r\n            switch (card.rarity) {\r\n              default:\r\n                return 4\r\n              case 'common':\r\n                return 3\r\n              case 'uncommon':\r\n                return 2\r\n              case 'rare':\r\n                return 1\r\n              case 'mythic':\r\n                return 0\r\n            }\r\n          }\r\n        ]\r\n        break\r\n\r\n      default:\r\n        _sortBy = [sortBy]\r\n        break\r\n\r\n      /* if `sortBy` is not specified, then sort by `date_created` */\r\n      case null:\r\n      case undefined:\r\n      case '':\r\n        _sortBy = [(card) => new Date(card.date_created)]\r\n        break\r\n    }\r\n\r\n    setSortedData(\r\n      _.orderBy(data, [..._sortBy, 'name', 'collector_number'], sortOrder)\r\n    )\r\n    dispatch.setPageNumber(0)\r\n  }, [data, sortOrder, sortBy])\r\n\r\n  useEffect(() => {\r\n    setCurrentHoveringCard(null)\r\n  }, [sortedData, paginatedData])\r\n\r\n  useEffect(() => {\r\n    dispatch.setSelectedCardIds([])\r\n  }, [data])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleRowHover = (card, i) => {\r\n    setCurrentHoveringCard(card)\r\n  }\r\n\r\n  const handleHeaderClick = (event, colName) => {\r\n    if (colName === sortBy) {\r\n      switch (sortOrder) {\r\n        case 'desc': //second click\r\n          setSortOrder('asc')\r\n          break\r\n\r\n        case 'asc': //third click, reset sorting\r\n        default:\r\n          setSortByCol('')\r\n          setSortOrder('desc')\r\n          break\r\n      }\r\n    }\r\n    else {\r\n      // first click\r\n      setSortByCol(colName)\r\n      setSortOrder('desc')\r\n    }\r\n  }\r\n\r\n  const handleSelectAllChange = (e) => {\r\n    e.target.checked\r\n      ? dispatch.setSelectedCardIds(data.map(card => card._id))\r\n      : dispatch.setSelectedCardIds([])\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid item container spacing={1} xs={11} className={classes.root}>\r\n      <Grid item container wrap='nowrap' justifyContent='center'>\r\n\r\n        {/** CARD PREVIEW **/}\r\n        <Hidden mdDown>\r\n          <Grid item>\r\n            <div className={classes['card-image']}>\r\n              <CardImage tiltEnabled transform3dEnabled\r\n                card={currentHoveringCard}\r\n              />\r\n            </div>\r\n          </Grid>\r\n        </Hidden>\r\n\r\n        {/** TABLE VIEW **/}\r\n        <Grid item md>\r\n          <TableContainer component={Paper} className={classes.tableContainer} elevation={5}>\r\n            <Table size=\"small\">\r\n              <TableHead className={classes.tableHead}>\r\n                <TableRow>\r\n                  {\r\n                    Object\r\n                      .entries(columns)\r\n                      .map(([columnName, columnDisplayName]) => (\r\n                        <TableCell\r\n                          style={{ paddingLeft: '16px' }}\r\n                          key={columnName}\r\n                          align=\"center\"\r\n                          sortDirection={sortBy === columnName ? sortOrder : false}\r\n                        >\r\n                          <TableSortLabel\r\n                            style={{ whiteSpace: 'nowrap' }}\r\n                            active={sortBy === columnName}\r\n                            direction={sortBy === columnName ? sortOrder : 'asc'}\r\n                            onClick={e => handleHeaderClick(e, columnName)}\r\n                          >\r\n                            {columnDisplayName}\r\n                          </TableSortLabel>\r\n                        </TableCell>\r\n                      ))\r\n                  }\r\n\r\n                  {/** Checkbox / DropdownIcon **/}\r\n                  {\r\n                    cardsSelectableEnabled\r\n                      ?\r\n                      // <TableCell className={classes.iconCell} />\r\n                      <TableCell onClick={e => e.stopPropagation()} className={classes.checkbox}>\r\n                        <Tooltip arrow placement='top' title={selectedCardIds.length >= data.length ? 'Clear Selection' : 'Select All'}>\r\n                          <Checkbox\r\n                            size='small'\r\n                            checked={selectedCardIds.length >= data.length}\r\n                            indeterminate={selectedCardIds.length > 0 && selectedCardIds.length < data.length}\r\n                            onChange={handleSelectAllChange}\r\n                          />\r\n                        </Tooltip>\r\n                      </TableCell>\r\n                      :\r\n                      <Hidden smDown>\r\n                        <TableCell className={classes.iconCell} />\r\n                      </Hidden>\r\n                  }\r\n\r\n                </TableRow>\r\n              </TableHead>\r\n\r\n              <TableBody>\r\n                {paginatedData instanceof Array && paginatedData.map(card => (\r\n                  <CardRow\r\n                    onMouseEnter={e => handleRowHover(card)}\r\n                    key={card._id}\r\n                    columns={columns}\r\n                    card={card}\r\n                  />\r\n                ))}\r\n              </TableBody>\r\n\r\n              <TableFooter className={classes.tableFooter}>\r\n                <TableRow>\r\n                  <TablePagination\r\n                    rowsPerPageOptions={[10, 25, 50, 100, { label: 'All', value: -1 }]}\r\n                    labelRowsPerPage='Cards per page:'\r\n                    colSpan={9}\r\n                    count={data.length}\r\n                    rowsPerPage={perPage}\r\n                    page={pageNumber}\r\n                    // labelDisplayedRows={({ from, to, count }) => `${from}-${to === -1 ? count : to} of ${count}`}\r\n                    labelDisplayedRows={({ from, to, count }) => `${from}-${to !== -1 ? to : count} of ${count !== -1 ? count : `more than ${to}`}`}\r\n                    onPageChange={(e, v) => dispatch.setPageNumber(v)}\r\n                    onRowsPerPageChange={(e) => dispatch.setPerPage(parseInt(e.target.value))}\r\n                    SelectProps={{\r\n                      native: true,\r\n                    }}\r\n                    ActionsComponent={({ count, page, rowsPerPage, onPageChange }) => (\r\n                      <>\r\n                        <IconButton\r\n                          size='small'\r\n                          onClick={e => onPageChange(e, 0)}\r\n                          disabled={page === 0}\r\n                          aria-label=\"first page\"\r\n                        >\r\n                          <FirstPageIcon />\r\n                        </IconButton>\r\n                        <IconButton\r\n                          size='small'\r\n                          onClick={e => onPageChange(e, page - 1)}\r\n                          disabled={page === 0}\r\n                          aria-label=\"previous page\"\r\n                        >\r\n                          <ChevronLeftIcon />\r\n                        </IconButton>\r\n                        <IconButton\r\n                          size='small'\r\n                          onClick={e => onPageChange(e, page + 1)}\r\n                          disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n                          aria-label=\"next page\"\r\n                        >\r\n                          <ChevronRightIcon />\r\n                        </IconButton>\r\n                        <IconButton\r\n                          size='small'\r\n                          onClick={e => onPageChange(e, Math.max(0, Math.ceil(count / rowsPerPage) - 1))}\r\n                          disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n                          aria-label=\"last page\"\r\n                        >\r\n                          <LastPageIcon />\r\n                        </IconButton>\r\n                      </>\r\n                    )}\r\n                  />\r\n                </TableRow>\r\n              </TableFooter>\r\n            </Table>\r\n          </TableContainer>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid >\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      CardTableView\r\n    )\r\n  )","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    root: {},\r\n    topArrow: {\r\n      borderTopColor: theme.palette.background.default\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { Fragment, useEffect, useState, useRef, createRef } from 'react'\r\nimport { Portal, MenuItem, ListItemText, Paper, Grid, Collapse } from '@material-ui/core'\r\nimport { withStyles, useTheme } from '@material-ui/styles'\r\nimport { connect } from 'react-redux'\r\n// import scrollIntoView from 'scroll-into-view-if-needed'\r\nimport useSize from '@react-hook/size'\r\nimport _ from 'lodash'\r\n\r\nimport {\r\n  addSelectedCardIds, removeSelectedCardIds, setViewIndex_CardInfo,\r\n  toggleTiltEnabled_GridView, toggleTransform3dEnabled_GridView\r\n} from '@/Logic/redux'\r\nimport { CardImage } from '@/Components'\r\nimport { CardInfo, ContextMenu } from '@/Components/Collection/Views'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  selectedCardIds: state.actions.app.collection.selectedCardIds,\r\n  tiltEnabled: state.actions.app.collection.gridView.tiltEnabled,\r\n  transform3dEnabled: state.actions.app.collection.gridView.transform3dEnabled,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    toggleTiltEnabled: () => dispatch(toggleTiltEnabled_GridView()),\r\n    toggleTransform3dEnabled: () => dispatch(toggleTransform3dEnabled_GridView()),\r\n    addSelectedCardId: (id) => dispatch(addSelectedCardIds({ id })),\r\n    removeSelectedCardId: (id) => dispatch(removeSelectedCardIds({ id })),\r\n    setViewIndex: (index) => dispatch(setViewIndex_CardInfo({ index })),\r\n  }\r\n})\r\n\r\n\r\nconst CardGridView = ({\r\n  /** VARS **/\r\n  data,\r\n  menuItemRef,\r\n  cardWidth = 209,\r\n  ...props\r\n}) => {\r\n  const {\r\n    // classes,\r\n    dispatch,\r\n    tiltEnabled,\r\n    transform3dEnabled,\r\n    selectedCardIds,\r\n  } = props\r\n  const theme = useTheme()\r\n\r\n  const containerRef = useRef()\r\n  const [refs, setRefs] = useState([])\r\n  const [containerWidth,] = useSize(containerRef)\r\n  const [cardsPerRow, setCardsPerRow] = useState()\r\n\r\n  const [contextMenuState, setContextMenuState] = useState({ clearSelectedCardsOnExit: false })\r\n  const [selectedCard, setSelectedCard] = useState({})\r\n  const [sortedData, setSortedData] = useState([])\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    setSortedData(\r\n      _.sortBy(data, card => card.type_line.replace('Legendary', ''))\r\n    )\r\n\r\n    setSelectedCard(selectedCard => {\r\n      const newCard = data.find(card => card._id === selectedCard?.data?._id)\r\n\r\n      return newCard\r\n        ? {\r\n          ...selectedCard,\r\n          data: newCard,\r\n        }\r\n        : {\r\n          data: undefined,\r\n          targetCollapse: undefined,\r\n          box: undefined,\r\n        }\r\n    })\r\n  }, [data])\r\n\r\n  useEffect(() => {\r\n    let n = Math.floor(containerWidth / (cardWidth + 16))\r\n    n = n > 0 ? n : 1\r\n    setCardsPerRow(n)\r\n\r\n    setRefs(\r\n      _.times(\r\n        Math.floor(data.length / n) + 1,\r\n        () => ({\r\n          collapse: createRef(),\r\n          cardInfo: createRef()\r\n        })\r\n      )\r\n    )\r\n  }, [containerWidth, cardWidth, data])\r\n\r\n  useEffect(() => {\r\n    if (contextMenuState.mouseY && contextMenuState.mouseX) {\r\n      //opening\r\n      if (selectedCardIds.length === 0) {\r\n        dispatch.addSelectedCardId(contextMenuState.card._id)\r\n        setContextMenuState(state => ({\r\n          ...state,\r\n          clearSelectedCardsOnExit: true,\r\n        }))\r\n      }\r\n    }\r\n    else {\r\n      //closing\r\n      if (contextMenuState.clearSelectedCardsOnExit) {\r\n        dispatch.removeSelectedCardId(contextMenuState.card._id)\r\n        setContextMenuState({\r\n          clearSelectedCardsOnExit: false,\r\n        })\r\n      }\r\n    }\r\n  }, [contextMenuState.mouseY, contextMenuState.mouseX])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleCardClick = ({ card, key }) => (e) => {\r\n    const { data: selectedCardData, targetCollapse } = selectedCard\r\n    const targetCollapseIdx = Math.floor(key / cardsPerRow) || 0\r\n\r\n    if (targetCollapse !== undefined && selectedCardData?._id === card._id) {\r\n      // a collapse is open & the same card is clicked ->\r\n      //                                               -> close the collapse\r\n      setSelectedCard({\r\n        ...selectedCard,\r\n        targetCollapse: undefined,\r\n        box: e.target.getBoundingClientRect(),\r\n      })\r\n    }\r\n    else {\r\n      // a new card is clicked, open the collapse\r\n      setSelectedCard({\r\n        data: card,\r\n        targetCollapse: targetCollapseIdx,\r\n        box: e.target.getBoundingClientRect(),\r\n      })\r\n\r\n      setTimeout(() => {\r\n        dispatch.setViewIndex(0)\r\n        refs[targetCollapseIdx]?.cardInfo?.current?.updateHeight()\r\n      }, 10)\r\n    }\r\n  }\r\n\r\n  const handleMiddleMouseClick = (card) => (e) => {\r\n    e.preventDefault()\r\n    if (e.button === 1) // middle mouse click\r\n      selectedCardIds.includes(card._id)\r\n        ? dispatch.removeSelectedCardId(card._id)\r\n        : dispatch.addSelectedCardId(card._id)\r\n  }\r\n\r\n  const handleContextMenu = ({ card, key }) => (e) => {\r\n    e.preventDefault()\r\n    e.persist()\r\n    setContextMenuState(state => ({\r\n      ...state,\r\n      mouseX: e.clientX,\r\n      mouseY: e.clientY,\r\n      card,\r\n      onEditClick: () => handleCardClick({ card, key })(e),\r\n    }))\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <>\r\n      <ContextMenu\r\n        setState={setContextMenuState}\r\n        {...contextMenuState}\r\n      />\r\n\r\n      {\r\n        <Portal container={menuItemRef.current}>\r\n          <MenuItem onClick={dispatch.toggleTiltEnabled}>\r\n            <ListItemText\r\n              primary='Card Tilt'\r\n              secondary={tiltEnabled ? 'Enabled' : 'Disabled'}\r\n            />\r\n          </MenuItem>\r\n          <MenuItem onClick={dispatch.toggleTransform3dEnabled}>\r\n            <ListItemText\r\n              primary='3D Transform'\r\n              secondary={transform3dEnabled ? 'Enabled' : 'Disabled'}\r\n            />\r\n          </MenuItem>\r\n        </Portal>\r\n      }\r\n\r\n      <Grid item container ref={containerRef} xs={12} lg={10} spacing={2} justifyContent='center'>\r\n        {\r\n          sortedData && sortedData.map((card, i) => {\r\n            const targetCollapseIdx = Math.floor(i / cardsPerRow)\r\n\r\n            return (\r\n              <Fragment key={i}>\r\n                {\r\n                  card &&\r\n                  <Grid item xs='auto'>\r\n                    <CardImage packTransformButton showCheckbox\r\n                      transform3dEnabled={transform3dEnabled}\r\n                      tiltEnabled={tiltEnabled}\r\n                      card={card}\r\n                      width={cardWidth}\r\n                      height={cardWidth * 1.4}\r\n                      tiltProps={{\r\n                        tiltMaxAngleX: 12.5,\r\n                        tiltMaxAngleY: 12.5,\r\n                      }}\r\n                      imageProps={{\r\n                        width: cardWidth,\r\n                        height: cardWidth * 1.4,\r\n                      }}\r\n                      rootProps={{\r\n                        className: 'cursor-pointer',\r\n                        onClick: handleCardClick({ card, key: i }),\r\n                        // onClick: (e) => {console.log(e)},\r\n                        onContextMenu: handleContextMenu({ card, key: i }),\r\n                        onMouseDown: handleMiddleMouseClick(card),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                }\r\n                {\r\n                  (((i + 1) % cardsPerRow === 0) || (i === sortedData.length - 1)) &&\r\n                  <Grid item xs={12}>\r\n                    <Collapse mountOnEnter unmountOnExit\r\n                      ref={refs[targetCollapseIdx]?.collapse}\r\n                      timeout=\"auto\"\r\n                      in={targetCollapseIdx === selectedCard.targetCollapse}\r\n                    // onEntering={() => scrollIntoView(refs[targetCollapseIdx]?.collapse?.current, { scrollMode: 'if-needed', behavior: 'smooth', block: 'start' })}\r\n                    // onEntered={() => scrollIntoView(refs[targetCollapseIdx]?.collapse?.current, { scrollMode: 'if-needed', behavior: 'smooth', block: 'end' })}\r\n                    >\r\n                      {\r\n                        selectedCard?.data &&\r\n                        <CardInfo\r\n                          refs={refs[targetCollapseIdx]?.cardInfo}\r\n                          card={selectedCard.data}\r\n                          rootComponent={Paper}\r\n                          rootProps={{\r\n                            elevation: 1,\r\n                          }}\r\n                          topArrowProps={{\r\n                            style: {\r\n                              borderTopColor: theme.palette.background.default,\r\n                              left: `calc(${selectedCard?.box?.left + (selectedCard?.box?.width * 0.5) - containerRef?.current?.offsetLeft}px - 2.25rem)`,\r\n                            },\r\n                          }}\r\n                        />\r\n                      }\r\n                    </Collapse>\r\n                  </Grid>\r\n                }\r\n              </Fragment>\r\n            )\r\n          })\r\n        }\r\n      </Grid>\r\n    </>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      CardGridView\r\n    )\r\n  )","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    root: {},\r\n    modal: {\r\n      maxWidth: '90vw',\r\n    }\r\n  }\r\n}\r\n\r\nexport default useStyles","import { Fragment, useState } from 'react'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport { Menu, TextField, MenuItem, ListItemIcon, Grid, Button, Modal, Typography, Paper, Fade } from '@material-ui/core'\r\nimport { Autocomplete } from '@material-ui/lab'\r\nimport {\r\n  Edit as EditIcon,\r\n  LocalOffer as TagIcon,\r\n  Delete as DeleteIcon,\r\n} from '@material-ui/icons'\r\nimport { useSnackbar } from 'notistack'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport clsx from 'clsx'\r\n\r\nimport {\r\n  updateCollection, addSelectedCardIds, setSelectedCardIds,\r\n  setCurrentOpenCardId, setViewIndex_CardInfo, setEditEnabled_CardInfo\r\n} from '@/Logic/redux'\r\nimport { MagicdexApi } from '@/Api'\r\nimport Config from '@/Config'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  collection: state.actions.activeUser.collection,\r\n  selectedCardIds: state.actions.app.collection.selectedCardIds,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    updateCollection: (cards) => dispatch(updateCollection({ cards })),\r\n    addSelectedCardId: (id) => dispatch(addSelectedCardIds({ id })),\r\n    setSelectedCardIds: (ids) => dispatch(setSelectedCardIds({ selectedCardIds: ids })),\r\n    setCurrentOpenCardId: (id) => dispatch(setCurrentOpenCardId({ id })),\r\n    setViewIndex: (index) => dispatch(setViewIndex_CardInfo({ index })),\r\n    setEditEnabled: (enabled) => dispatch(setEditEnabled_CardInfo({ enabled })),\r\n  }\r\n})\r\n\r\n\r\nconst ContextMenu = ({\r\n  /** VARS **/\r\n  mouseY,\r\n  mouseX,\r\n  setState,\r\n  clearSelectedCards,\r\n  card,\r\n  onEditClick,\r\n  clearSelectedCardsOnExit = false,\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    selectedCardIds,\r\n    collection,\r\n    ...rest\r\n  } = props\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const [modalOpen, setModalOpen] = useState(false)\r\n  const [tagArray, setTagArray] = useState([])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const closeMenu = () => {\r\n    setState(state => ({\r\n      ...state,\r\n      mouseY: null,\r\n      mouseX: null\r\n    }))\r\n    setModalOpen(false)\r\n  }\r\n\r\n  const handleTagChange = (value) => {\r\n    setTagArray(state => (\r\n      _.chain(value)\r\n        .map(v => v.trim())\r\n        .compact()\r\n        .uniqBy(v => v.toLowerCase())\r\n        .value()\r\n    ))\r\n  }\r\n\r\n  const handleKeyDown = (id) => (e) => {\r\n    switch (id) {\r\n      case 'tag':\r\n        if (e.key === 'Enter' && e.target.value === '')\r\n          handleMenuItemClick('tag', true)()\r\n        break\r\n\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  const handleMenuItemClick = (id, confirmAction = false) => (e) => {\r\n    switch (id) {\r\n      case 'edit':\r\n        onEditClick && onEditClick()\r\n        dispatch.setCurrentOpenCardId(selectedCardIds[0])\r\n        setTimeout(() => {\r\n          dispatch.setEditEnabled(true)\r\n          dispatch.setViewIndex(1)\r\n        }, 300)\r\n        closeMenu()\r\n        break\r\n\r\n      case 'delete':\r\n        if (confirmAction) {\r\n          const len = selectedCardIds.length\r\n          if (len > 0) {\r\n            const clonedArr = selectedCardIds.map(_id => ({\r\n              _id,\r\n              amount: 0,\r\n            }))\r\n\r\n            if (Config.MODIFY_DB_ALLOWED)\r\n              MagicdexApi.updateCards(clonedArr)\r\n                .then(res => {\r\n                  dispatch.updateCollection(res)\r\n                  const actions = _.countBy(res, 'action')\r\n                  actions['DELETED'] && enqueueSnackbar(`Deleted ${actions['DELETED']} card entries`, { variant: 'success' })\r\n                })\r\n                .catch(error => {\r\n                  enqueueSnackbar(`Failed to delete ${len} card entries`, { variant: 'error' })\r\n                })\r\n            else {\r\n              dispatch.updateCollection(clonedArr.map(card => ({ action: 'UPDATED', card })))\r\n              enqueueSnackbar(`Deleted ${len} card entries`, { variant: 'success' })\r\n            }\r\n          }\r\n          closeMenu()\r\n        }\r\n        else\r\n          setModalOpen('delete')\r\n        break\r\n\r\n      case 'tag':\r\n        if (confirmAction) {\r\n          const len = selectedCardIds.length\r\n          if (len > 0) {\r\n            const clonedArr = selectedCardIds.map(_id => ({\r\n              _id,\r\n              tag: tagArray,\r\n            }))\r\n\r\n            if (Config.MODIFY_DB_ALLOWED)\r\n              MagicdexApi.updateCards(clonedArr)\r\n                .then(res => {\r\n                  dispatch.updateCollection(res)\r\n                  const actions = _.countBy(res, 'action')\r\n                  actions['DELETED'] && enqueueSnackbar(`Deleted ${actions['DELETED']} card entries`, { variant: 'success' })\r\n                  actions['UPDATED'] && enqueueSnackbar(`Updated ${actions['UPDATED']} card entries`, { variant: 'info' })\r\n                })\r\n                .catch(error => {\r\n                  enqueueSnackbar(`Failed to tag ${len} card entries`, { variant: 'error' })\r\n                })\r\n            else {\r\n              dispatch.updateCollection(clonedArr.map(card => ({ action: 'UPDATED', card })))\r\n              enqueueSnackbar(`Updated ${len} card entries`, { variant: 'success' })\r\n            }\r\n          }\r\n          closeMenu()\r\n        }\r\n        else {\r\n          setTagArray(_.chain(collection)\r\n            .filter(card => selectedCardIds.includes(card._id))\r\n            .flatMap(card => card.tag)\r\n            .uniqBy(v => v.toLowerCase())\r\n            .value()\r\n          )\r\n          setModalOpen('tag')\r\n        }\r\n        break\r\n\r\n      default:\r\n        closeMenu()\r\n        break\r\n    }\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <>\r\n      <Menu keepMounted disableAutoFocusItem\r\n        onContextMenu={e => e.preventDefault()}\r\n        open={Boolean(mouseY && mouseX)}\r\n        onClose={closeMenu}\r\n        anchorReference='anchorPosition'\r\n        anchorPosition={\r\n          mouseY && mouseX\r\n            ? { top: mouseY - 4, left: mouseX - 2 }\r\n            : undefined\r\n        }\r\n        MenuListProps={{\r\n          dense: true,\r\n        }}\r\n        {...rest}\r\n        className={clsx(classes.root, props.className)}\r\n      >\r\n        {\r\n          selectedCardIds.length === 1 &&\r\n          <MenuItem onClick={handleMenuItemClick('edit')}>\r\n            <ListItemIcon style={{ minWidth: 40 }}>\r\n              <EditIcon fontSize='small' />\r\n            </ListItemIcon>\r\n            Edit\r\n          </MenuItem>\r\n        }\r\n        <MenuItem onClick={handleMenuItemClick('tag')}>\r\n          <ListItemIcon style={{ minWidth: 40 }}>\r\n            <TagIcon fontSize='small' />\r\n          </ListItemIcon>\r\n          Assign Tags\r\n        </MenuItem>\r\n        <MenuItem onClick={handleMenuItemClick('delete')}>\r\n          <ListItemIcon style={{ minWidth: 40 }}>\r\n            <DeleteIcon fontSize='small' />\r\n          </ListItemIcon>\r\n          Delete\r\n        </MenuItem>\r\n      </Menu>\r\n\r\n\r\n      {/* \"ARE YOU SURE\" MODAL */}\r\n      <Grid container spacing={5} justifyContent='center' alignItems='center'\r\n        component={Modal} closeAfterTransition\r\n        onClose={closeMenu}\r\n        open={Boolean(modalOpen)}\r\n        BackdropProps={{ timeout: 500 }}\r\n      >\r\n        <Grid item xs={8} sm={6} lg={4} component={Fade} in={Boolean(modalOpen)}>\r\n          <Paper>\r\n            <Grid container justifyContent='center' alignItems='center' spacing={1} className={classes.modal}>\r\n              {\r\n                ((value) => {\r\n                  switch (value) {\r\n                    case 'delete':\r\n                      return <>\r\n                        <Grid item xs={12} align='center'>\r\n                          <Typography noWrap variant='h5' align='left'>\r\n                            Confirm Action\r\n                          </Typography>\r\n                          <Typography noWrap variant='body1' align='left'>\r\n                            {\r\n                              `Are you sure you want to delete the selected ${selectedCardIds.length > 1 ? 'cards' : 'card'}?`\r\n                            }\r\n                          </Typography>\r\n                          <Typography noWrap variant='body2' align='left' color='error'>\r\n                            This action is irreversible.\r\n                          </Typography>\r\n                        </Grid>\r\n                        <Grid item container justifyContent='flex-end' xs={12} spacing={1}>\r\n                          <Grid item>\r\n                            <Button variant='outlined' onClick={closeMenu}>\r\n                              Nop\r\n                            </Button>\r\n                          </Grid>\r\n                          <Grid item>\r\n                            <Button variant='contained' color='secondary' onClick={handleMenuItemClick('delete', true)}>\r\n                              Yep\r\n                            </Button>\r\n                          </Grid>\r\n                        </Grid>\r\n                      </>\r\n\r\n                    case 'tag':\r\n                      return <>\r\n                        <Grid item xs={12} align='left' component={Typography} variant='h5'>\r\n                          Assign Tags\r\n                        </Grid>\r\n                        <Grid item xs={12} align='left' component={Typography} variant='body2'>\r\n                          {`The following tags will be assigned to the selected ${selectedCardIds.length > 1 ? 'cards' : 'card'}:`}\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={10} md={9} lg={7}>\r\n                          <Autocomplete multiple freeSolo\r\n                            label='Tags'\r\n                            variant='outlined'\r\n                            margin='dense'\r\n                            size='small'\r\n                            color='secondary'\r\n                            options={[]}\r\n                            value={tagArray}\r\n                            onChange={(e, newValue) => { handleTagChange(newValue) }}\r\n                            onKeyDown={handleKeyDown('tag')}\r\n                            onInputChange={(e, newInputValue) => {\r\n                              if (newInputValue?.match(/[;,]/g)) {\r\n                                const values = _\r\n                                  .chain(newInputValue)\r\n                                  .split(/[;,]/)\r\n                                  .map(v => v.trim())\r\n                                  .compact()\r\n                                  .uniqBy(v => v.toLowerCase())\r\n                                  .value()\r\n                                if (values.length > 0)\r\n                                  handleTagChange(tagArray.concat(values))\r\n                                else\r\n                                  handleTagChange(tagArray)\r\n                              }\r\n                            }}\r\n                            renderInput={(props) => (\r\n                              <TextField multiline\r\n                                {...props}\r\n                                color='secondary'\r\n                                variant='outlined'\r\n                                label='Tags'\r\n                                helperText={\r\n                                  ['Tags are seperated by ', <code>{'Enter'}</code>, ' or ', <code>{'[;,]'}</code>]\r\n                                    .map((item, i) =>\r\n                                      <Fragment key={i}>{item}</Fragment>\r\n                                    )\r\n                                }\r\n                              />\r\n                            )}\r\n                          />\r\n                        </Grid>\r\n\r\n                        <Grid item container justifyContent='flex-end' spacing={1} xs={12}>\r\n                          <Grid item>\r\n                            <Button variant='outlined' onClick={closeMenu}>\r\n                              Cancel\r\n                            </Button>\r\n                          </Grid>\r\n                          <Grid item>\r\n                            <Button variant='contained' color='secondary' onClick={handleMenuItemClick('tag', true)}>\r\n                              Save\r\n                            </Button>\r\n                          </Grid>\r\n                        </Grid>\r\n                      </>\r\n\r\n                    default:\r\n                      return <></>\r\n                  }\r\n                })(modalOpen)\r\n              }\r\n            </Grid>\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      ContextMenu\r\n    )\r\n  )","import { FormControlLabel, Grid, Radio, RadioGroup, TextField, Chip } from \"@material-ui/core\"\r\nimport { Autocomplete } from \"@material-ui/lab\"\r\n// import clsx from \"clsx\"\r\n// import _ from 'lodash'\r\n\r\n\r\nconst formatCode = (code) => {\r\n  code = code.toLowerCase()\r\n  if (code.charAt(0) !== \"{\") return code\r\n  return \"\"\r\n}\r\n\r\nconst RangeTextField = ({ name, maxMin, state, stateHandler, clsInput }) => (\r\n  <TextField\r\n    className={clsInput}\r\n    id={maxMin + \"-\" + name}\r\n    label={maxMin}\r\n    type=\"number\"\r\n    placeholder={maxMin}\r\n    size=\"small\"\r\n    value={state}\r\n    pattern=\"\"\r\n    onChange={(e) => stateHandler(e.target.value)}\r\n    onKeyDown={(e) => {\r\n      if (e.key === \"e\" || e.key === \"+\" || e.key === \"-\") e.preventDefault()\r\n    }}\r\n  />\r\n)\r\n\r\n\r\nconst Utils = {\r\n  TextOption: ({ label, value, onChange, ...rest }) => (\r\n    <TextField\r\n      margin='dense'\r\n      size='small'\r\n      variant='outlined'\r\n      // variant='standard'\r\n      color='secondary'\r\n      label={label}\r\n      value={value}\r\n      onChange={onChange}\r\n      {...rest}\r\n    />\r\n  ),\r\n\r\n  RangeOptions: ({ name, stateMin, stateMax, stateHandlerMin, stateHandlerMax, clsInput, clsMinus }) => (\r\n    <Grid container spacing={1}>\r\n      <Grid item>{name + \": \"}</Grid>\r\n      <Grid item>\r\n        <RangeTextField\r\n          name={name}\r\n          maxMin=\"Minimum\"\r\n          state={stateMin}\r\n          stateHandler={stateHandlerMin}\r\n          clsInput={clsInput}\r\n        />\r\n      </Grid>\r\n      <Grid item className={clsMinus}>\r\n        —\r\n      </Grid>\r\n      <Grid item>\r\n        <RangeTextField\r\n          name={name}\r\n          maxMin=\"Maximum\"\r\n          state={stateMax}\r\n          stateHandler={stateHandlerMax}\r\n          clsInput={clsInput}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  ),\r\n\r\n  RadioOptions: ({ name, state, stateHandler }) => (\r\n    <Grid container spacing={2}>\r\n      <Grid item>{name + \": \"}</Grid>\r\n      <Grid item>\r\n        <RadioGroup\r\n          row\r\n          aria-label={name.toLowerCase()}\r\n          name={\"row-radio-buttons-\" + name.toLowerCase()}\r\n          value={state}\r\n          onChange={(e) => stateHandler(e.target.value)}\r\n        >\r\n          <FormControlLabel\r\n            value=\"Both\"\r\n            control={<Radio />}\r\n            label=\"Both\"\r\n          />\r\n          <FormControlLabel value=\"No\" control={<Radio />} label=\"No\" />\r\n          <FormControlLabel value=\"Yes\" control={<Radio />} label=\"Yes\" />\r\n        </RadioGroup>\r\n      </Grid>\r\n    </Grid>\r\n  ),\r\n\r\n  AutocompleteOptions: ({ ...props }) => (\r\n    <Autocomplete multiple disableCloseOnSelect filterSelectedOptions\r\n      style={{\r\n        width: '95%',\r\n        ...props?.style\r\n      }}\r\n      color='secondary'\r\n      ChipProps={{\r\n        variant: \"outlined\",\r\n        size: \"small\",\r\n        ...props?.ChipProps,\r\n      }}\r\n      renderTags={(value, getTagProps) => (\r\n        value.map((option, index) => (\r\n          <Chip\r\n            key={index}\r\n            {...getTagProps({ index })}\r\n            label={\r\n              props?.ChipProps?.label\r\n                ? props.ChipProps.label instanceof Function\r\n                  ? props.ChipProps.label(option)\r\n                  : props.ChipProps.label\r\n                : option\r\n            }\r\n          />\r\n        ))\r\n      )}\r\n      renderInput={params => (\r\n        <TextField\r\n          {...params}\r\n          color='secondary'\r\n          size='small'\r\n          margin='dense'\r\n          variant=\"outlined\"\r\n          label={props?.label}\r\n          {...props?.InputProps}\r\n        />\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n}\r\n\r\nexport {\r\n  Utils as default,\r\n  formatCode,\r\n}\r\n\r\nexport const {\r\n  RadioOptions,\r\n  TextOption,\r\n  RangeOptions,\r\n  AutocompleteOptions,\r\n} = Utils\r\n","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    icon: {\r\n    },\r\n    popover: {\r\n    },\r\n    paper: {\r\n      minWidth: theme.spacing(20),\r\n      maxWidth: theme.spacing(30),\r\n    },\r\n    // contentShift: {\r\n    //   transition: theme.transitions.create('margin', {\r\n    //     easing: theme.transitions.easing.easeOut,\r\n    //     duration: theme.transitions.duration.enteringScreen,\r\n    //   }),\r\n    //   marginLeft: 0,\r\n    // },\r\n    // listItemText: {\r\n    //   marginRight: theme.spacing(1),\r\n    // },\r\n    // ListItemIcon: {\r\n    //   marginRight: theme.spacing(2.5),\r\n    //   width: 'auto',\r\n    //   minWidth: 'auto',\r\n    // },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { useState, forwardRef, useImperativeHandle, useRef } from 'react'\r\nimport { ClickAwayListener, IconButton, List, Paper, Popover } from '@material-ui/core'\r\nimport { makeStyles, useTheme } from '@material-ui/styles'\r\nimport FilterListIcon from '@material-ui/icons/FilterList'\r\n// import { connect } from 'react-redux'\r\n\r\n// import { setCurrentTab } from '@/Logic/redux'\r\nimport useStyles from './styles'\r\n\r\n\r\nconst MenuPopover = forwardRef(({\r\n  /** VARS **/\r\n  ...props\r\n}, ref) => {\r\n  const [menuAnchor, setMenuAnchor] = useState(null)\r\n  const menuOpen = Boolean(menuAnchor)\r\n  const filterButtonRef = useRef()\r\n  const classes = makeStyles(useStyles(useTheme()))()\r\n  // const {\r\n  //   icon,\r\n  // } = props\r\n\r\n\r\n  /** EFFECTS **/\r\n  useImperativeHandle(ref, () => ({\r\n    openMenu: () => { handleMenuOpen(filterButtonRef) },\r\n    closeMenu: () => { handleMenuClose(null) },\r\n  }))\r\n\r\n  // useEffect(() => {\r\n  //   //onMount\r\n  //   console.log(props.ref)\r\n  // }, [])\r\n\r\n  /** HANDLERS **/\r\n  const handleIconClick = (e) => {\r\n    handleMenuOpen(e.currentTarget)\r\n    e.stopPropagation()\r\n  }\r\n\r\n  const handleMenuOpen = (menuAnnchor) => {\r\n    setMenuAnchor(menuAnnchor)\r\n  }\r\n\r\n  const handleMenuClose = (e) => {\r\n    setMenuAnchor(null)\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <>\r\n      <IconButton\r\n        color=\"inherit\"\r\n        className={classes.icon}\r\n        ref={filterButtonRef}\r\n        onClick={handleIconClick}\r\n      >\r\n        <FilterListIcon />\r\n      </IconButton>\r\n\r\n      <Popover\r\n        className={classes.popover}\r\n        open={menuOpen}\r\n        anchorEl={menuAnchor}\r\n        onClose={handleMenuClose}\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"right\",\r\n        }}\r\n        transformOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"left\",\r\n        }}\r\n      >\r\n        <Paper className={classes.paper}>\r\n          <ClickAwayListener onClickAway={handleMenuClose}>\r\n            <List dense disablePadding>\r\n              {props.children}\r\n            </List>\r\n          </ClickAwayListener>\r\n        </Paper>\r\n      </Popover>\r\n    </>\r\n  )\r\n})\r\n\r\n/** EXPORT **/\r\nexport default MenuPopover\r\n","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    root: {\r\n      // maxWidth: theme.spacing(200),\r\n      // display: 'flex',\r\n      // justifyContent: 'center',\r\n    },\r\n    search: {\r\n      // margin: \"0 auto\",\r\n      // marginBottom: theme.spacing(2),\r\n    },\r\n    minus: {\r\n      // marginLeft: \"10px\",\r\n    },\r\n    rangeInput: {\r\n      // marginTop: \"-10px\",\r\n    },\r\n    autocompleteInput: {\r\n      // maxWidth: \"450px\",\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-lone-blocks */\r\n\r\nimport React, { useEffect, useState, createRef } from \"react\"\r\nimport { Grid, InputAdornment, TextField, ListItem, ListSubheader, Divider } from \"@material-ui/core\"\r\nimport { Autocomplete } from \"@material-ui/lab\"\r\nimport { withStyles } from \"@material-ui/styles\"\r\nimport { connect } from \"react-redux\"\r\nimport Scryfall from \"scryfall-client\"\r\nimport _ from \"lodash\"\r\n\r\nimport { setFilters } from '@/Logic/redux'\r\nimport { TextOption, AutocompleteOptions } from \"./utils\"\r\nimport FilterPopover from \"./FilterPopover\"\r\nimport useStyles from \"./styles\"\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  filters: state.actions.app.collection.filters,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setFilters: (filters) => dispatch(setFilters(filters)),\r\n  },\r\n})\r\n\r\n\r\nconst FilterProvider = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    dispatch,\r\n    classes,\r\n    filters,\r\n  } = props\r\n  const filtersMenuRef = createRef()\r\n\r\n  const [setsData, setSetsData] = useState([])\r\n  const [cardName, setCardName] = useState('')\r\n\r\n  const [oracleText, setOracleText] = useState('')\r\n  const [typeLine, setTypeLine] = useState('')\r\n  // const [tags, setTags] = useState('')\r\n  const [tagArray, setTagArray] = useState([])\r\n\r\n  // const [selectedColors, setSelectedColors] = useState([])\r\n  // const [selectedManaCosts, setSelectedManaCosts] = useState([])\r\n  const [selectedSets, setSelectedSets] = useState([])\r\n\r\n  // const [amountMin, setAmountMin] = useState(0)\r\n  // const [amountMax, setAmountMax] = useState(9999)\r\n  // const [priceMin, setPriceMin] = useState(0)\r\n  // const [priceMax, setPriceMax] = useState(9999)\r\n\r\n  // const [foil, setFoil] = useState(\"Both\")\r\n  // const [signed, setSigned] = useState(\"Both\")\r\n  // const [altered, setAltered] = useState(\"Both\")\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    const fetchSets = async () => {\r\n      const allSets = await Scryfall.getSets()\r\n      setSetsData(\r\n        _.chain(allSets)\r\n          // .filter(set =>\r\n          //   set.set_type === 'token'\r\n          // )\r\n          .map(set => ({\r\n            ...set,\r\n            set_type: _.chain(set.set_type).replace(/[_]+/g, ' ').upperFirst().value(),\r\n            released_at: new Date(set.released_at),\r\n          }))\r\n          .sortBy(['set_type', 'released_at'])\r\n          .value()\r\n      )\r\n    }\r\n    fetchSets()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    dispatch.setFilters({\r\n      filters: {\r\n        name: v => v.toLowerCase().includes(cardName.toLowerCase()),\r\n        oracle_text: v => oracleText ? v?.toLowerCase().includes(oracleText) : true,\r\n        type_line: v => v.toLowerCase().includes(typeLine),\r\n        tag: tagArray.length > 0 ? tagArray : true,\r\n        set: selectedSets.length > 0 ? selectedSets : true,\r\n        // colors: selectedColors,\r\n        // mana_cost: selectedManaCosts,\r\n        // amount: (v) => v >= amountMin && v <= amountMax,\r\n        // price: (v, item) => item.amount * item.prices.usd >= priceMin && item.amount * item.prices.usd <= priceMax,\r\n        // foil: (v) => getRadioAsBoolean(v, foil),\r\n        // signed: (v) => getRadioAsBoolean(v, signed),\r\n        // altered: (v) => getRadioAsBoolean(v, altered),\r\n      }\r\n    })\r\n  }, [cardName, oracleText, typeLine, tagArray, selectedSets])\r\n  // }, [cardName, oracleText, type, selectedColors, selectedManaCosts, selectedSets, amountMin, amountMax, priceMin, priceMax, foil, signed, altered])\r\n\r\n  useEffect(() => {\r\n    if (Array.isArray(filters.tag))\r\n      setTagArray(filters.tag)\r\n  }, [filters])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleTagChange = (value) => {\r\n    setTagArray(state => (\r\n      _.chain(value)\r\n        .map(v => v.trim())\r\n        .compact()\r\n        .uniqBy(v => v.toLowerCase())\r\n        .value()\r\n    ))\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid item container className={classes.root}>\r\n      <TextField\r\n        id=\"filled-search\"\r\n        label=\"Search Card Name\"\r\n        size='small'\r\n        type=\"search\"\r\n        color='secondary'\r\n        variant=\"filled\"\r\n        className={classes.search}\r\n        value={cardName}\r\n        onChange={(e) => setCardName(e.target.value)}\r\n        InputProps={{\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <FilterPopover ref={filtersMenuRef}>\r\n                <ListSubheader>\r\n                  Filters\r\n                </ListSubheader>\r\n                <ListItem>\r\n                  <TextOption\r\n                    label=\"Oracle Text\"\r\n                    value={oracleText}\r\n                    onChange={e => setOracleText(e.target.value)}\r\n                  />\r\n                </ListItem>\r\n                <ListItem>\r\n                  <TextOption\r\n                    label=\"Type\"\r\n                    value={typeLine}\r\n                    onChange={e => setTypeLine(e.target.value)}\r\n                  />\r\n                </ListItem>\r\n\r\n                <ListItem style={{ paddingRight: 28 }}>\r\n                  <Autocomplete multiple freeSolo //disableClearable autoSelect\r\n                    limitTags={4}\r\n                    label='Tags'\r\n                    variant='outlined'\r\n                    margin='dense'\r\n                    size='small'\r\n                    color='secondary'\r\n                    options={[]}\r\n                    value={tagArray}\r\n                    onChange={(e, newValue) => { handleTagChange(newValue) }}\r\n                    onInputChange={(e, newInputValue) => {\r\n                      if (newInputValue?.match(/[;,]/g)) {\r\n                        const values = _\r\n                          .chain(newInputValue)\r\n                          .split(/[;,]/)\r\n                          .map(v => v.trim())\r\n                          .compact()\r\n                          .uniqBy(v => v.toLowerCase())\r\n                          .value()\r\n                        if (values.length > 0)\r\n                          handleTagChange(tagArray.concat(values))\r\n                        else\r\n                          handleTagChange(tagArray)\r\n                      }\r\n                    }}\r\n                    renderInput={(props) => (\r\n                      <TextField multiline\r\n                        {...props}\r\n                        color='secondary'\r\n                        variant='outlined'\r\n                        label='Tags'\r\n                        helperText={\r\n                          ['Tags are seperated by ', <code>{'Enter'}</code>, ' or ', <code>{'[;,]'}</code>]\r\n                            .map((item, i) =>\r\n                              <React.Fragment key={i}>{item}</React.Fragment>\r\n                            )\r\n                        }\r\n                      />\r\n                    )}\r\n                  />\r\n                </ListItem>\r\n\r\n                <Divider />\r\n\r\n                <ListItem>\r\n                  <AutocompleteOptions\r\n                    label=\"Sets\"\r\n                    options={setsData}\r\n                    value={selectedSets}\r\n                    onChange={(e, v) => setSelectedSets(v)}\r\n                    className={classes.autocompleteInput}\r\n                    groupBy={option => option.set_type}\r\n                    getOptionLabel={option => option.name}\r\n                    getOptionSelected={(option, value) => (\r\n                      option.code === value.code\r\n                    )}\r\n                    ChipProps={{\r\n                      label: option => option.code,\r\n                    }}\r\n                  />\r\n                </ListItem>\r\n\r\n                {/* getAutocompleteOptions(\r\n                    \"Colors\",\r\n                    getAllColors(),\r\n                    selectedColors,\r\n                    setSelectedColors,\r\n                    classes.autocompleteInput\r\n                  ),\r\n                  getAutocompleteOptions(\r\n                    \"Mana Costs\",\r\n                    symbols,\r\n                    selectedManaCosts,\r\n                    setSelectedManaCosts,\r\n                    classes.autocompleteInput\r\n                  ),\r\n                  getRangeOptions(\r\n                    \"Price\",\r\n                    priceMin,\r\n                    priceMax,\r\n                    setPriceMin,\r\n                    setPriceMax,\r\n                    classes.rangeInput,\r\n                    classes.minus\r\n                  ),\r\n                  getRangeOptions(\r\n                    \"Amount\",\r\n                    amountMin,\r\n                    amountMax,\r\n                    setAmountMin,\r\n                    setAmountMax,\r\n                    classes.rangeInput,\r\n                    classes.minus\r\n                  ),\r\n                  getRadioOptions(\"Foil\", foil, setFoil),\r\n                  getRadioOptions(\"Signed\", signed, setSigned),\r\n                  getRadioOptions(\"Altered\", altered, setAltered), */}\r\n              </FilterPopover>\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n      />\r\n    </Grid>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default withStyles(useStyles)(\r\n  connect(mapStateToProps, mapDispatchToProps)(\r\n    FilterProvider\r\n  )\r\n)\r\n","import { Grid, Tooltip, Fab } from '@material-ui/core'\r\nimport {\r\n  Add as AddIcon,\r\n  CloudDownload as CloudDownloadIcon,\r\n} from '@material-ui/icons'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\n\r\nconst MyFabs = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const history = useHistory()\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleFabClick = (id) => (e) => {\r\n    switch (id) {\r\n      case 'import':\r\n        history.push('/collection/import')\r\n        break\r\n\r\n      case 'export':\r\n        history.push('/collection/export')\r\n        break\r\n\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid container spacing={1} direction=\"column-reverse\">\r\n      <Grid item>\r\n        <Tooltip arrow\r\n          placement='left'\r\n          title='Import Cards'\r\n          enterDelay={250}\r\n        >\r\n          <Fab\r\n            name='import'\r\n            size='small'\r\n            color='primary'\r\n            onClick={handleFabClick('import')}\r\n          >\r\n            <AddIcon />\r\n          </Fab>\r\n        </Tooltip>\r\n      </Grid>\r\n\r\n      <Grid item>\r\n        <Tooltip arrow\r\n          placement='left'\r\n          title='Export Cards'\r\n          enterDelay={250}\r\n        >\r\n          <Fab\r\n            name='export'\r\n            size='small'\r\n            color='primary'\r\n            onClick={handleFabClick('export')}\r\n          >\r\n            <CloudDownloadIcon />\r\n          </Fab>\r\n        </Tooltip>\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default MyFabs","const useStyles = (theme) => {\r\n  const topBottomPadding = theme.spacing(8)\r\n\r\n  return {\r\n    root: {\r\n\r\n    },\r\n    modal: {\r\n      maxWidth: '90vw',\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","import { Fragment, useState, useEffect, useRef, useImperativeHandle } from 'react'\r\nimport { Grid, Hidden, Paper, Fade, Modal, Typography, TextField, MenuItem, FormControlLabel, Checkbox, InputAdornment, CircularProgress, Button, Tooltip, Divider } from '@material-ui/core'\r\nimport { Add as AddIcon } from '@material-ui/icons'\r\nimport { Autocomplete } from '@material-ui/lab'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport Scryfall from 'scryfall-client'\r\nimport cloneDeep from 'lodash/cloneDeep'\r\n\r\nimport { getCardPrints } from '@/Api'\r\nimport { CardImage } from '@/Components'\r\nimport { addCardPrice, addLayoutKeywords } from '@/Providers'\r\nimport useStyles from './styles'\r\n\r\n\r\nconst ImportWizard = ({\r\n  /** VARS **/\r\n  refs: ref,\r\n  updateHeight = () => { },\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n  } = props\r\n  const refs = {\r\n    cardName: {\r\n      autocomplete: useRef(),\r\n      input: useRef(),\r\n      listbox: useRef(),\r\n    },\r\n  }\r\n\r\n  const [card, setCard] = useState({})\r\n  const [newCards, setNewCards] = useState([])\r\n\r\n  const [menuHoverItem, setMenuHoverItem] = useState(null)\r\n  const [printsSet, setPrintsSet] = useState([])\r\n  const [printsLang, setPrintsLang] = useState([])\r\n  const [cardNames, setCardNames] = useState([])\r\n  const [listboxOpen, setListboxOpen] = useState(false)\r\n  const [modalOpen, setModalOpen] = useState(false)\r\n\r\n\r\n  /** METHODS **/\r\n  useImperativeHandle(ref, () => ({\r\n    handleSubmit,\r\n    reset: handleReset,\r\n    focus: handleFocus,\r\n  }))\r\n\r\n\r\n  /** FUNCTIONS **/\r\n  const resetCard = () => {\r\n    setPrintsSet([])\r\n    setPrintsLang([])\r\n    setCardNames([])\r\n    setCard({})\r\n\r\n    onMenuHover(null)\r\n    // dispatch.setEditEnabled(false)\r\n  }\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    updateHeight() // update height on each render\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (!card.name) {\r\n      resetCard()\r\n      return\r\n    }\r\n\r\n    Scryfall.getCardNamed(card.name)\r\n      .then(cardData => {\r\n        handleCardInfoChange({\r\n          ...cardData,\r\n          amount: card.amount || 1,\r\n          condition: card.condition || 'NM',\r\n          foil: card.foil || false,\r\n          signed: card.signed || false,\r\n          altered: card.altered || false,\r\n          misprint: card.misprint || false,\r\n        })\r\n\r\n        setPrintsSet([])\r\n        setPrintsLang([])\r\n\r\n        Promise\r\n          .all([\r\n            getCardPrints(cardData, 'set'),\r\n            getCardPrints(cardData, 'lang'),\r\n          ])\r\n          .then(([set, lang]) => {\r\n            setPrintsSet(set)\r\n            setPrintsLang(lang)\r\n          })\r\n      })\r\n  }, [card.name])\r\n\r\n  useEffect(() => {\r\n    if (card.set) {\r\n      setPrintsLang([])\r\n      getCardPrints(card, 'lang')\r\n        .then(lang => {\r\n          let data = lang[0]\r\n          delete data.foil\r\n          handleCardInfoChange(data)\r\n          setPrintsLang(lang)\r\n        })\r\n    }\r\n  }, [card.set])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleSubmit = (e) => {\r\n    return new Promise((resolve, reject) => {\r\n      const cardName = refs.cardName.input.current?.value.trim() || ''\r\n\r\n      if (cardName === '' && newCards.length > 0) {\r\n        setModalOpen({\r\n          source: 'submit',\r\n          reject,\r\n          resolve: () => {\r\n            resolve(newCards)\r\n            closeModal()\r\n          }\r\n        })\r\n      }\r\n      else {\r\n        if (cardName === card.name) {\r\n          handleAddToNewCards()\r\n        }\r\n        else if (cardName && cardNames.length > 0 && cardNames[0].toLowerCase().startsWith(cardName.toLowerCase())) {\r\n          handleCardInfoChange({ name: cardNames[0] })\r\n          setListboxOpen(false)\r\n        }\r\n\r\n        reject()\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleFocus = () => {\r\n    refs.cardName.input.current?.focus()\r\n  }\r\n\r\n  const handleReset = () => {\r\n    setNewCards([])\r\n    resetCard()\r\n  }\r\n\r\n  const handleAddToNewCards = () => {\r\n    const cardName = refs.cardName.input.current?.value.trim() || ''\r\n\r\n    if (cardName && cardName === card.name && card.set && card.lang) {\r\n      setNewCards(cards => [...cards, cloneDeep(card)])\r\n      resetCard()\r\n    }\r\n  }\r\n\r\n  const closeModal = () => {\r\n    if (modalOpen.hasOwnProperty('reject'))\r\n      modalOpen.reject()\r\n    setModalOpen(false)\r\n  }\r\n\r\n  const onMenuHover = (hoverItem) => {\r\n    if (hoverItem) {\r\n      // hoverItem.foil = card.foil\r\n      hoverItem = addCardPrice(hoverItem)\r\n      hoverItem = addLayoutKeywords(hoverItem)\r\n      setMenuHoverItem(hoverItem)\r\n    }\r\n    else\r\n      setMenuHoverItem(null)\r\n  }\r\n\r\n  const handleCardInfoChange = ({ ...data }) => {\r\n    setMenuHoverItem(null)\r\n    setCard(card => {\r\n      card = {\r\n        ...card,\r\n        ...data,\r\n      }\r\n\r\n      card = addCardPrice(card)\r\n      card = addLayoutKeywords(card)\r\n      return card\r\n    })\r\n  }\r\n\r\n  const handleCardNameChange = async (cardName) => {\r\n    try {\r\n      if (cardName)\r\n        setCardNames(\r\n          await Scryfall.autocomplete(cardName)\r\n        )\r\n      else\r\n        throw Error()\r\n    }\r\n    catch (err) {\r\n      setCardNames([])\r\n    }\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <>\r\n      <Grid item container justifyContent='center' alignItems='flex-start' spacing={2} xs={12} className={classes.root}>\r\n        <Grid item container justifyContent='center' alignItems='flex-start' spacing={5} xs={12} lg={9}>\r\n          <Hidden smDown>\r\n            <Grid item>\r\n              <CardImage tiltEnabled transform3dEnabled\r\n                showPrice={Boolean(card.prices)}\r\n                card={menuHoverItem || card}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n          <Hidden mdUp>\r\n            <Grid item style={{ marginBottom: 16 }}>\r\n              <CardImage showPrice tiltEnabled transform3dEnabled\r\n                card={menuHoverItem || card}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Grid item container xs>\r\n            <Grid item container justifyContent='center' alignItems='center' xs={12} wrap='nowrap'>\r\n              <Grid item xs>\r\n                <Autocomplete clearOnEscape\r\n                  ref={refs.cardName.autocomplete}\r\n                  handleHomeEndKeys={false}\r\n                  open={listboxOpen}\r\n                  onOpen={() => setListboxOpen(true)}\r\n                  onClose={() => setListboxOpen(false)}\r\n                  label='Card Name'\r\n                  variant='outlined'\r\n                  margin='dense'\r\n                  size='small'\r\n                  color='secondary'\r\n                  options={cardNames}\r\n                  value={card?.name || ''}\r\n                  onChange={(e, v) => { handleCardInfoChange({ name: v }) }}\r\n                  onInputChange={(e, v) => { handleCardNameChange(v) }}\r\n\r\n                  renderInput={(props) => (\r\n                    <TextField\r\n                      {...props}\r\n                      color='secondary'\r\n                      variant='outlined'\r\n                      label='Card Name'\r\n                      style={{ marginLeft: 0 }}\r\n                      inputRef={refs.cardName.input}\r\n                      InputProps={{\r\n                        ...props.InputProps,\r\n                        endAdornment: (\r\n                          <Fragment>\r\n                            {cardNames === null && <CircularProgress size={20} />}\r\n                            {props.InputProps.endAdornment}\r\n                          </Fragment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  )}\r\n                />\r\n              </Grid>\r\n              <Grid item style={{ margin: '0px 8px' }}>\r\n                <Tooltip arrow\r\n                  disableFocusListener={!card?.name}\r\n                  disableHoverListener={!card?.name}\r\n                  disableTouchListener={!card?.name}\r\n                  placement='top'\r\n                  title='Add card to import list'\r\n                >\r\n                  <span>\r\n                    <Button\r\n                      disabled={!card?.name}\r\n                      variant='contained'\r\n                      color='secondary'\r\n                      onClick={handleAddToNewCards}\r\n                      style={{ minWidth: 0, width: '3em' }}\r\n                    >\r\n                      <AddIcon />\r\n                    </Button>\r\n                  </span>\r\n                </Tooltip>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <Grid item container direction='column' justifyContent='center' alignItems='flex-start' style={{ maxWidth: 'min-content' }}>\r\n              <Grid item>\r\n                <TextField\r\n                  disabled={!card?.name}\r\n                  size='small'\r\n                  variant='outlined'\r\n                  type='number'\r\n                  label='Amount'\r\n                  color='secondary'\r\n                  value={card?.amount || ''}\r\n                  inputProps={{\r\n                    inputMode: 'numeric',\r\n                    min: 1,\r\n                  }}\r\n                  onChange={e => handleCardInfoChange({ amount: e.target.value })}\r\n                  style={{ marginLeft: 0 }}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item style={{ width: '9em', paddingTop: 8 }}>\r\n                <TextField select\r\n                  disabled={!card?.name}\r\n                  color='secondary'\r\n                  variant='outlined'\r\n                  margin='dense'\r\n                  size='small'\r\n                  align='left'\r\n                  label='Condition'\r\n                  value={card?.condition || ''}\r\n                  onChange={e => handleCardInfoChange({ condition: e.target.value })}\r\n                  style={{ marginLeft: 0 }}\r\n                >\r\n                  {\r\n                    [['NM', 'NM'], ['LP', 'LP'], ['MP', 'MP'], ['HP', 'HP'], ['DAMAGED', 'Damaged']]\r\n                      .map(cond =>\r\n                        <MenuItem key={cond[0]} value={cond[0]}>{cond[1]}</MenuItem>)\r\n                  }\r\n                </TextField>\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <FormControlLabel\r\n                  disabled={!card?.name}\r\n                  label='Foil'\r\n                  control={\r\n                    <Checkbox\r\n                      checked={Boolean(card?.foil)}\r\n                      onChange={e => handleCardInfoChange({ foil: e.target.checked })}\r\n                    />\r\n                  }\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <FormControlLabel\r\n                  disabled={!card?.name}\r\n                  label='Signed'\r\n                  control={\r\n                    <Checkbox\r\n                      checked={Boolean(card?.signed)}\r\n                      onChange={e => handleCardInfoChange({ signed: e.target.checked })}\r\n                    />\r\n                  }\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <FormControlLabel\r\n                  disabled={!card?.name}\r\n                  label='Altered'\r\n                  control={\r\n                    <Checkbox\r\n                      checked={Boolean(card?.altered)}\r\n                      onChange={e => handleCardInfoChange({ altered: e.target.checked })}\r\n                    />\r\n                  }\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <FormControlLabel\r\n                  disabled={!card?.name}\r\n                  label='Misprint'\r\n                  control={\r\n                    <Checkbox\r\n                      checked={Boolean(card?.misprint)}\r\n                      onChange={e => handleCardInfoChange({ misprint: e.target.checked })}\r\n                    />\r\n                  }\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <Grid item container direction='column' spacing={1} xs={12} sm={10} md>\r\n              <Grid item container wrap='nowrap' spacing={1}>\r\n                <Grid item xs style={{ width: '1px' }}>\r\n                  <TextField select\r\n                    color='secondary'\r\n                    variant='outlined'\r\n                    margin='dense'\r\n                    size='small'\r\n                    align='left'\r\n                    disabled={!card.name || printsSet?.length <= 1}\r\n                    label='Set'\r\n                    value={((!card.name && []) || printsSet || []).length === 0 ? '' : card.id}\r\n                    onChange={e => {\r\n                      const cardData = printsSet.find(item => item.id === e.target.value)\r\n                      delete cardData.foil\r\n                      handleCardInfoChange(cardData)\r\n                    }}\r\n                    SelectProps={{\r\n                      onClose: e => onMenuHover(card)\r\n                    }}\r\n                    InputProps={card?.name && printsSet?.length === 0\r\n                      ? {\r\n                        startAdornment: (\r\n                          <InputAdornment position='start'>\r\n                            <CircularProgress size={20} />\r\n                          </InputAdornment>\r\n                        )\r\n                      }\r\n                      : {}\r\n                    }\r\n                  >\r\n                    {\r\n                      (printsSet || [])\r\n                        .map((item) =>\r\n                          <MenuItem\r\n                            key={item.id}\r\n                            value={item.id}\r\n                            onMouseEnter={e => onMenuHover({ ...item, foil: card?.foil })}\r\n                            onMouseLeave={e => onMenuHover(null)}\r\n                          >\r\n                            {`${item.set_name} [#${item.collector_number}]`}\r\n                          </MenuItem>\r\n                        )\r\n                    }\r\n                  </TextField>\r\n                </Grid>\r\n\r\n                <Grid item>\r\n                  <TextField select\r\n                    color='secondary'\r\n                    variant='outlined'\r\n                    margin='dense'\r\n                    size='small'\r\n                    align='left'\r\n                    label={card?.name ? 'Language' : 'Lang'}\r\n                    disabled={!card.name || printsLang?.length <= 1}\r\n                    value={((!card.name && []) || printsLang || []).length === 0 ? '' : card.id}\r\n                    style={{ width: '6em' }}\r\n                    onChange={e => {\r\n                      const cardData = printsLang.find(item => item.id === e.target.value)\r\n                      delete cardData.foil\r\n                      handleCardInfoChange(cardData)\r\n                    }}\r\n                    SelectProps={{\r\n                      onClose: e => onMenuHover(card)\r\n                    }}\r\n                    InputProps={card?.name && printsLang?.length === 0\r\n                      ? {\r\n                        startAdornment: (\r\n                          <InputAdornment position='start'>\r\n                            <CircularProgress size={20} />\r\n                          </InputAdornment>\r\n                        )\r\n                      }\r\n                      : {}\r\n                    }\r\n                  >\r\n                    {\r\n                      (printsLang || [])\r\n                        .map(item =>\r\n                          <MenuItem\r\n                            key={item.id}\r\n                            value={item.id}\r\n                            onMouseEnter={e => onMenuHover({ ...item, foil: card?.foil })}\r\n                            onMouseLeave={e => onMenuHover(null)}\r\n                          >\r\n                            {item.lang}\r\n                          </MenuItem>\r\n                        )\r\n                    }\r\n                  </TextField>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Grid item style={{ marginRight: 11 }}>\r\n                <Autocomplete multiple freeSolo disableClearable //autoSelect\r\n                  disabled={!card?.name}\r\n                  limitTags={4}\r\n                  label='Tags'\r\n                  variant='outlined'\r\n                  margin='dense'\r\n                  size='small'\r\n                  color='secondary'\r\n                  options={[]}\r\n                  value={card?.tag || []}\r\n                  onChange={(e, newValue) => { handleCardInfoChange({ tag: newValue }) }}\r\n                  onInputChange={(e, newInputValue) => {\r\n                    if (newInputValue?.match(/[;,]/g)) {\r\n                      const values = lodash\r\n                        .chain(newInputValue)\r\n                        .split(/[;,]/)\r\n                        .map(v => v.trim())\r\n                        .compact()\r\n                        .uniqBy(v => v.toLowerCase())\r\n                        .value()\r\n                      if (values.length > 0)\r\n                        handleCardInfoChange({ tag: card?.tag.concat(values) })\r\n                      else\r\n                        handleCardInfoChange({ tag: card?.tag })\r\n                    }\r\n                  }}\r\n                  renderInput={(props) => (\r\n                    <TextField multiline\r\n                      {...props}\r\n                      color='secondary'\r\n                      variant='outlined'\r\n                      label='Tags'\r\n                      helperText={\r\n                        ['Tags are seperated by ', <code>{'Enter'}</code>, ' or ', <code>{'[;,]'}</code>]\r\n                          .map((item, i) =>\r\n                            <Fragment key={i}>{item}</Fragment>\r\n                          )\r\n                      }\r\n                    />\r\n                  )}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n          <Divider />\r\n        </Grid>\r\n\r\n        <Grid item container direction='row' justifyContent='flex-start' alignItems='center' xs={12} spacing={1}>\r\n          <Grid item xs={12} align='left' component={Typography}>\r\n            {\r\n              newCards.length === 0\r\n                ? <>\r\n                  <Typography gutterBottom variant='h6'>\r\n                    No new cards to add.\r\n                  </Typography>\r\n                  <Typography color='textSecondary' variant='body1'>\r\n                    Start adding cards by entering a card name above and filling the appropriate fields.<br />\r\n                    You may use the keyboard to navigate the fields and to select options.<br />\r\n                    Press enter while the search bar is focused to add the current card to the list. If no text is present in the search bar, pressing enter will submit the form instead.\r\n                  </Typography>\r\n                </>\r\n                : <Typography gutterBottom variant='h6'>\r\n                  {\r\n                    newCards.length === 1\r\n                      ? `${newCards.length} card entry:`\r\n                      : `${newCards.length} card entires:`\r\n                  }\r\n                </Typography>\r\n            }\r\n          </Grid>\r\n          <Grid item component='ul' style={{ textAlign: 'left' }}>\r\n            {\r\n              newCards.map((card, i) => (\r\n                <Typography component='li' variant='body1' key={i}>\r\n                  {[\r\n                    `x${card.amount}`,\r\n                    card.name,\r\n                    `[${card.set.toUpperCase()}]`,\r\n                    `[#${card.collector_number}]`,\r\n                    `[@${card.lang}]`,\r\n                    card.foil ? `[F]` : '',\r\n                  ].join(' ')}\r\n                </Typography>\r\n              ))\r\n            }\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n\r\n\r\n      {/* \"ARE YOU SURE\" MODAL */}\r\n      <Grid container spacing={5} justifyContent='center' alignItems='center'\r\n        component={Modal} closeAfterTransition\r\n        onClose={closeModal}\r\n        open={Boolean(modalOpen)}\r\n        BackdropProps={{ timeout: 500 }}\r\n      >\r\n        <Grid item xs={8} sm={6} lg={4}\r\n          component={Fade} in={Boolean(modalOpen)}\r\n        >\r\n          <Paper>\r\n            <Grid container justifyContent='center' alignItems='center' spacing={1} className={classes.modal}>\r\n              {\r\n                (() => {\r\n                  switch (modalOpen.source) {\r\n                    case 'delete':\r\n                      return <>\r\n                        <Grid item xs={12} align='center'>\r\n                          <Typography noWrap variant='h5' align='left'>\r\n                            Confirm Action\r\n                          </Typography>\r\n                          <Typography noWrap variant='body1' align='left'>\r\n                            Are you sure you want to delete the selected card?\r\n                          </Typography>\r\n                          <Typography noWrap variant='body2' align='left' color='error'>\r\n                            This action is irreversible.\r\n                          </Typography>\r\n                        </Grid>\r\n                        <Grid item container justifyContent='flex-end' xs={12} spacing={1}>\r\n                          <Grid item>\r\n                            <Button variant='outlined' onClick={closeModal}> {/* close modal & reject promise */}\r\n                              Nop\r\n                            </Button>\r\n                          </Grid>\r\n                          <Grid item>\r\n                            <Button variant='contained' color='secondary'>\r\n                              {/* TODO: handle card delete */}\r\n                              Yep\r\n                            </Button>\r\n                          </Grid>\r\n                        </Grid>\r\n                      </>\r\n\r\n                    case 'submit':\r\n                      return <>\r\n                        <Grid item xs={12} align='center'>\r\n                          <Typography noWrap variant='h5' align='left'>\r\n                            Confirm Action\r\n                          </Typography>\r\n                          <Typography noWrap variant='body1' align='left'>\r\n                            Update {newCards.length} card {newCards.length > 1 ? 'entries' : 'entry'}?\r\n                          </Typography>\r\n                        </Grid>\r\n                        <Grid item container justifyContent='flex-end' xs={12} spacing={1}>\r\n                          <Grid item>\r\n                            <Button variant='outlined' onClick={closeModal}> {/* close modal & reject promise */}\r\n                              Nop\r\n                            </Button>\r\n                          </Grid>\r\n                          <Grid item>\r\n                            <Button variant='contained' color='secondary' onClick={modalOpen.resolve}>\r\n                              Yep\r\n                            </Button>\r\n                          </Grid>\r\n                        </Grid>\r\n                      </>\r\n\r\n                    default:\r\n                      return <></>\r\n                  }\r\n                })()\r\n              }\r\n            </Grid>\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    ImportWizard\r\n  )","import { useState, useEffect, useRef, useImperativeHandle } from 'react'\r\nimport { Grid, TextField, Typography } from '@material-ui/core'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport compact from 'lodash/compact'\r\nimport upperFirst from 'lodash/upperFirst'\r\nimport Scryfall from 'scryfall-client'\r\n\r\nimport { getCardPrints } from '@/Api'\r\nimport useStyles from './styles'\r\n\r\n\r\nconst BulkImport = ({\r\n  /** VARS **/\r\n  refs: ref,\r\n  updateHeight,\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n  } = props\r\n  const inputRef = useRef()\r\n\r\n  const [cardListText, setCardListText] = useState('')\r\n  const [errorMessages, setErrorMessages] = useState([])\r\n\r\n\r\n  /** METHODS **/\r\n  useImperativeHandle(ref, () => ({\r\n    handleSubmit,\r\n    reset: handleReset,\r\n    focus: handleFocus,\r\n  }))\r\n\r\n  const bulkToCards = async (text) => {\r\n    let cards = []\r\n    let errors = []\r\n    const lines = text\r\n      .trim()\r\n      .split('\\n')\r\n      .map(line => line.trim())\r\n\r\n\r\n    for (let i = 0; i < lines.length; i++) {\r\n      let words = compact(lines[i].split(/[\\s]+/g)) // split on whitespaces (greedy)\r\n      const card = { line: i }\r\n\r\n      if (words.length === 0)\r\n        continue\r\n\r\n\r\n      // card.amount //\r\n      if (words[0].match(/(^x[1-9][0-9]*$)|(^[1-9][0-9]*x$)/gi)) {\r\n        // `x123` or `123x`\r\n        card.amount = parseInt(words[0].replace(/x/gi, ''))\r\n        words.splice(0, 1)\r\n      }\r\n      else if (words[0].match(/^[1-9][0-9]*$/g)) {\r\n        // `123` with no `x`\r\n        card.amount = parseInt(words[0])\r\n        words.splice(0, 1)\r\n      }\r\n      else if (words[0].match(/(^x{2,}[0-9]+$)|(^[0-9]+x{2,}$)|(^[^x][0-9]+$)|((^[0-9]+[^x]$))/gi)) {\r\n        errors.push({ line: i, message: `Invalid amount format.` })\r\n      }\r\n      else\r\n        card.amount = 1\r\n\r\n\r\n      // card.name //\r\n      if (words[0].match(/^\\[/g))\r\n        errors.push({ line: i, message: `Card name cannot start with '['.` })\r\n\r\n      while (words.length > 1 && words[1].match(/^[^[]/g)) // join words until we find a `[`\r\n        words.splice(0, 2, words.slice(0, 2).join(' '))\r\n      card.name = words.splice(0, 1)[0]\r\n\r\n\r\n      // bracket options //\r\n      while (words.length > 0) {\r\n        //foil\r\n        if (words[0].match(/^\\[f\\]$/gi))\r\n          card.foil = true\r\n\r\n        //set\r\n        else if (words[0].match(/^\\[\\w+]$/g))\r\n          card.set = words[0].replace(/[\\]\\[]/g, '')\r\n\r\n        //collector number\r\n        else if (words[0].match(/^\\[#.+]$/g))\r\n          card.collector_number = words[0].replace(/[#\\]\\[]/g, '')\r\n\r\n        //lang\r\n        else if (words[0].match(/^\\[@[a-z]+]$/gi))\r\n          card.lang = words[0].replace(/[\\]\\[]/g, '')\r\n\r\n        words.splice(0, 1)\r\n      }\r\n\r\n      cards.push(card)\r\n    }\r\n\r\n    // add scryfall data using fuzzy search\r\n    cards = await Promise.all(\r\n      cards.map(async (card) => {\r\n        let data = {}\r\n\r\n        try {\r\n          try {\r\n            data = await Scryfall.getCard(card.name, 'fuzzyName')\r\n          }\r\n          catch {\r\n            throw new Error(`Card name not found: \"${card.name}\".`)\r\n          }\r\n\r\n          const setPrints = await getCardPrints(data, 'set')\r\n\r\n          if (card.set) {\r\n            let flag = true\r\n            for (const item of setPrints) {\r\n              if (item.set.toLowerCase() === card.set.toLowerCase()) {\r\n                delete item.foil\r\n                data = {\r\n                  ...data,\r\n                  ...item,\r\n                }\r\n                flag = false\r\n                break\r\n              }\r\n            }\r\n            if (flag)\r\n              throw new Error(`Set not found: \"${card.set}\".`)\r\n          }\r\n\r\n          if (card.collector_number) {\r\n            let flag = true\r\n            for (const item of setPrints) {\r\n              if (item.collector_number === card.collector_number) {\r\n                delete item.foil\r\n                data = {\r\n                  ...data,\r\n                  ...item,\r\n                }\r\n                flag = false\r\n                break\r\n              }\r\n            }\r\n            if (flag)\r\n              throw new Error(`Collector number not found: \"${card.collector_number}\".`)\r\n          }\r\n\r\n          if (card.lang) {\r\n            const setLangs = await getCardPrints(data, 'lang')\r\n            for (const item of setLangs) {\r\n              if (item.lang.toLowerCase() === card.lang.toLowerCase()) {\r\n                delete item.foil\r\n                data = {\r\n                  ...data,\r\n                  ...item,\r\n                }\r\n                break\r\n              }\r\n            }\r\n          }\r\n\r\n          return {\r\n            ...data,\r\n            ...card,\r\n            foil: Boolean(card.foil),\r\n          }\r\n        }\r\n        catch (error) {\r\n          console.error(error)\r\n          return {\r\n            card,\r\n            error: {\r\n              line: card.line,\r\n              message: error.message,\r\n            },\r\n          }\r\n        }\r\n      })\r\n    )\r\n\r\n    cards = cards.filter(card => {\r\n      if (card.hasOwnProperty('error')) {\r\n        errors.push(card.error)\r\n        return false\r\n      }\r\n      return true\r\n    })\r\n\r\n    errors.sort((a, b) => a.line - b.line)\r\n    return { cards, errors }\r\n  }\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    updateHeight() // update height on each render\r\n  })\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleSubmit = async (e) => {\r\n    if (cardListText.trim() === '')\r\n      throw new Error('No cards to import')\r\n\r\n    const { cards, errors } = await bulkToCards(cardListText)\r\n\r\n    if (errors.length > 0) {\r\n      setErrorMessages(errors)\r\n      throw new Error(errors)\r\n    }\r\n\r\n    return cards\r\n  }\r\n\r\n  const handleFocus = () => {\r\n    inputRef.current?.focus()\r\n  }\r\n\r\n  const handleReset = () => {\r\n    setErrorMessages([])\r\n    setCardListText('')\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid container justifyContent='center' alignItems='center' spacing={1}>\r\n      {\r\n        errorMessages.length > 0 &&\r\n        <>\r\n          <Grid item xs={12} component={Typography} color='error' variant='h6' align='left' style={{ marginLeft: 8 }}>\r\n            We found errors in your card list\r\n          </Grid>\r\n          <Grid item container xs={12} direction='column' style={{ marginLeft: 8, marginBottom: 12 }}>\r\n            {\r\n              Object.values(errorMessages).map(({ line, message }, i) => (\r\n                <Grid item key={i} component='li' align='left' style={{ whiteSpace: 'break-spaces', marginLeft: 12 }}>\r\n                  <Typography color='error' align='left'>\r\n                    {`Line ${line + 1}, \\t${upperFirst(message)}`}\r\n                  </Typography>\r\n                </Grid>\r\n              ))\r\n            }\r\n          </Grid>\r\n        </>\r\n      }\r\n\r\n      <Grid item xs={12}>\r\n        <TextField multiline fullWidth\r\n          inputRef={inputRef}\r\n          color='secondary'\r\n          rows={20}\r\n          variant='filled'\r\n          label='Card List'\r\n          value={cardListText}\r\n          onChange={e => setCardListText(e.target.value)}\r\n          placeholder={[\r\n            \"Paste your collection here, the supported format is:\",\r\n            \"\\tx2 cardname [setid] [#collectorNumber] [@lang] [isFoil]\",\r\n            \"\",\r\n            \"Fuzzy named search is supported.\",\r\n            \"\",\r\n            \"------------------------\",\r\n            \"\",\r\n            \"2 fireball [m12] [f]\",\r\n            \"atraxa [@fr]\",\r\n            \"3x Garruk's Gorehorn [#306]\",\r\n            \"1x Garruk's Gorehorn [#108]\",\r\n            \"...\",\r\n          ].join('\\n')}\r\n          InputLabelProps={{\r\n            shrink: true,\r\n          }}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    BulkImport\r\n  )","const useStyles = (theme) => {\r\n  const topBottomPadding = theme.spacing(8)\r\n\r\n  return {\r\n    root: {\r\n      minHeight: `calc(100vh - 2*${topBottomPadding}px)`,\r\n      marginBottom: theme.spacing(2),\r\n      // width: '40vw',\r\n      // flexDirection: \"column\",\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      display: 'flex',\r\n      flexGrow: 1,\r\n    },\r\n    hoverHighlight: {\r\n      cursor: 'pointer',\r\n      '&:hover': {\r\n        backgroundColor: theme.palette.action.hover,\r\n      },\r\n    },\r\n    view1Container: {\r\n      height: '350px',\r\n    },\r\n    view2Container: {\r\n      padding: [2, 2, 0, 2]\r\n        .map(v => `${theme.spacing(v)}px`)\r\n        .join(' '),\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport { Grid, Typography, Paper, Divider, Button, TextField, Box } from '@material-ui/core'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport {\r\n  ImportExport as ImportExportIcon,\r\n  ChevronLeft as ChevronLeftIcon,\r\n  ChevronRight as ChevronRightIcon,\r\n} from '@material-ui/icons'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { useSnackbar } from 'notistack'\r\nimport SwipeableViews from 'react-swipeable-views'\r\n\r\nimport Config from '@/Config'\r\nimport { setCurrentTab, setCurrentCollection, updateCollection } from '@/Logic/redux'\r\nimport { MagicdexApi } from '@/Api'\r\nimport { BaseForm } from '@/Components'\r\nimport ImportWizard from './ImportWizard'\r\nimport BulkImport from './BulkImport'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  username: state.actions.activeUser.username,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setCurrentTab: (tab) => dispatch(setCurrentTab({ tab })),\r\n    setCurrentCollection: (collection) => dispatch(setCurrentCollection({ collection })),\r\n    updateCollection: (cards) => dispatch(updateCollection({ cards })),\r\n  }\r\n})\r\n\r\n\r\nconst Import = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    username,\r\n  } = props\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const history = useHistory()\r\n\r\n  const refs = {\r\n    viewRef: useRef(),\r\n    wizardRef: useRef(),\r\n    bulkRef: useRef(),\r\n  }\r\n\r\n  const [currentViewIndex, _setCurrentViewIndex] = useState(1)\r\n  const [wizardBackdrop, setWizardBackdrop] = useState(false)\r\n\r\n  const updateHeight = () => setTimeout(refs.viewRef.current?.updateHeight, 10)\r\n\r\n\r\n  /** FUNCTIONS **/\r\n  const updateCollection = async (newCards) => {\r\n    if (Config.MODIFY_DB_ALLOWED) {\r\n      try {\r\n        const res = await MagicdexApi.updateCards(newCards)\r\n        const actions = _.countBy(res, 'action')\r\n\r\n        dispatch.updateCollection(res.map(item => item.card))\r\n\r\n        actions['CREATED'] && enqueueSnackbar(`Created ${actions['CREATED']} card entries`, { variant: 'success' })\r\n        actions['UPDATED'] && enqueueSnackbar(`Updated ${actions['UPDATED']} card entries`, { variant: 'info' })\r\n      }\r\n      catch (error) {\r\n        enqueueSnackbar(`Error updating cards`, { variant: 'error' })\r\n        console.error({ error })\r\n      }\r\n    }\r\n    else {\r\n      dispatch.updateCollection([{ action: 'UPDATED', cards: newCards }])\r\n      enqueueSnackbar(`Updated ${newCards.length} card entries`, { variant: 'info' })\r\n    }\r\n  }\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    //onMount\r\n    dispatch.setCurrentTab('collection')\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!username)\r\n      return history.push('/login')\r\n  }, [username])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const setCurrentViewIndex = (index) => {\r\n    _setCurrentViewIndex(index)\r\n    updateHeight()\r\n    \r\n    switch (index) {\r\n      case 0:\r\n        setTimeout(refs.bulkRef.current?.focus, 350)\r\n        break\r\n\r\n      default:\r\n      case 1:\r\n        break\r\n\r\n      case 2:\r\n        setTimeout(refs.wizardRef.current?.focus, 350)\r\n        break\r\n    }\r\n  }\r\n\r\n  const handleImportTypeClick = (source) => (e) => {\r\n    switch (source) {\r\n      case 'bulk':\r\n        setCurrentViewIndex(0)\r\n        break\r\n\r\n      case 'wizard':\r\n        setCurrentViewIndex(2)\r\n        break\r\n\r\n      default:\r\n        setCurrentViewIndex(1)\r\n        break\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (source) => async (e) => {\r\n    let formRef = null\r\n    let res = []\r\n\r\n    switch (source) {\r\n      case 'bulk':\r\n        formRef = refs.bulkRef.current\r\n        break\r\n\r\n      case 'wizard':\r\n        formRef = refs.wizardRef.current\r\n        break\r\n\r\n      default:\r\n        break\r\n    }\r\n\r\n    try {\r\n      const newCards = (await formRef.handleSubmit(e))\r\n        .map(card => ({\r\n          ...card,\r\n          amount: `+${card.amount}`,\r\n        }))\r\n      setWizardBackdrop(true)\r\n\r\n      await updateCollection(newCards)\r\n      setCurrentViewIndex(1)\r\n      formRef.reset()\r\n\r\n      res = Promise.resolve(newCards)\r\n    }\r\n    catch (err) {\r\n      res = Promise.reject(err)\r\n    }\r\n    finally {\r\n      setWizardBackdrop(false)\r\n      return res\r\n    }\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid container className={classes.root}>\r\n      <Grid item xs={12} component={Paper}>\r\n        <SwipeableViews animateHeight ignoreNativeScroll\r\n          ref={refs.viewRef}\r\n          index={currentViewIndex}\r\n          slideStyle={{\r\n            overflow: 'hidden',\r\n          }}\r\n          style={{ overflow: 'hidden' }}\r\n        >\r\n\r\n          {/** VIEW 0 - BULK IMPORT **/}\r\n          <Grid container justifyContent='center' alignItems='center' spacing={2} className={classes.view2Container}>\r\n            <BaseForm\r\n              onSubmit={handleSubmit('bulk')}\r\n              instantValidate={false}\r\n              elevation={0}\r\n              style={{ width: '100%' }}\r\n\r\n              header='Bulk Import'\r\n              headerProps={{ align: 'left' }}\r\n              icon={() => (\r\n                <Box marginBottom={-2}>\r\n                  <ImportExportIcon style={{ fontSize: '1.5em' }} />\r\n                </Box>\r\n              )}\r\n\r\n              content={() => (\r\n                <BulkImport refs={refs.bulkRef} updateHeight={updateHeight} />\r\n              )}\r\n              contentProps={{\r\n                style: {\r\n                  paddingRight: '8px',\r\n                },\r\n              }}\r\n\r\n              actions={() => (\r\n                <Box paddingTop={2} marginLeft={1.5} marginRight={1.5}>\r\n                  <Grid container justifyContent='flex-end' alignItems='center' spacing={1}>\r\n                    <Grid item xs align='left'>\r\n                      <Button variant='contained' color='secondary' onClick={refs.bulkRef.current?.reset}>\r\n                        Reset\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button variant='outlined' onClick={() => setCurrentViewIndex(1)}>\r\n                        Back\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button variant='contained' type='submit' color='primary'>\r\n                        Submit\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Box>\r\n              )}\r\n            />\r\n          </Grid>\r\n\r\n\r\n          {/** VIEW 1 - CHOOSE IMPORT TYPE **/}\r\n          <Grid container justifyContent='center' alignItems='center' className={`MuiPaper-rounded ${classes.view1Container}`}>\r\n            <Grid item container xs component={Button} style={{ height: '100%', borderRadius: 0 }} onClick={handleImportTypeClick('bulk')}>\r\n              <Grid item style={{ marginTop: 6, marginRight: 12 }}>\r\n                <ChevronLeftIcon fontSize='large' />\r\n              </Grid>\r\n              <Grid item component={Typography} variant=\"h5\">\r\n                Bulk Import\r\n              </Grid>\r\n            </Grid>\r\n            <Divider flexItem orientation='vertical' />\r\n            <Grid item container xs component={Button} style={{ height: '100%', borderRadius: 0 }} onClick={handleImportTypeClick('wizard')}>\r\n              <Grid item component={Typography} variant=\"h5\">\r\n                Import Wizard\r\n              </Grid>\r\n              <Grid item style={{ marginTop: 6, marginLeft: 12 }}>\r\n                <ChevronRightIcon fontSize='large' />\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n\r\n\r\n          {/** VIEW 2 - IMPORT WIZARD **/}\r\n          <Grid container justifyContent='center' alignItems='center' spacing={2} className={classes.view2Container}>\r\n            <BaseForm\r\n              onSubmit={handleSubmit('wizard')}\r\n              disableBackdrop={!wizardBackdrop}\r\n              instantValidate={false}\r\n              elevation={0}\r\n              style={{ width: '100%' }}\r\n\r\n              header={() =>\r\n                <>\r\n                  Import Wizard <span style={{ fontSize: '0.5em' }}>(of the coast™)</span>\r\n                </>\r\n              }\r\n              headerProps={{ align: 'left' }}\r\n              icon={() => (\r\n                <Box marginBottom={2}>\r\n                  🧙‍♂️\r\n                </Box>\r\n              )}\r\n\r\n              content={() => (\r\n                <ImportWizard refs={refs.wizardRef} updateHeight={updateHeight} />\r\n              )}\r\n              contentProps={{\r\n                style: {\r\n                  paddingRight: '8px',\r\n                },\r\n              }}\r\n\r\n              actions={() => (\r\n                <Box paddingTop={2} marginLeft={1.5} marginRight={1.5}>\r\n                  <Grid container justifyContent='flex-end' alignItems='center' spacing={1}>\r\n                    <Grid item xs align='left'>\r\n                      <Button variant='contained' color='secondary' onClick={refs.wizardRef.current?.reset}>\r\n                        Reset\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button variant='outlined' onClick={() => setCurrentViewIndex(1)}>\r\n                        Back\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button variant='contained' color='primary' type='submit'>\r\n                        Submit\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Box>\r\n              )}\r\n            />\r\n          </Grid>\r\n\r\n        </SwipeableViews>\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      Import\r\n    )\r\n  )","const useStyles = (theme) => {\r\n  const topBottomPadding = theme.spacing(8)\r\n\r\n  return {\r\n    root: {\r\n      minHeight: `calc(100vh - 2*${topBottomPadding}px)`,\r\n      paddingBottom: theme.spacing(2),\r\n      // width: '40vw',\r\n      // flexDirection: \"column\",\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      display: 'flex',\r\n      flexGrow: 1,\r\n    },\r\n    paper: {\r\n      height: '350px',\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-lone-blocks */\r\n\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport { Grid, Box, Button, TextField, IconButton, Tooltip, MenuItem } from '@material-ui/core'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport {\r\n  Description as ExportIcon,\r\n  FileCopy as FileCopyIcon\r\n} from '@material-ui/icons'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { setCurrentTab, setCurrentCollection } from '@/Logic/redux'\r\nimport { pickCardFields } from '@/Api/MagicdexApi/utils'\r\nimport { BaseForm } from '@/Components'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  username: state.actions.activeUser.username,\r\n  collection: state.actions.activeUser.collection,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setCurrentTab: (tab) => dispatch(setCurrentTab({ tab })),\r\n    setCurrentCollection: (collection) => dispatch(setCurrentCollection({ collection })),\r\n  }\r\n})\r\n\r\n\r\nconst Export = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    username,\r\n    collection,\r\n  } = props\r\n  const history = useHistory()\r\n  const textfieldInputRef = useRef()\r\n  const [selectedExportType, setSelectedExportType] = useState('magicdex')\r\n  const [cardListText, setCardListText] = useState('')\r\n  const [textfieldHelperText, setTextfieldHelperText] = useState(' ')\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    //onMount\r\n    dispatch.setCurrentTab('collection')\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!username)\r\n      return history.push('/login')\r\n  }, [username])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleSubmit = () => {\r\n    setTextfieldHelperText(' ')\r\n    \r\n    // TODO: handle form submit\r\n    setCardListText(\r\n      `selected: ${selectedExportType}`\r\n    )\r\n  }\r\n\r\n  const handleReset = () => {\r\n    setSelectedExportType('magicdex')\r\n    setCardListText('')\r\n    setTextfieldHelperText(' ')\r\n  }\r\n\r\n  const handleTextFocus = (e) => {\r\n    if (cardListText) {\r\n      e.currentTarget.select()\r\n      navigator.clipboard.writeText(cardListText)\r\n      setTextfieldHelperText('Text copied to clipboard!')\r\n    }\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <div className={classes.root}>\r\n      <BaseForm\r\n        onSubmit={handleSubmit}\r\n        instantValidate={false}\r\n        style={{ width: '100%' }}\r\n\r\n        header='Bulk Export'\r\n        headerProps={{ align: 'left' }}\r\n        icon={<ExportIcon style={{ fontSize: '1em' }} />}\r\n\r\n        content={() => (\r\n          <Grid container justifyContent='center' alignItems='center' spacing={3}>\r\n            <Grid item xs={7}>\r\n              <TextField select\r\n                color='secondary'\r\n                variant='outlined'\r\n                label='Export type'\r\n                size='small'\r\n                margin='dense'\r\n                value={selectedExportType}\r\n                onChange={(e) => setSelectedExportType(e.target.value)}\r\n                style={{ textAlign: 'start' }}\r\n              >\r\n                {\r\n                  ['MagicDex', 'CSV'].map((option) => (\r\n                    <MenuItem key={option} value={option.toLowerCase()}>\r\n                      {option}\r\n                    </MenuItem>\r\n                  ))\r\n                }\r\n              </TextField>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <TextField multiline fullWidth\r\n                disabled={!cardListText}\r\n                inputRef={textfieldInputRef}\r\n                onFocus={handleTextFocus}\r\n                color='secondary'\r\n                variant='filled'\r\n                rows={20}\r\n                label='Card List'\r\n                value={cardListText}\r\n                helperText={textfieldHelperText}\r\n                InputProps={{\r\n                  readOnly: true,\r\n                  endAdornment: (\r\n                    <Tooltip title='Copy' placement='right'>\r\n                      <IconButton disabled={!cardListText} size='small' onClick={() => textfieldInputRef.current.focus()} style={{ alignSelf: 'flex-start' }}>\r\n                        <FileCopyIcon style={{ fontSize: '1.25em' }} />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  )\r\n                }}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n\r\n        actions={() => (\r\n          <Box paddingTop={2} marginLeft={1.5} marginRight={1.5}>\r\n            <Grid container justifyContent='flex-end' alignItems='center' spacing={1}>\r\n              <Grid item xs align='left'>\r\n                <Button variant='contained' color='secondary' onClick={handleReset}>\r\n                  Reset\r\n                </Button>\r\n              </Grid>\r\n              <Grid item>\r\n                <Button variant='contained' type='submit' color='primary'>\r\n                  Submit\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        )}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      Export\r\n    )\r\n  )","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    '@global': {\r\n      '.MuiTableCell-head': {\r\n        fontWeight: 'bold',\r\n        textTransform: 'uppercase',\r\n      },\r\n      '.MuiTableCell-sizeSmall': {\r\n        padding: '0.3em',\r\n      },\r\n    },\r\n    root: {\r\n      marginBottom: theme.spacing(3),\r\n    },\r\n    fab: {\r\n      position: 'fixed',\r\n      bottom: theme.spacing(2),\r\n      right: theme.spacing(3),\r\n    },\r\n    filtersContainer: {\r\n      marginBottom: theme.spacing(4.5),\r\n    },\r\n    subheader: {\r\n      justifyContent: 'center',\r\n      fontWeight: 600,\r\n      height: '2.5rem',\r\n      alignItems: 'baseline',\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { useEffect, useRef } from 'react'\r\nimport { Grid, ListItemText, MenuItem, ListItem, ListSubheader, Divider, useMediaQuery } from '@material-ui/core'\r\nimport { Skeleton, ToggleButton, ToggleButtonGroup } from '@material-ui/lab'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport {\r\n  MoreVert as MoreVertIcon,\r\n  ViewList as ViewListIcon,\r\n  ViewModule as ViewModuleIcon,\r\n  ViewCompact as ViewCompactIcon,\r\n} from '@material-ui/icons'\r\nimport { connect } from 'react-redux'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport upperFirst from 'lodash/upperFirst'\r\n\r\nimport {\r\n  setCurrentTab, setCurrentCollection, setView, toggleCurrency, setColumns_TableView,\r\n  toggleCardsSelectableEnabled, setCurrentOpenCardId, setCardsSelectableEnabled,\r\n  setPerPage, setPageNumber,\r\n} from '@/Logic/redux'\r\nimport { CardPriceDataProvider, FilteredDataProvider } from '@/Providers'\r\nimport { MenuPopover } from '@/Components'\r\nimport { MagicdexApi } from '@/Api'\r\nimport { CardTableView, CardGridView, CardInfo } from './Views'\r\nimport FilterFields from './FilterFields'\r\nimport MyFabs from './MyFabs'\r\nimport Import from './.Import'\r\nimport Export from './.Export'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  username: state.actions.activeUser.username,\r\n  collection: state.actions.activeUser.collection,\r\n  view: state.actions.app.collection.view,\r\n  currency: state.actions.app.currency,\r\n  cardsSelectableEnabled: state.actions.app.collection.cardsSelectableEnabled,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setCurrentTab: (tab) => dispatch(setCurrentTab({ tab })),\r\n    setCurrentCollection: (collection) => dispatch(setCurrentCollection({ collection })),\r\n    setCurrentOpenCardId: (id) => dispatch(setCurrentOpenCardId({ id })),\r\n    setView: (view) => dispatch(setView({ view })),\r\n    setColumns: (columns) => dispatch(setColumns_TableView({ columns })),\r\n    toggleCurrency: () => dispatch(toggleCurrency()),\r\n    setCardsSelectableEnabled: (enabled) => dispatch(setCardsSelectableEnabled({ enabled })),\r\n    toggleCardsSelectableEnabled: () => dispatch(toggleCardsSelectableEnabled()),\r\n    setPageNumber: (pageNumber) => dispatch(setPageNumber({ pageNumber })),\r\n    setPerPage: (perPage) => dispatch(setPerPage({ perPage })),\r\n  }\r\n})\r\n\r\n\r\nconst Collection = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    username,\r\n    collection, // current user's collection\r\n    view, // one of ['table', 'grid', 'compact']\r\n    currency,\r\n    cardsSelectableEnabled,\r\n  } = props\r\n  const history = useHistory()\r\n  const location = useLocation()\r\n  const menuRef = useRef()\r\n  const menuItemRef = useRef()\r\n  const mdDown = useMediaQuery((theme) => theme.breakpoints.down('md'))\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    //onMount\r\n    dispatch.setCurrentTab('collection')\r\n    dispatch.setCurrentOpenCardId(null)\r\n\r\n    //onUnmount\r\n    return () => {\r\n      dispatch.setCurrentOpenCardId(null)\r\n      dispatch.setCardsSelectableEnabled(false)\r\n      // dispatch.setPerPage(PER_PAGE)\r\n      dispatch.setPageNumber(0)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(location.search)\r\n    const viewParam = params.get('view')\r\n\r\n    if (viewParam && viewParam !== view)\r\n      handleViewChange(viewParam)\r\n  }, [location])\r\n\r\n  useEffect(() => {\r\n    if (mdDown) {\r\n      dispatch.setColumns({\r\n        amount: 'amount',\r\n        name: 'name',\r\n        set: 'set',\r\n        mana_cost: 'cost',\r\n        type_line: 'type',\r\n        foil: 'foil',\r\n        total_price: `price`,\r\n      })\r\n    }\r\n    else {\r\n      dispatch.setColumns({\r\n        amount: 'amount',\r\n        name: 'name',\r\n        set: 'set',\r\n        mana_cost: 'mana cost',\r\n        type_line: 'type',\r\n        foil: 'foil',\r\n        total_price: `price (${currency})`,\r\n        date_created: 'date added',\r\n      })\r\n    }\r\n  }, [mdDown, currency])\r\n\r\n  useEffect(() => {\r\n    if (!username)\r\n      return history.push('/login')\r\n\r\n    dispatch.setCurrentCollection(JSON.parse(localStorage.getItem('collection')))\r\n    MagicdexApi\r\n      .getAllCards()\r\n      .then(res => dispatch.setCurrentCollection(res))\r\n  }, [username])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleViewChange = (value) => {\r\n    if (value && value !== view) {\r\n      const params = new URLSearchParams(location.search)\r\n      params.set('view', value)\r\n\r\n      history.push({ search: params.toString() })\r\n      dispatch.setView(value)\r\n      dispatch.setCurrentOpenCardId(null)\r\n      dispatch.setCardsSelectableEnabled(false)\r\n      // dispatch.setPerPage(PER_PAGE)\r\n      dispatch.setPageNumber(0)\r\n    }\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <>\r\n      <div className={classes.root}>\r\n        {\r\n          !collection\r\n            ?\r\n            // SHOW SKELETON\r\n            <Grid container justifyContent='center'>\r\n              <Grid item container xs={12} sm={11} md={10} spacing={2}>\r\n                <Grid item xs={2}>\r\n                  <Skeleton variant='rect' height='100%' />\r\n                </Grid>\r\n                <Grid item container xs={10}>\r\n                  <Grid item xs={2}>\r\n                    <Skeleton variant='circle' width={75} height={75} />\r\n                  </Grid>\r\n                  <Grid item xs={10}>\r\n                    <Skeleton variant='rect' height={32} />\r\n                    <Skeleton variant='text' />\r\n                  </Grid>\r\n                  <Grid item xs={12}>\r\n                    {[...Array(10).keys()].map(i => <Skeleton key={i} variant='text' />)}\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            :\r\n            // SHOW ACTUAL DATA VIEW\r\n            <>\r\n              <Grid container justifyContent='center'>\r\n                <Grid item container xs={12} lg={10} wrap='nowrap' justifyContent='center' alignItems='center' className={classes.filtersContainer}>\r\n                  <Grid item container xs={11}>\r\n                    <FilterFields />\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <MenuPopover\r\n                      refs={menuRef}\r\n                      icon={<MoreVertIcon />}\r\n                      listProps={{ dense: true }}\r\n                    >\r\n                      <ListItem style={{ justifyContent: 'center' }}>\r\n                        <ToggleButtonGroup exclusive\r\n                          style={{ height: '2.4em' }}\r\n                          size='small'\r\n                          value={view}\r\n                          onChange={(e, v) => handleViewChange(v)}\r\n                        >\r\n                          <ToggleButton value='table'>\r\n                            <ViewListIcon />\r\n                          </ToggleButton>\r\n                          <ToggleButton value='grid'>\r\n                            <ViewModuleIcon />\r\n                          </ToggleButton>\r\n                          <ToggleButton value='compact'>\r\n                            <ViewCompactIcon />\r\n                          </ToggleButton>\r\n                        </ToggleButtonGroup>\r\n                      </ListItem>\r\n\r\n                      <Divider style={{ marginTop: 8 }} />\r\n\r\n                      <ListSubheader className={classes.subheader}>\r\n                        {`${upperFirst(view)} View`}\r\n                      </ListSubheader>\r\n                      <MenuItem onClick={dispatch.toggleCardsSelectableEnabled}>\r\n                        <ListItemText\r\n                          primary={'Selection Mode'}\r\n                          secondary={cardsSelectableEnabled ? 'On' : 'Off'}\r\n                        />\r\n                      </MenuItem>\r\n                      <MenuItem onClick={dispatch.toggleCurrency}>\r\n                        <ListItemText\r\n                          primary={'Change Currency'}\r\n                          secondary={`Viewing ${currency.toUpperCase()}`}\r\n                        />\r\n                      </MenuItem>\r\n\r\n                      <span ref={menuItemRef} />  {/* placeholder for the view component to use <Portal> on */}\r\n                    </MenuPopover>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Grid item container wrap='nowrap' justifyContent='center' xs={12}>\r\n                  <CardPriceDataProvider data={collection}>\r\n                    <FilteredDataProvider>\r\n                      {\r\n                        (() => {\r\n                          const props = {\r\n                            menuItemRef,\r\n                            // {data} is passed to children from the <DataProvider> parents\r\n                          }\r\n                          switch (view) {\r\n                            default:\r\n                            case 'table':\r\n                              return <CardTableView {...props} />\r\n                            case 'grid':\r\n                              return <CardGridView {...props} />\r\n                            case 'compact':\r\n                              return <div>TBD</div>\r\n                          }\r\n                        })()\r\n                      }\r\n                    </FilteredDataProvider>\r\n                  </CardPriceDataProvider>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              {/* FLOATING ACTION BUTTONS */}\r\n              <div className={classes.fab}>\r\n                <MyFabs />\r\n              </div>\r\n            </>\r\n        }\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      Collection\r\n    )\r\n  )\r\n\r\nexport {\r\n  CardInfo,\r\n  Import,\r\n  Export,\r\n}","const useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  const leftRightPadding = theme.spacing(10)\r\n  const topBottomPadding = theme.spacing(8)\r\n  // const contrast = theme.palette.type === 'dark' ? '255,255,255' : '0,0,0'\r\n  // console.log(theme.palette)\r\n\r\n  return {\r\n    '@global': {\r\n      '#root': {\r\n        // display: 'flex',\r\n        // justifyContent: 'center',\r\n        // minHeight: '100vh',\r\n        // maxHeight: '100vh',\r\n        // height: '100vh',\r\n        // minWidth: '100wh',\r\n        maxWidth: '100wh',\r\n        width: '100wh',\r\n        // background: theme.palette.background.default,\r\n        // background: `linear-gradient(35deg, ${theme.palette.background.default} 20%, ${theme.palette.background.paper} 175%)`,\r\n        // background: `linear-gradient(35deg, ${theme.palette.background.paper} 10%, ${theme.palette.background.default} 225%)`,\r\n        // paddingTop: topBottomPadding,\r\n        // paddingBottom: topBottomPadding,\r\n        // paddingLeft: leftRightPadding,\r\n        // paddingRight: leftRightPadding,\r\n      }\r\n    },\r\n\r\n    root: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      // minHeight: '100vh',\r\n      // maxHeight: '100vh',\r\n      // minWidth: '100wh',\r\n      // maxWidth: '100wh',\r\n      // background: theme.palette.background.default,\r\n      // background: `linear-gradient(35deg, ${theme.palette.background.default} 20%, ${theme.palette.background.paper} 175%)`,\r\n      // background: `linear-gradient(35deg, ${theme.palette.background.paper} 10%, ${theme.palette.background.default} 225%)`,\r\n    },\r\n    content: {\r\n      overflow: 'visible', // !important\r\n      paddingTop: topBottomPadding,\r\n      // paddingBottom: topBottomPadding,\r\n      paddingLeft: leftRightPadding,\r\n      paddingRight: leftRightPadding,\r\n      // flexGrow: 1,\r\n      // maxWidth: '100wh',\r\n      // maxWidth: '95%',\r\n      // minHeight: '100vh',\r\n      // minHeight: `calc(100vh - ${topBottomPadding}px)`,\r\n      minHeight: '100vh',\r\n      // textAlign: '-webkit-center',\r\n      // display: 'flex',\r\n      // justifyContent: 'center',\r\n      // alignItems: 'center',\r\n      // paddingTop: topBottomPadding,\r\n      // paddingBottom: topBottomPadding,\r\n      // paddingLeft: leftRightPadding,\r\n      // paddingRight: leftRightPadding,\r\n      // boxShadow: theme.shadows[4]\r\n    },\r\n    bottomBar: {\r\n      // height: 'fit-content',\r\n      minHeight: topBottomPadding,\r\n      // maxHeight: topBottomPadding,\r\n      // padding: theme.spacing(1),\r\n\r\n      backgroundColor: theme.palette.primary.dark,\r\n      color: theme.palette.getContrastText(theme.palette.primary.dark),\r\n      // background: `linear-gradient(rgba(${contrast}, 0.17),rgba(${contrast}, 0.17)), ${theme.palette.background.default}`,\r\n      // boxShadow: 'rgba(17, 17, 26, 0.05) 0px 1px 0px, rgba(17, 17, 26, 0.1) 0px 0px 8px',\r\n      // boxShadow: `rgba(${contrast}, 0.5) 0px 2px 4px, rgba(${contrast}, 0.4) 0px 7px 13px -3px, rgba(${contrast}, 0.3) 0px -3px 0px inset`,\r\n      // boxShadow: 'rgba(0, 0, 0, 0.06) 0px 2px 4px 0px inset',\r\n      // boxShadow: 'rgba(17, 17, 26, 0.1) 0px 8px 24px, rgba(17, 17, 26, 0.1) 0px 16px 56px, rgba(17, 17, 26, 0.1) 0px 24px 80px',\r\n      // boxShadow: '      0px -2px 4px -1px rgb(0 0 0 / 20%), 0px -4px 5px 0px rgb(0 0 0 / 14%), 0px -1px 10px 0px rgb(0 0 0 / 12%)',\r\n      // boxShadow: '0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12)',\r\n      // boxShadow: 'rgba(0, 0, 0, 0.45) 0px -25px 20px -20px',\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { useEffect, createRef } from 'react'\r\nimport { Grid, Button, CssBaseline, ThemeProvider } from \"@material-ui/core\"\r\nimport { Close as CloseIcon } from '@material-ui/icons'\r\nimport { BrowserRouter as HashRouter, Switch, Route, Redirect } from \"react-router-dom\"\r\nimport { connect } from \"react-redux\"\r\nimport { makeStyles } from \"@material-ui/styles\"\r\nimport { SnackbarProvider } from 'notistack'\r\n// import { useHistory } from 'react-router-dom'\r\n\r\nimport { Collection, TopMenu, BottomBar, Login, Register, Home, Decks, Profile } from \"@/Components\"\r\nimport { Import, Export } from \"@/Components/Collection\"\r\nimport { MagicdexApi } from \"@/Api\"\r\nimport { setActiveUser } from \"@/Logic/redux\"\r\nimport useStyles from \"./styles\"\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  theme: state.actions.theme.currentTheme,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setActiveUser: (payload) => dispatch(setActiveUser(payload)),\r\n  }\r\n})\r\n\r\n\r\nconst App = ({\r\n  /** VARS **/\r\n  theme: _theme,\r\n  ...props\r\n}) => {\r\n  const {\r\n    dispatch,\r\n  } = props\r\n  const snackbarRef = createRef()\r\n  const theme = Object.assign({}, _theme)\r\n  const classes = makeStyles(useStyles(theme))()\r\n\r\n  const routes = [\r\n    {\r\n      component: Route,\r\n      props: {\r\n        path: '/',\r\n        component: Home,\r\n        exact: true,\r\n      }\r\n    },\r\n    {\r\n      component: Route,\r\n      props: {\r\n        path: '/collection',\r\n        component: Collection,\r\n        exact: true,\r\n      }\r\n    },\r\n    {\r\n      component: Route,\r\n      props: {\r\n        path: '/collection/import',\r\n        component: Import,\r\n        exact: true,\r\n      }\r\n    },\r\n    {\r\n      component: Route,\r\n      props: {\r\n        path: '/collection/export',\r\n        component: Export,\r\n        exact: true,\r\n      }\r\n    },\r\n    {\r\n      component: Route,\r\n      props: {\r\n        path: '/decks',\r\n        component: Decks,\r\n        exact: true,\r\n      }\r\n    },\r\n    {\r\n      component: Route,\r\n      props: {\r\n        path: '/login',\r\n        component: Login,\r\n        exact: true,\r\n      }\r\n    },\r\n    {\r\n      component: Route,\r\n      props: {\r\n        path: '/register',\r\n        component: Register,\r\n        exact: true,\r\n      }\r\n    },\r\n    {\r\n      component: Route,\r\n      props: {\r\n        path: '/profile',\r\n        component: Profile,\r\n        exact: true,\r\n      }\r\n    },\r\n    {\r\n      component: Redirect,\r\n      props: {\r\n        to: '/',\r\n        exact: false,\r\n      }\r\n    },\r\n  ]\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    // onMount\r\n    MagicdexApi.login() //try to login with `localStorage['accessToken']`\r\n      .then(res => {\r\n        dispatch.setActiveUser(res)\r\n        snackbarRef.current.enqueueSnackbar(`Welcome back ${res.username}`, { variant: 'info' })\r\n        // snackbarRef.current.enqueueSnackbar('Welcome back', { variant: 'info' })\r\n      })\r\n      .catch(err => dispatch.setActiveUser({ username: null }))\r\n  }, [])\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CssBaseline />\r\n      <SnackbarProvider\r\n        ref={snackbarRef}\r\n        autoHideDuration={3250}\r\n        maxSnack={3}\r\n        action={toastId => (\r\n          <Button\r\n            endIcon={<CloseIcon />}\r\n            onClick={e => snackbarRef.current.closeSnackbar(toastId)}\r\n            color=\"inherit\"\r\n          >\r\n            Dismiss\r\n          </Button>\r\n        )}\r\n      >\r\n        <Grid container component={HashRouter} justifyContent='center' alignItems='flex-start'>\r\n          <Grid item xs={12}\r\n            component={TopMenu}\r\n          />\r\n\r\n          <Grid item xs={12} align='center' className={classes.content}>\r\n            <Switch>\r\n              {\r\n                routes.map((item, i) => (\r\n                  <item.component\r\n                    key={i}\r\n                    {...item.props}\r\n                  />\r\n                ))\r\n              }\r\n            </Switch>\r\n          </Grid>\r\n\r\n          <Grid item container justifyContent='center' alignItems='center' xs={12} className={`${classes.bottomBar} MuiPaper-elevation8`}>\r\n            <BottomBar />\r\n          </Grid>\r\n        </Grid>\r\n      </SnackbarProvider>\r\n    </ThemeProvider>\r\n  )\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App)","\r\nconst useStyles = (theme) => {\r\n    // const bottomBarHeight = '50px'\r\n    // const mainSidesPadding = theme.spacing(10)\r\n  \r\n    return {\r\n      icon: {\r\n      },\r\n      popover: {\r\n      },\r\n      paper: {\r\n        minWidth: theme.spacing(20),\r\n      },\r\n      // contentShift: {\r\n      //   transition: theme.transitions.create('margin', {\r\n      //     easing: theme.transitions.easing.easeOut,\r\n      //     duration: theme.transitions.duration.enteringScreen,\r\n      //   }),\r\n      //   marginLeft: 0,\r\n      // },\r\n      // listItemText: {\r\n      //   marginRight: theme.spacing(1),\r\n      // },\r\n      // ListItemIcon: {\r\n      //   marginRight: theme.spacing(2.5),\r\n      //   width: 'auto',\r\n      //   minWidth: 'auto',\r\n      // },\r\n    }\r\n  }\r\n  \r\n  export default useStyles","import { useImperativeHandle, useRef } from 'react'\r\nimport { ClickAwayListener, IconButton, List, Paper, Popover } from '@material-ui/core'\r\nimport { useState, useEffect } from 'react'\r\nimport { withStyles } from '@material-ui/styles'\r\n\r\nimport useStyles from './styles'\r\n\r\n\r\nconst MenuPopover = ({\r\n  /** VARS **/\r\n  refs,\r\n  icon,\r\n  iconButtonProps,\r\n  popoverProps,\r\n  listProps,\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    children,\r\n    // ...rest\r\n  } = props\r\n\r\n  const iconButtonRef = useRef()\r\n  const [Icon, setIcon] = useState(icon)\r\n\r\n  const [menuAnchor, setMenuAnchor] = useState(null)\r\n  const menuOpen = Boolean(menuAnchor)\r\n\r\n\r\n  /** EFFECTS **/\r\n  useImperativeHandle(refs, () => ({\r\n    openMenu: () => { handleMenuOpen(iconButtonRef) },\r\n    closeMenu: () => { handleMenuClose(null) },\r\n  }))\r\n\r\n  useEffect(() => {\r\n    setIcon(icon)\r\n  }, [icon])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleIconClick = (e) => {\r\n    handleMenuOpen(e.currentTarget)\r\n    e.stopPropagation()\r\n  }\r\n\r\n  const handleMenuOpen = (menuAnnchor) => {\r\n    setMenuAnchor(menuAnnchor)\r\n  }\r\n\r\n  const handleMenuClose = (e) => {\r\n    setMenuAnchor(null)\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <>\r\n      <IconButton\r\n        color=\"inherit\"\r\n        className={classes.icon}\r\n        ref={iconButtonRef}\r\n        onClick={handleIconClick}\r\n        {...iconButtonProps}\r\n      >\r\n        {Icon}\r\n      </IconButton>\r\n\r\n      <Popover keepMounted\r\n        ref={refs}\r\n        className={classes.popover}\r\n        open={menuOpen}\r\n        anchorEl={menuAnchor}\r\n        onClose={handleMenuClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'center',\r\n        }}\r\n        {...popoverProps}\r\n      >\r\n        <Paper className={classes.paper}>\r\n          <ClickAwayListener onClickAway={handleMenuClose}>\r\n            <List {...listProps}>\r\n              {children}\r\n            </List>\r\n          </ClickAwayListener>\r\n        </Paper>\r\n      </Popover>\r\n    </>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    MenuPopover\r\n  )\r\n","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    root: {\r\n      position: 'absolute',\r\n    },\r\n    appBar: {\r\n      // position: \"inherit\",\r\n      paddingLeft: mainSidesPadding,\r\n      paddingRight: mainSidesPadding,\r\n      // backgroundColor: theme.palette.type === 'dark' ? 'rgba(0,0,0,0.25)' : theme.palette.primary,\r\n      // backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary : theme.palette.primary,\r\n      // color: theme.palette.text.primary,\r\n      // transition: theme.transitions.create(['margin', 'width'], {\r\n      //   easing: theme.transitions.easing.sharp,\r\n      //   duration: theme.transitions.duration.leavingScreen,\r\n      // }),\r\n    },\r\n    iconButton: {\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    dropdown_tab: {\r\n      display: 'flex',\r\n      whiteSpace: 'nowrap',\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      // '&:hover':{\r\n      //   backgroundColor: 'transparent',\r\n      // },\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","import { useRef } from \"react\"\r\nimport { AppBar, Tabs, Tab, Grid, MenuItem, Divider, ListSubheader, ListItem, ListItemText, ListItemSecondaryAction, Switch } from \"@material-ui/core\"\r\nimport { withStyles } from \"@material-ui/styles\"\r\nimport {\r\n  Menu as MenuIcon,\r\n  AccountCircle as AccountCircleIcon,\r\n  Settings as SettingsIcon,\r\n  // ArrowDropDown as ArrowDropDownIcon,\r\n} from '@material-ui/icons'\r\nimport { connect } from \"react-redux\"\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useSnackbar } from \"notistack\"\r\n\r\nimport { MenuPopover } from '@/Components'\r\nimport { setActiveUser, toggleThemeType } from \"@/Logic/redux\"\r\nimport useStyles from \"./styles\"\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  themeType: state.actions.theme.themeType,\r\n  username: state.actions.activeUser.username,\r\n  currentTab: state.actions.app.topMenu.currentTab,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  'dispatch': {\r\n    toggleThemeType: (payload) => dispatch(toggleThemeType(payload)),\r\n    setActiveUser: (payload) => dispatch(setActiveUser(payload)),\r\n  }\r\n})\r\n\r\n\r\nconst TopMenu = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    currentTab,\r\n    themeType,\r\n    username,\r\n  } = props\r\n  const history = useHistory()\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const menuRef = useRef()\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleTabChange = (event, value) => {\r\n    // dispatch.setCurrentTab({tab:value});\r\n    history.push('/' + value)\r\n  }\r\n\r\n  const handleMenuItemClick = (e) => {\r\n    let goto = e.currentTarget.attributes.goto?.value\r\n    let id = e.currentTarget.attributes.id?.value\r\n\r\n    switch (id) {\r\n      default:\r\n        menuRef.current?.closeMenu()\r\n        break\r\n\r\n      case 'profile':\r\n      case 'login':\r\n      case 'register':\r\n        menuRef.current?.closeMenu()\r\n        history.push(goto)\r\n        break\r\n\r\n      case 'logout':\r\n        // menuRef.current?.closeMenu()\r\n        dispatch.setActiveUser({ username: null })\r\n        enqueueSnackbar('Logged out', { variant: \"info\" })\r\n        break\r\n\r\n      case 'mode':\r\n        dispatch.toggleThemeType()\r\n        break\r\n    }\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar className={classes.appBar}>\r\n        <Grid container wrap='nowrap' justifyContent='space-between'>\r\n          <Grid item>\r\n            <Tabs variant='scrollable' value={currentTab} onChange={handleTabChange}>\r\n              <Tab value='home' label='Home' />\r\n              <Tab value='collection' label='Collection' />\r\n              <Tab value='decks' label='Decks' />\r\n\r\n              <Tab value='profile' style={{ display: 'none' }} />\r\n              <Tab value='login' style={{ display: 'none' }} />\r\n              <Tab value='register' style={{ display: 'none' }} />\r\n            </Tabs>\r\n          </Grid>\r\n\r\n          <Grid item>\r\n            <MenuPopover refs={menuRef} icon={() => <MenuIcon />}>\r\n              <ListSubheader>\r\n                <AccountCircleIcon />\r\n                {username ?? 'Account'}\r\n              </ListSubheader>\r\n              {\r\n                username\r\n                  ?\r\n                  <>\r\n                    <MenuItem onClick={handleMenuItemClick} id='profile' goto='/profile'>Personal Info</MenuItem>\r\n                    <MenuItem onClick={handleMenuItemClick} id='logout'>Logout</MenuItem>\r\n                  </>\r\n                  :\r\n                  <>\r\n                    <MenuItem onClick={handleMenuItemClick} id='login' goto='/login'>Login</MenuItem>\r\n                    <MenuItem onClick={handleMenuItemClick} id='register' goto='/register'>Register</MenuItem>\r\n                  </>\r\n              }\r\n\r\n              <Divider />\r\n\r\n              <ListSubheader>\r\n                <SettingsIcon />\r\n                Settings\r\n              </ListSubheader>\r\n\r\n              <ListItem style={{ paddingTop: 0, paddingBottom: 0 }}>\r\n                <ListItemText primary='Toggle Theme' secondary={themeType} />\r\n                <ListItemSecondaryAction>\r\n                  <Switch\r\n                    // color='primary'\r\n                    edge='end'\r\n                    checked={themeType === 'dark'}\r\n                    onChange={handleMenuItemClick}\r\n                    id='mode'\r\n                  />\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n            </MenuPopover>\r\n          </Grid>\r\n        </Grid>\r\n      </AppBar>\r\n    </div>\r\n  )\r\n}\r\n\r\n/** EXPORT WITH HOOKS AND DECORATORS **/\r\nexport default\r\n  connect(mapStateToProps, mapDispatchToProps)(\r\n    withStyles(useStyles)(\r\n      TopMenu\r\n    )\r\n  )","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    root: {\r\n      position: 'relative',\r\n      borderRadius: '4.75% / 3.5%',\r\n    },\r\n    loading: {\r\n      position: 'absolute',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      top: 0,\r\n      left: 0,\r\n      color: 'white',\r\n      background: 'url(cardback.png) 0 0 / cover',\r\n      // background: 'linear-gradient(rgba(60,60,60,0.7),rgba(60,60,60,0.7)), url(cardback.png) 0 0 / cover',\r\n      opacity: 0.65,\r\n      backgroundSize: 'cover',\r\n      borderRadius: '4.75% / 3.5%',\r\n    },\r\n    base: {\r\n      borderRadius: '4.75% / 3.5%',\r\n      position: 'absolute',\r\n      top: 0,\r\n      left: 0,\r\n    },\r\n    overlay: {\r\n      borderRadius: '4.75% / 3.5%',\r\n      position: 'absolute',\r\n      top: 0,\r\n      left: 0,\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","import { useState, useEffect } from 'react'\r\nimport { CircularProgress, FormControlLabel } from '@material-ui/core'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport clsx from 'clsx'\r\n\r\nimport useStyles from './styles'\r\n\r\n\r\nconst ImageOverlay = ({\r\n  /** VARS **/\r\n  name = 'Loading..',\r\n  rootProps,\r\n  baseSrc,\r\n  baseProps,\r\n  overlaySrc,\r\n  overlayEnabled,\r\n  overlayProps,\r\n  width,\r\n  height,\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    ...rest\r\n  } = props\r\n  const [isLoaded, setLoaded] = useState(false)\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    setLoaded(false)\r\n  }, [baseSrc])\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <div\r\n      className={classes.root}\r\n      style={{ width: width, height: height }}\r\n      {...rootProps}\r\n      {...rest}\r\n    >\r\n      {\r\n        !isLoaded &&\r\n        <div\r\n          className={classes.loading}\r\n          style={{\r\n            // zIndex: 69, // nice\r\n            width: width,\r\n            height: height,\r\n          }}\r\n        >\r\n          <FormControlLabel\r\n            control={<CircularProgress />}\r\n            labelPlacement={'bottom'}\r\n            label={(\r\n              <span style={{ fontSize: '0.9rem' }}>\r\n                {name}\r\n              </span>\r\n            )}\r\n          />\r\n        </div>\r\n      }\r\n\r\n      <img\r\n        width={width}\r\n        height={height}\r\n        src={baseSrc}\r\n        alt='base'\r\n        {...baseProps}\r\n        className={clsx(classes.base, baseProps?.className)}\r\n        onLoad={(e) => setLoaded(true)}\r\n        style={{ display: isLoaded ? '' : 'none' }}\r\n      />\r\n\r\n      {\r\n        overlayEnabled &&\r\n        <img\r\n          width={width}\r\n          height={height}\r\n          src={overlaySrc}\r\n          alt='overlay'\r\n          {...overlayProps}\r\n          className={clsx(classes.overlay, overlayProps?.className)}\r\n        />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    ImageOverlay\r\n  )","\r\nconst useStyles = (theme) => {\r\n  return {\r\n    root: {\r\n      position: 'relative',\r\n      overflow: 'visible',\r\n      transition: 'all 0.33s cubic-bezier(0.75, 0, 0.25, 1)',\r\n    },\r\n    face: {\r\n      position: 'absolute',\r\n      top: 0,\r\n      left: 0,\r\n    },\r\n    front: {\r\n    },\r\n    back: {\r\n      transform: 'scaleX(-1)'\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","import { useEffect, useState } from 'react'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport clsx from 'clsx'\r\n\r\nimport ImageOverlay from '../ImageOverlay'\r\nimport useStyles from './styles'\r\n\r\n\r\nconst TransformableCard = ({\r\n  /** VARS **/\r\n  card,\r\n  flipped: _flipped,\r\n  width,\r\n  height,\r\n  imageProps,\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n  } = props\r\n  const [flipped, setFlipped] = useState(_flipped)\r\n  const [scaleX, setScaleX] = useState('1')\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    setScaleX(_flipped ? '-1' : '1')\r\n\r\n    setTimeout(() => {\r\n      setFlipped(_flipped)\r\n    }, 150)\r\n\r\n  }, [_flipped])\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <div\r\n      className={classes.root}\r\n      style={{\r\n        width: width || '250px',\r\n        height: height || '350px',\r\n        transform: `scaleX(${scaleX})`,\r\n      }}\r\n    >\r\n\r\n      <div className={clsx(classes.face, classes.front)} style={{ display: flipped ? 'none' : 'unset' }}>\r\n        <ImageOverlay\r\n          overlayEnabled={card.foil}\r\n          baseProps={{ alt: card?.card_faces[0]?.name }}\r\n          baseSrc={card.card_faces[0].image_uris.png}\r\n          overlaySrc='/foil-overlay.png'\r\n          overlayProps={{ style: { opacity: 0.65 } }}\r\n          name={card?.card_faces[0]?.name}\r\n          width={250}\r\n          height={350}\r\n          {...imageProps}\r\n        />\r\n      </div>\r\n\r\n      <div className={clsx(classes.face, classes.back)} style={{ display: !flipped ? 'none' : 'unset' }}>\r\n        <ImageOverlay\r\n          overlayEnabled={card.foil}\r\n          baseProps={{ alt: card?.card_faces[0]?.name }}\r\n          baseSrc={card.card_faces[1].image_uris.png}\r\n          overlaySrc='/foil-overlay.png'\r\n          overlayProps={{ style: { opacity: 0.65 } }}\r\n          name={card?.card_faces[0]?.name}\r\n          width={250}\r\n          height={350}\r\n          {...imageProps}\r\n        />\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    TransformableCard\r\n  )","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n  // console.log({ palette: theme.palette })\r\n\r\n  return {\r\n    imageContainer: {\r\n      zIndex: 1,\r\n      position: 'relative',\r\n      transition: 'all 0.4s cubic-bezier(0.75, 0, 0.25, 1)',\r\n    },\r\n    dfcSymbol: {\r\n      fontSize: '1.5em',\r\n      position: 'absolute',\r\n      top: '2.5%',\r\n      left: '2.5%',\r\n    },\r\n    checkboxContainer: {\r\n      position: 'absolute',\r\n      top: '4%',\r\n      right: '5%',\r\n      // borderRadius: '20%',\r\n      // border: `1px solid ${theme.palette.action.hover}`,\r\n      // backgroundColor: theme.palette.action.active,\r\n      // margin: 0,\r\n      // padding: 0,\r\n      // '&:hover': {\r\n      //   backgroundColor: theme.palette.action.hover,\r\n      // },\r\n    },\r\n    checkbox: {\r\n      // padding: 1.5,\r\n      // margin: 2,\r\n      // backgroundColor: theme.palette.action.active,\r\n      // borderRadius: '15%',\r\n      transform: 'scale(1.5)'\r\n    },\r\n    priceContainer: {\r\n      marginTop: theme.spacing(1),\r\n    },\r\n    buttonContainer: {\r\n      marginTop: theme.spacing(1),\r\n    },\r\n    buttonThridly: {\r\n      color: '#fff',\r\n      backgroundColor: '#9c27b0',\r\n      '&:hover': {\r\n        backgroundColor: '#7b1fa2',\r\n      },\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Button, Grid, useMediaQuery, Tooltip } from '@material-ui/core'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport { connect } from 'react-redux'\r\nimport Tilt from 'react-parallax-tilt'\r\n\r\nimport { addSelectedCardIds, removeSelectedCardIds } from '@/Logic/redux'\r\nimport RenderCell from '@/CardRenders'\r\nimport ImageOverlay from './ImageOverlay'\r\nimport TransformableCard from './TransformableCard'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  selectedCardIds: state.actions.app.collection.selectedCardIds,\r\n  cardsSelectableEnabled: state.actions.app.collection.cardsSelectableEnabled,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    addSelectedCardId: (id) => dispatch(addSelectedCardIds({ id })),\r\n    removeSelectedCardId: (id) => dispatch(removeSelectedCardIds({ id })),\r\n  }\r\n})\r\n\r\n\r\n/** CUSTOM TOOLTIP **/\r\nconst MyTooltip = withStyles((theme) => ({\r\n  tooltip: {\r\n    backgroundColor: theme.palette.type === 'dark' ? '#787878' : '#909090',\r\n    fontSize: theme.typography.pxToRem(12.25),\r\n    boxShadow: theme.shadows[2],\r\n  },\r\n  arrow: {\r\n    color: theme.palette.type === 'dark' ? '#787878' : '#909090',\r\n  }\r\n}))(({\r\n  arrow = true,\r\n  enterDelay = 500,\r\n  placement = 'right',\r\n  ...props\r\n}) =>\r\n  <Tooltip placement={placement} arrow={arrow} enterDelay={enterDelay} {...props} />\r\n)\r\n\r\n\r\nconst CardImage = ({\r\n  /** VARS **/\r\n  card,\r\n  width = 250,\r\n  height = 350,\r\n  rootProps,\r\n  imageProps,\r\n  buttonProps,\r\n  tiltProps,\r\n  tiltEnabled = false,\r\n  transform3dEnabled = false,\r\n  packTransformButton = false,\r\n  showPrice = false,\r\n  showCheckbox = false,\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    selectedCardIds,\r\n    cardsSelectableEnabled,\r\n  } = props\r\n  const md = useMediaQuery(theme => theme.breakpoints.down('md'))\r\n  const [flipped, setFlipped] = useState(false)\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    setFlipped(false)\r\n  }, [card])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleRootClick = e => {\r\n    rootProps?.onClick && rootProps.onClick(e)\r\n  }\r\n\r\n  const handleTransform = (setValueTo = undefined) => (e) => {\r\n    setFlipped(setValueTo ?? !flipped)\r\n  }\r\n\r\n  const handleCheckboxChange = (card) => (e) => {\r\n    e.target.checked\r\n      ? dispatch.addSelectedCardId(card._id)\r\n      : dispatch.removeSelectedCardId(card._id)\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid container direction=\"column\" {...rootProps} onClick={handleRootClick}>\r\n\r\n      {/** IMAGE PREVIEW **/}\r\n      <Grid item\r\n        className={classes.imageContainer}\r\n        style={{\r\n          transform: flipped && (\r\n            card.is_split\r\n              ? `rotate(90deg) scale(0.825) translateX(-35%) translateY(${md ? '2%' : '7%'})`\r\n              : card.is_flip\r\n                ? 'rotate(180deg)'\r\n                : ''\r\n          ),\r\n        }}\r\n      >\r\n        <Tilt\r\n          tiltEnable={tiltEnabled}\r\n          glareEnable={tiltEnabled}\r\n          tiltMaxAngleX={10}\r\n          tiltMaxAngleY={10}\r\n          glareBorderRadius='4.75% / 3.5%'\r\n          glarePosition='all'\r\n          glareMaxOpacity={0.13}\r\n          onEnter={(card?.is_transform || card?._isDoublesided) && packTransformButton && handleTransform(true)}\r\n          onLeave={(card?.is_transform || card?._isDoublesided) && packTransformButton && handleTransform(false)}\r\n          {...tiltProps}\r\n        >\r\n          {\r\n            (card?.is_transform || card?._isDoublesided)\r\n              // double faced card\r\n              ? transform3dEnabled\r\n                ? <TransformableCard\r\n                  flipped={flipped}\r\n                  width={width}\r\n                  height={height}\r\n                  card={card}\r\n                  imageProps={imageProps}\r\n                />\r\n                : <ImageOverlay\r\n                  overlayEnabled={card?.foil}\r\n                  baseProps={{ alt: card?.name }}\r\n                  baseSrc={\r\n                    card && card.hasOwnProperty('image_uris')\r\n                      ? card.card_faces[flipped ? 1 : 0].image_uris?.png ?? card.card_faces[flipped ? 1 : 0].image_uris?.large ?? card.card_faces[flipped ? 1 : 0].image_uris?.normal\r\n                      : '/cardback.png'\r\n                  }\r\n                  overlaySrc='/foil-overlay.png'\r\n                  overlayProps={{ style: { opacity: 0.65 } }}\r\n                  name={card?.card_faces[flipped ? 1 : 0]?.name}\r\n                  width={width}\r\n                  height={height}\r\n                  {...imageProps}\r\n                />\r\n              :\r\n              // single faced card\r\n              <ImageOverlay\r\n                overlayEnabled={card?.foil}\r\n                baseProps={{ alt: card?.name }}\r\n                baseSrc={\r\n                  card && card.hasOwnProperty('image_uris')\r\n                    ? card.image_uris?.png ?? card.image_uris?.large ?? card.image_uris?.normal\r\n                    : '/cardback.png'\r\n                }\r\n                overlaySrc='/foil-overlay.png'\r\n                overlayProps={{ style: { opacity: 0.65 } }}\r\n                name={card?.name}\r\n                width={width}\r\n                height={height}\r\n                {...imageProps}\r\n              />\r\n          }\r\n\r\n          {\r\n            showCheckbox && (selectedCardIds.includes(card?._id) || cardsSelectableEnabled) &&\r\n            <span className={classes.checkboxContainer} onClick={e => e.stopPropagation()}>\r\n              <input\r\n                type='checkbox'\r\n                checked={selectedCardIds.includes(card._id)}\r\n                className={classes.checkbox}\r\n                onChange={handleCheckboxChange(card)}\r\n              />\r\n            </span>\r\n          }\r\n\r\n        </Tilt>\r\n      </Grid>\r\n\r\n      {/** PRICE **/}\r\n      {\r\n        showPrice &&\r\n        <Grid item align='center' className={classes.priceContainer}>\r\n          {\r\n            card.price > 0\r\n              ? card.amount > 1\r\n                ? [\r\n                  <MyTooltip key='one' title='Price for x1' placement='left'>\r\n                    <span>\r\n                      <RenderCell\r\n                        card={card}\r\n                        columnName='price'\r\n                      />\r\n                    </span>\r\n                  </MyTooltip>,\r\n                  ' / ',\r\n                  <MyTooltip key='multiple' title={`Price for x${card.amount}`}>\r\n                    <span>\r\n                      <RenderCell\r\n                        card={card}\r\n                        columnName='total_price'\r\n                      />\r\n                    </span>\r\n                  </MyTooltip>,\r\n                ]\r\n                : <MyTooltip title='Price for x1'>\r\n                  <span>\r\n                    <RenderCell\r\n                      card={card}\r\n                      columnName='price'\r\n                    />\r\n                  </span>\r\n                </MyTooltip>\r\n              : <MyTooltip title='No Price Available'>\r\n                <span>\r\n                  {'-'}\r\n                </span>\r\n              </MyTooltip>\r\n          }\r\n        </Grid>\r\n      }\r\n\r\n      {/** TRANSFORM BUTTON **/}\r\n      {\r\n        ((card?.is_transform || card?._isDoublesided) || card?.is_split || card?.is_flip) && !packTransformButton && (\r\n          <Grid item align='center' className={classes.buttonContainer}>\r\n            <Button\r\n              className={classes.buttonThridly}\r\n              variant='contained'\r\n              size='small'\r\n              onClick={handleTransform()}\r\n              {...buttonProps}\r\n            >\r\n              {\r\n                (\r\n                  (card?.is_transform || card?._isDoublesided)\r\n                    ? 'Transform'\r\n                    : card.is_split\r\n                      ? 'Rotate'\r\n                      : card.is_flip\r\n                        ? 'Flip'\r\n                        : ''\r\n                ) + (flipped ? ' ↪' : ' ↩')\r\n              }\r\n            </Button>\r\n          </Grid>\r\n        )\r\n      }\r\n    </Grid >\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      CardImage\r\n    )\r\n  )","\r\nconst useStyles = (theme) => {\r\n  // const bottomBarHeight = '50px'\r\n  // const mainSidesPadding = theme.spacing(10)\r\n\r\n  return {\r\n    root: {},\r\n    appBar: {\r\n      // height: '100%',\r\n      // width: '100%',\r\n      marginLeft: theme.spacing(2),\r\n      marginRight: theme.spacing(2),\r\n      // margin: 0,\r\n      // position: \"inherit\",\r\n      // textAlign: 'center',\r\n      // verticalAlign: 'middle',\r\n      // backgroundColor: theme.palette.type === 'dark' ? 'rgba(0,0,0,0.25)' : theme.palette.primary,\r\n      // backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary : theme.palette.primary,\r\n      // color: theme.palette.text.primary,\r\n      // transition: theme.transitions.create(['margin', 'width'], {\r\n      //   easing: theme.transitions.easing.sharp,\r\n      //   duration: theme.transitions.duration.leavingScreen,\r\n      // }),\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","import { withStyles } from '@material-ui/styles'\r\nimport { Grid, Typography } from '@material-ui/core'\r\n\r\nimport useStyles from './styles'\r\n\r\n\r\nconst BottomBar = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n  } = props\r\n\r\n  const Link = ({ href, children }) => <a rel='noreferrer' target='_blank' href={href}>{children}</a>\r\n  const LooLzzz = () => <Link href='https://github.com/LooLzzz'>LooLzzz</Link>\r\n  const Bedopear = () => <Link href='https://github.com/Yarintop'>Bedopear</Link>\r\n  const Scryfall = () => <Link href='https://scryfall.com/'>Scryfall.com</Link>\r\n  const ScryfallClient = () => <Link href='https://www.npmjs.com/package/scryfall-client'>Scryfall-Client</Link>\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid item container justifyContent='center' alignContent='center' align='center' className={classes.appBar} spacing={1}>\r\n      <Grid item xs={12}\r\n        component={Typography} variant='caption'\r\n      >\r\n        Made with <span style={{ color: 'red' }}>❤</span> by <LooLzzz /> and <Bedopear />\r\n      </Grid>\r\n      <Grid item xs={12}\r\n        component={Typography} variant='caption'\r\n      >\r\n        Powered by <Scryfall /> via <ScryfallClient />\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    BottomBar\r\n  )","\r\nconst useStyles = (theme) => {\r\n  // const topBottomPadding = theme.spacing(8)\r\n\r\n  return {\r\n    root: {\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-lone-blocks */\r\n\r\nimport { useEffect } from 'react'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport { connect } from 'react-redux'\r\nimport { useHistory } from 'react-router'\r\n\r\nimport { setCurrentTab } from '@/Logic/redux'\r\nimport useStyles from './styles'\r\n\r\n\r\n// TODO: complete `Decks` component\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  username: state.actions.activeUser.username,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setCurrentTab: (payload) => dispatch(setCurrentTab(payload)),\r\n  }\r\n})\r\n\r\n\r\nconst Decks = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    username,\r\n  } = props\r\n  const history = useHistory()\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    //onMount\r\n    dispatch.setCurrentTab({ tab: 'decks' })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!username)\r\n      return history.push('/login')\r\n  }, [username])\r\n\r\n\r\n  /** HANDLERS **/\r\n  { }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <div className={classes.root}>\r\n      hello from Decks\r\n    </div>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      Decks\r\n    )\r\n  )","\r\nconst useStyles = (theme) => {\r\n  // const topBottomPadding = theme.spacing(8)\r\n\r\n  return {\r\n    root: {\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-lone-blocks */\r\n\r\nimport { useEffect } from 'react'\r\nimport { withStyles } from '@material-ui/styles'\r\nimport { connect } from 'react-redux'\r\nimport { useHistory } from 'react-router'\r\n\r\nimport { setCurrentTab } from '@/Logic/redux'\r\nimport useStyles from './styles'\r\n\r\n\r\n// TODO: complete `Profile` component\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  username: state.actions.activeUser.username,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setCurrentTab: (payload) => dispatch(setCurrentTab(payload)),\r\n  }\r\n})\r\n\r\n\r\nconst Profile = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    username,\r\n  } = props\r\n  const history = useHistory()\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    //onMount\r\n    dispatch.setCurrentTab({ tab: 'profile' })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!username)\r\n      return history.push('/login')\r\n  }, [username])\r\n\r\n\r\n  /** HANDLERS **/\r\n  { }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <div className={classes.root}>\r\n      hello from Profile\r\n    </div>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      Profile\r\n    )\r\n  )","const useStyles = (theme) => {\r\n  const iconSize = \"4.5em\"\r\n\r\n  return {\r\n    root: {\r\n      padding: theme.spacing(3),\r\n      paddingBottom: 0,\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      flexDirection: \"column\",\r\n\r\n      // minHeight: '80vh',\r\n    },\r\n    header: {\r\n      // alignSelf: \"flex-end\",\r\n      textTransform: \"uppercase\",\r\n      fontWeight: \"bold\",\r\n      width: '100%',\r\n    },\r\n    icon: {\r\n      fontSize: iconSize,\r\n      alignSelf: \"flex-start\",\r\n      position: \"relative\",\r\n      // color: theme.palette.primary.light,\r\n      zIndex: 1,\r\n    },\r\n    divider1: {\r\n      bottom: `calc(${iconSize} - 0.55em)`,\r\n      marginBottom: theme.spacing(3),\r\n      width: `calc(100% + 2*${theme.spacing(3)}px)`,\r\n      position: \"relative\",\r\n      zIndex: 0,\r\n    },\r\n    divider2: {\r\n      marginBottom: theme.spacing(3),\r\n      width: `calc(100% + 2*${theme.spacing(3)}px)`,\r\n      position: \"relative\",\r\n      zIndex: 0,\r\n    },\r\n    bottom: {\r\n      position: \"relative\",\r\n      bottom: \"2em\",\r\n      width: '100%',\r\n      // display: \"flex\",\r\n      // justifyContent: \"center\",\r\n      // alignItems: \"center\",\r\n      // flexDirection: \"column\",\r\n    },\r\n    content: {\r\n      width: '100%',\r\n      paddingBottom: theme.spacing(2),\r\n    },\r\n    actions: {\r\n      width: '100%',\r\n      alignSelf: \"flex-end\",\r\n    },\r\n  }\r\n}\r\n\r\nexport default useStyles\r\n","import { useEffect, useState } from 'react'\r\nimport { Paper, Divider, Grid, Typography, Dialog, DialogContent, CircularProgress } from '@material-ui/core'\r\nimport { withStyles } from \"@material-ui/styles\"\r\nimport { ValidatorForm } from 'react-material-ui-form-validator'\r\n\r\nimport useStyles from './styles'\r\n\r\n\r\nconst BaseForm = ({\r\n  /** VARS **/\r\n  validationRules = {},\r\n  header,\r\n  icon,\r\n  content,\r\n  actions,\r\n  headerProps = {},\r\n  iconProps = {},\r\n  contentProps = {},\r\n  actionsProps = {},\r\n  formRef,\r\n  disableBackdrop = false,\r\n  onSubmit = async (e) => Promise.resolve(),\r\n  onError = (err) => { console.error(err) },\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    ...rest\r\n  } = props\r\n  const [Header, setHeader] = useState([])\r\n  const [Icon, setIcon] = useState([])\r\n  const [Content, setContent] = useState([])\r\n  const [Actions, setActions] = useState([])\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    const rules = validationRules\r\n\r\n    Object.entries(rules).forEach(item => {\r\n      const [key, value] = item\r\n      if (!ValidatorForm.hasValidationRule(key))\r\n        ValidatorForm.addValidationRule(key, value)\r\n    })\r\n  }, [validationRules])\r\n\r\n  useEffect(() => {\r\n    setHeader(header)\r\n    setIcon(icon)\r\n    setContent(content)\r\n    setActions(actions)\r\n  }, [header, icon, content, actions])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleSubmit = async (e) => {\r\n    setIsLoading(true)\r\n\r\n    try {\r\n      await onSubmit(e)\r\n    }\r\n    catch (err) {\r\n      onError(err)\r\n    }\r\n    finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <>\r\n      <Paper component={ValidatorForm} ref={formRef}\r\n        className={classes.root} elevation={8}\r\n        onSubmit={handleSubmit} onError={onError} {...rest}\r\n      >\r\n        <Typography variant='h4' align='right' className={classes.header} {...headerProps}>\r\n          {Header}\r\n        </Typography>\r\n\r\n        <div className={classes.icon} {...iconProps}>\r\n          {Icon}\r\n        </div>\r\n        <Divider className={classes.divider1} />\r\n\r\n        <Grid container direction='column' justifyContent='center' alignItems='center' className={classes.bottom}>\r\n          <Grid item xs={12} className={classes.content} {...contentProps}>\r\n            {Content}\r\n          </Grid>\r\n          <Grid item xs={12} className={classes.actions} {...actionsProps}>\r\n            {Actions}\r\n          </Grid>\r\n        </Grid>\r\n\r\n      </Paper>\r\n\r\n      {\r\n        !disableBackdrop &&\r\n        <Dialog open={isLoading}>\r\n          <DialogContent>\r\n            <CircularProgress />\r\n          </DialogContent>\r\n        </Dialog>\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    BaseForm\r\n  )","const useStyles = (theme) => {\r\n  const topBottomPadding = theme.spacing(8)\r\n\r\n  return {\r\n    root: {\r\n      minHeight: `calc(100vh - 2*${topBottomPadding}px)`,\r\n      // width: '40vw',\r\n      // flexDirection: \"column\",\r\n      justifyContent: \"center\",\r\n      alignItems: 'center',\r\n      display: 'flex',\r\n      flexGrow: 1,\r\n    },\r\n    errorMessages: {\r\n      color: theme.palette.error.main,\r\n      fontSize: '0.75rem',\r\n    },\r\n    // paper: {\r\n    //   padding: theme.spacing(3),\r\n    //   display: 'flex',\r\n    //   justifyContent: \"center\",\r\n    //   alignItems: 'center',\r\n    //   // flexDirection: \"column\",\r\n    //   // flexGrow: 0.1,\r\n    // },\r\n  }\r\n}\r\n\r\nexport default useStyles;","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { useEffect, useState, useRef } from 'react'\r\nimport { Box, Button, Grid } from '@material-ui/core'\r\n// import { AccountCircle as AccountCircleIcon } from '@material-ui/icons';\r\nimport { withStyles } from \"@material-ui/styles\"\r\nimport { connect } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { TextValidator } from 'react-material-ui-form-validator'\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport { MagicdexApi } from '@/Api'\r\nimport { setActiveUser, setCurrentTab } from '@/Logic/redux'\r\nimport { BaseForm } from './..'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  username: state.actions.activeUser.username,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setActiveUser: (payload) => dispatch(setActiveUser(payload)),\r\n    setCurrentTab: (payload) => dispatch(setCurrentTab(payload)),\r\n  }\r\n})\r\n\r\n\r\nconst Login = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    username,\r\n  } = props\r\n  const history = useHistory()\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const formRef = useRef()\r\n\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [errorMessages, setErrorMessages] = useState([])\r\n  const [usernameInput, setUsernameInput] = useState('')\r\n  const [passwordInput, setPasswordInput] = useState('')\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    //onMount\r\n    dispatch.setCurrentTab({ tab: 'login' })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (username)\r\n      history.push('/')\r\n  }, [username])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleSubmit = async (e) => {\r\n    let res = null\r\n    setErrorMessages([])\r\n    setIsLoading(true)\r\n    setPasswordInput('')\r\n\r\n    try {\r\n      const user = await MagicdexApi.login({ username: usernameInput, password: passwordInput })\r\n\r\n      dispatch.setActiveUser(user)\r\n      enqueueSnackbar('Login successful', { variant: 'success' })\r\n      res = Promise.resolve(user)\r\n    }\r\n    catch (err) {\r\n      const msg = err.response.data.msg || err.response.data.message\r\n      let msgs = (msg instanceof Array) ? msg : [msg]\r\n\r\n      msgs = msgs.map(msg =>\r\n        msg.toLowerCase().includes('combination not found')\r\n          ? 'Bad credentials'\r\n          : msg\r\n      )\r\n\r\n      err.message = msgs\r\n      res = Promise.reject(err)\r\n    }\r\n    finally {\r\n      setIsLoading(false)\r\n      return res\r\n    }\r\n  }\r\n\r\n  const handleError = (err) => {\r\n    setErrorMessages(err.message)\r\n    enqueueSnackbar('Login failed', { variant: 'error' })\r\n  }\r\n\r\n  const handleClear = (e) => {\r\n    setErrorMessages([])\r\n    setUsernameInput('')\r\n    setPasswordInput('')\r\n    formRef.current.resetValidations()\r\n  }\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid container className={classes.root}>\r\n      <BaseForm\r\n        formRef={formRef}\r\n        onSubmit={handleSubmit}\r\n        onError={handleError}\r\n        instantValidate={false}\r\n\r\n        header='Login'\r\n        // icon     = {() => <AccountCircleIcon fontSize='inherit' />}\r\n        icon={() => <Box marginBottom={2}>💩</Box>}\r\n        content={() => (\r\n          <>\r\n            <TextValidator\r\n              id='username'\r\n              type='text'\r\n              label='Username'\r\n              variant='outlined'\r\n              size='small'\r\n              color='secondary'\r\n              value={usernameInput}\r\n              onChange={(e) => setUsernameInput(e.target.value)}\r\n              validators={['required', `matchRegexp:^([A-Za-z0-9]|[-_.'])*$`]}\r\n              errorMessages={['Field is required', 'Special characters are not allowed']}\r\n              autoComplete='current-username'\r\n            />\r\n            <TextValidator\r\n              id='password'\r\n              type='password'\r\n              label='Password'\r\n              variant='outlined'\r\n              size='small'\r\n              color='secondary'\r\n              value={passwordInput}\r\n              onChange={(e) => setPasswordInput(e.target.value)}\r\n              validators={['required']}\r\n              errorMessages={['Field is required']}\r\n              autoComplete='current-password'\r\n            />\r\n            <Grid container direction='column'>\r\n              {\r\n                Object.values(errorMessages).map((value, i) => (\r\n                  <Grid item key={i} className={classes.errorMessages}>\r\n                    {value[0].toUpperCase() + value.slice(1)} {/* capitalize first letter */}\r\n                  </Grid>\r\n                ))\r\n              }\r\n            </Grid>\r\n          </>\r\n        )}\r\n        actions={() => (\r\n          <Grid container justifyContent='flex-end' spacing={1}>\r\n            <Grid item>\r\n              <Button\r\n                size=\"medium\"\r\n                variant=\"outlined\"\r\n                onClick={handleClear}\r\n                disabled={isLoading}\r\n              >\r\n                Clear\r\n              </Button>\r\n            </Grid>\r\n            <Grid item style={{ paddingRight: 0 }}>\r\n              <Button\r\n                type=\"submit\"\r\n                size=\"medium\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                disabled={isLoading}\r\n              >\r\n                Submit\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n      />\r\n    </Grid>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default\r\n  withStyles(useStyles)(\r\n    connect(mapStateToProps, mapDispatchToProps)(\r\n      Login\r\n    )\r\n  )","const useStyles = (theme) => {\r\n  const topBottomPadding = theme.spacing(8)\r\n\r\n  return {\r\n    root: {\r\n      minHeight: `calc(100vh - 2*${topBottomPadding}px)`,\r\n      // width: '40vw',\r\n      // flexDirection: \"column\",\r\n      justifyContent: \"center\",\r\n      alignItems: 'center',\r\n      display: 'flex',\r\n      flexGrow: 1,\r\n    },\r\n    errorMessages: {\r\n      color: theme.palette.error.main,\r\n      fontSize: '0.75rem',\r\n    },\r\n    // paper: {\r\n    //   padding: theme.spacing(3),\r\n    //   display: 'flex',\r\n    //   justifyContent: \"center\",\r\n    //   alignItems: 'center',\r\n    //   // flexDirection: \"column\",\r\n    //   // flexGrow: 0.1,\r\n    // },\r\n  }\r\n}\r\n\r\nexport default useStyles;","/* eslint-disable no-unused-vars */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport { useEffect, useState, useRef } from 'react'\r\nimport { Box, Button, Grid, Typography } from '@material-ui/core'\r\nimport { AccountCircle as AccountCircleIcon } from '@material-ui/icons'\r\nimport { withStyles } from \"@material-ui/styles\"\r\nimport { connect } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { TextValidator } from 'react-material-ui-form-validator'\r\nimport { useSnackbar } from 'notistack'\r\nimport _ from 'lodash'\r\n\r\nimport { MagicdexApi } from \"@/Api\"\r\nimport { setActiveUser, setCurrentTab } from '@/Logic/redux'\r\nimport { BaseForm } from './..'\r\nimport useStyles from './styles'\r\n\r\n\r\n/** REDUX **/\r\nconst mapStateToProps = (state) => ({\r\n  username: state.actions.activeUser.username,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: {\r\n    setActiveUser: (payload) => dispatch(setActiveUser(payload)),\r\n    setCurrentTab: (payload) => dispatch(setCurrentTab(payload)),\r\n  }\r\n})\r\n\r\n\r\nconst Register = ({\r\n  /** VARS **/\r\n  ...props\r\n}) => {\r\n  const {\r\n    classes,\r\n    dispatch,\r\n    username,\r\n  } = props\r\n  const history = useHistory()\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [errorMessages, setErrorMessages] = useState([])\r\n  const [usernameInput, setUsernameInput] = useState('')\r\n  const [passwordInput, setPasswordInput] = useState('')\r\n  const [passwordRepeatInput, setPasswordRepeatInput] = useState('')\r\n  const passwordInputRef = useRef()\r\n  const formRef = useRef()\r\n\r\n\r\n  /** EFFECTS **/\r\n  useEffect(() => {\r\n    //onMount\r\n    dispatch.setCurrentTab({ tab: 'register' })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (username)\r\n      history.push('/')\r\n  }, [username])\r\n\r\n\r\n  /** HANDLERS **/\r\n  const handleSubmit = async (e) => {\r\n    let res = null\r\n    setErrorMessages([])\r\n    setIsLoading(true)\r\n    setPasswordInput('')\r\n    setPasswordRepeatInput('')\r\n\r\n    try {\r\n      const user = await MagicdexApi.register({ username: usernameInput, password: passwordInput })\r\n\r\n      dispatch.setActiveUser(user)\r\n      enqueueSnackbar('Successfully registered', { variant: 'success' })\r\n      res = Promise.resolve(user)\r\n    }\r\n    catch (err) {\r\n      const msg = err.response.data.msg || err.response.data.message\r\n      const msgs = (msg instanceof Array) ? msg : [msg]\r\n      \r\n      err.message = msgs\r\n      res = Promise.reject(err)\r\n    }\r\n    finally {\r\n      setIsLoading(false)\r\n      return res\r\n    }\r\n  }\r\n\r\n  const handleError = (err) => {\r\n    setErrorMessages(err.message)\r\n    enqueueSnackbar('Error registering', { variant: 'error' })\r\n  }\r\n\r\n  const handleClear = (e) => {\r\n    setErrorMessages([])\r\n    setUsernameInput('')\r\n    setPasswordInput('')\r\n    setPasswordRepeatInput('')\r\n    formRef.current.resetValidations()\r\n  }\r\n\r\n\r\n  /** VALIDATORS **/\r\n  const isPasswordMatch = (value) => (\r\n    value === passwordInputRef.current.props.value\r\n  )\r\n\r\n\r\n  /** RENDER **/\r\n  return (\r\n    <Grid container className={classes.root}>\r\n      <BaseForm\r\n        formRef={formRef}\r\n        validationRules={{ isPasswordMatch }}\r\n        onSubmit={handleSubmit}\r\n        onError={handleError}\r\n        instantValidate={false}\r\n\r\n        header='Signup'\r\n        // icon={() => <AccountCircleIcon fontSize='inherit' />}\r\n        icon={() => <Box marginBottom={2}>💁</Box>}\r\n        content={() => (\r\n          <>\r\n            <TextValidator\r\n              error={_.join(errorMessages, ';').includes('username')}\r\n              id='username'\r\n              name='username'\r\n              type='text'\r\n              label='Username'\r\n              variant='outlined'\r\n              size='small'\r\n              color='secondary'\r\n              value={usernameInput}\r\n              onChange={(e) => setUsernameInput(e.target.value)}\r\n              validators={['required', `matchRegexp:^[A-Za-z][A-Za-z0-9-_.]*$`]}\r\n              errorMessages={['Field is required', 'Special characters are not allowed']}\r\n              autoComplete='new-username'\r\n            />\r\n            <TextValidator\r\n              ref={passwordInputRef}\r\n              id='password'\r\n              name='password'\r\n              type='password'\r\n              label='Password'\r\n              variant='outlined'\r\n              size='small'\r\n              color='secondary'\r\n              value={passwordInput}\r\n              onChange={(e) => setPasswordInput(e.target.value)}\r\n              validators={['required', 'minStringLength:5']}\r\n              errorMessages={['Field is required', 'Password is too short']}\r\n              autoComplete='new-password'\r\n            />\r\n            <TextValidator\r\n              id='password_repeat'\r\n              name='password_repeat'\r\n              type='password'\r\n              label='Repeat Password'\r\n              variant='outlined'\r\n              size='small'\r\n              color='secondary'\r\n              value={passwordRepeatInput}\r\n              onChange={(e) => setPasswordRepeatInput(e.target.value)}\r\n              validators={['required', 'minStringLength:5', 'isPasswordMatch']}\r\n              errorMessages={['Field is required', 'Password is too short', 'Passwords does not match']}\r\n              autoComplete='new-password2'\r\n            />\r\n            <Grid container direction='column'>\r\n              {\r\n                Object\r\n                  .values(errorMessages)\r\n                  .map((value, i) => (\r\n                    <Grid item key={i} className={classes.errorMessages}>\r\n                      {_.upperFirst(value)}\r\n                    </Grid>\r\n                  ))\r\n              }\r\n            </Grid>\r\n          </>\r\n        )}\r\n        actions={() => (\r\n          <Grid container justifyContent='flex-end' spacing={1}>\r\n            <Grid item>\r\n              <Button\r\n                size=\"medium\"\r\n                variant=\"outlined\"\r\n                onClick={handleClear}\r\n                disabled={isLoading}\r\n              >\r\n                Clear\r\n              </Button>\r\n            </Grid>\r\n            <Grid item style={{ paddingRight: 0 }}>\r\n              <Button\r\n                type=\"submit\"\r\n                size=\"medium\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                disabled={isLoading}\r\n              >\r\n                Submit\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n      />\r\n    </Grid>\r\n  )\r\n}\r\n\r\n/** EXPORT **/\r\nexport default withStyles(useStyles)(\r\n  connect(mapStateToProps, mapDispatchToProps)(\r\n    Register\r\n  )\r\n)\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport { Provider } from \"react-redux\"\r\n\r\nimport { store } from \"@/Logic/redux\"\r\nimport { App } from \"@/Components\"\r\nimport './index.css'\r\nimport 'fontsource-roboto'\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)\r\n"],"sourceRoot":""}