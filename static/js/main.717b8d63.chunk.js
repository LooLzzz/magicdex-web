(this["webpackJsonpmagicdex-web"]=this["webpackJsonpmagicdex-web"]||[]).push([[0],{353:function(e,t){},465:function(e,t){},583:function(e,t,n){},585:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),o=n(17),s=n(141),l=n(3),d=n(356),u=n(16),j=Object(d.a)(),b=j.palette.getContrastText,p={MuiCssBaseline:{"@global":{code:{padding:"2px",fontFamily:'"Red Hat Mono", Consolas, monospace',borderRadius:"0.5em"},".alignLeft":{textAlign:"left"},".alignRight":{textAlign:"right"},a:{textDecoration:"none"},"a:hover":{textDecoration:"underline"},".cursor-pointer":{cursor:"pointer"},".floating":{maxWidth:j.spacing(25),padding:"".concat(j.spacing(.5),"px ").concat(j.spacing(1.25),"px ").concat(j.spacing(.5),"px ").concat(j.spacing(1.25),"px")}}},MuiListItemText:{multiline:{marginTop:0,marginBottom:0}},MuiTextField:{root:{width:"100%",margin:"0.4em"}},MuiPaper:{rounded:{borderRadius:"12.5px"}},MuiListSubheader:{root:{display:"flex",alignItems:"center",columnGap:"0.6em"}},MuiListItem:{secondaryAction:{paddingRight:j.spacing(8)}}},m={main:"#2D5295"},f={main:"#DA7B08"},O={main:u.a.purple[800],secondary:u.a.purple[700]},h=function(){return Object(d.a)({palette:{type:"dark",table:{divider:"#424242"},primary:Object(l.a)(Object(l.a)({},m),{},{contrastText:b(m.main)}),secondary:Object(l.a)(Object(l.a)({},f),{},{contrastText:b(f.main)}),thridly:Object(l.a)(Object(l.a)({},O),{},{contrastText:b(O.main)}),background:{secondary:u.a.grey[700]}},overrides:Object(l.a)(Object(l.a)({},p),{},{MuiCssBaseline:{"@global":Object(l.a)(Object(l.a)({},p.MuiCssBaseline),{},{code:Object(l.a)(Object(l.a)({},p.MuiCssBaseline.code),{},{backgroundColor:"rgba(255,255,255,0.1)"}),a:{color:f.main},".floating":Object(l.a)(Object(l.a)({},p.MuiCssBaseline[".floating"]),{},{backgroundColor:u.a.grey[700],color:b(u.a.grey[700])}),".buttonThridly-root":{color:b(O.main),backgroundColor:O.main,"&:hover":{backgroundColor:O.secondary}}})},MuiCircularProgress:{circle:{color:"white"}}})})},g=function(){return Object(d.a)({palette:{type:"light",secondary:{main:"#E3468C",contrastText:b("#E3468C")},table:{divider:"rgba(150, 150, 150, 0.75)"},background:{default:"#D5D5D5",paper:"#F0F0F0",secondary:u.a.grey[400]},thridly:{main:u.a.purple[500],secondary:u.a.purple[700],contrastText:b(u.a.purple[500])}},overrides:Object(l.a)(Object(l.a)({},p),{},{MuiCssBaseline:{"@global":Object(l.a)(Object(l.a)({},p.MuiCssBaseline),{},{code:Object(l.a)(Object(l.a)({},p.MuiCssBaseline.code),{},{backgroundColor:"rgba(0,0,0,0.1)"}),a:{color:"#bf9eee"},".floating":Object(l.a)(Object(l.a)({},p.MuiCssBaseline[".floating"]),{},{backgroundColor:u.a.grey.A100,color:b(u.a.grey.A100)}),".buttonThridly-root":{color:b(u.a.purple[500]),backgroundColor:u.a.purple[500],"&:hover":{backgroundColor:u.a.purple[700]}}})},MuiCircularProgress:{circle:{color:"currentColor"}}})})},x=n(35),v=n.n(x);v.a.defaults.headers.common["access-Control-Allow-Origin"]="*",v.a.defaults.headers.common["access-Control-Allow-Credentials"]=!0;var y,C,w={MODIFY_DB_ALLOWED:!0,API_URL:Object({NODE_ENV:"production",PUBLIC_URL:"/magicdex-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:5000",PER_PAGE:25,CONDITIONS:["NM","LP","MP","HP","DAMAGED"],BREAKPOINTS:{xs:0,sm:600,md:900,lg:1200,xl:1536}},S=w,k=w.API_URL,E=w.PER_PAGE,I=null!==(y=localStorage.getItem("themeType"))&&void 0!==y?y:"dark",P=localStorage.getItem("accessToken"),T={activeUser:{username:localStorage.getItem("username"),accessToken:P,collection:null!==(C=JSON.parse(localStorage.getItem("collection")))&&void 0!==C?C:[]},theme:{currentTheme:"dark"===(I=I||"dark")?h():g(),themeType:I},app:{currency:"usd",topMenu:{currentTab:"home"},collection:{view:"table",pageNumber:0,perPage:E,currentOpenCardId:void 0,cardsSelectableEnabled:!1,selectedCardIds:[],filters:{},cardInfo:{viewIndex:0,editEnabled:!1},tableView:{columns:{}},gridView:{tiltEnabled:!1,transform3dEnabled:!1}}}},N=T,R=n(18),A=n.n(R),D={setCurrency:function(e,t){e.app.currency=t.payload.currency},toggleCurrency:function(e,t){var n=e.app.currency.toLowerCase();e.app.currency="usd"===n?"eur":"usd"},setCurrentTab:function(e,t){e.app.topMenu.currentTab=t.payload.tab},setView:function(e,t){e.app.collection.view=t.payload.view,e.app.collection.currentOpenCardId=null},setCurrentOpenCardId:function(e,t){e.app.collection.currentOpenCardId=t.payload.id},setSelectedCardIds:function(e,t){var n=t.payload.selectedCardIds;if(!Array.isArray(n))throw new Error("Parameter ".concat(Object.prototype.toString.call(n)," is not an Array"));e.app.collection.selectedCardIds=A.a.uniq(n)},addSelectedCardIds:function(e,t){var n=t.payload,a=n.selectedCardIds,r=n.id;e.app.collection.selectedCardIds=A.a.uniq(e.app.collection.selectedCardIds.concat(r||a))},removeSelectedCardIds:function(e,t){var n=t.payload,a=n.selectedCardIds,r=n.id;e.app.collection.selectedCardIds=A.a.difference(e.app.collection.selectedCardIds,r?[r]:a)},setFilters:function(e,t){e.app.collection.filters=t.payload.filters},addFilters:function(e,t){Object.assign(e.app.collection.filters,t.payload.filters)},removeFilters:function(e,t){e.app.collection.filters=A.a.omit(e.app.collection.filters,t.payload.filters)},setCardsSelectableEnabled:function(e,t){e.app.collection.cardsSelectableEnabled=t.payload.enabled,e.app.collection.cardsSelectableEnabled||(e.app.collection.selectedCardIds=[])},toggleCardsSelectableEnabled:function(e,t){e.app.collection.cardsSelectableEnabled=!e.app.collection.cardsSelectableEnabled,e.app.collection.cardsSelectableEnabled||(e.app.collection.selectedCardIds=[])},setPageNumber:function(e,t){e.app.collection.pageNumber=t.payload.pageNumber},setPerPage:function(e,t){e.app.collection.perPage=t.payload.perPage,e.app.collection.pageNumber=0},setViewIndex_CardInfo:function(e,t){e.app.collection.cardInfo.viewIndex=t.payload.index},setEditEnabled_CardInfo:function(e,t){e.app.collection.cardInfo.editEnabled=t.payload.enabled},setColumns_TableView:function(e,t){e.app.collection.tableView.columns=t.payload.columns},setTiltEnabled_GridView:function(e,t){e.app.collection.gridView.tiltEnabled=t.payload.enabled},toggleTiltEnabled_GridView:function(e,t){e.app.collection.gridView.tiltEnabled=!e.app.collection.gridView.tiltEnabled},setTransform3dEnabled_GridView:function(e,t){e.app.collection.gridView.transform3dEnabled=t.payload.enabled},toggleTransform3dEnabled_GridView:function(e,t){e.app.collection.gridView.transform3dEnabled=!e.app.collection.gridView.transform3dEnabled}},M=D,L=n(95),z={setActiveUser:function(e,t){var n=t.payload,a=n.username,r=n.accessToken;a||r?(a&&localStorage.setItem("username",a),r&&localStorage.setItem("accessToken",r)):(localStorage.removeItem("username"),localStorage.removeItem("accessToken"),localStorage.removeItem("collection")),e.activeUser=Object(l.a)(Object(l.a)({},e.activeUser),{},{accessToken:r,username:a})},setCurrentCollection:function(e,t){var n=t.payload.collection;n?localStorage.setItem("collection",JSON.stringify(n||[])):localStorage.removeItem("collection"),e.activeUser.collection=n},updateCollection:function(e,t){var n,a=t.payload.cards,r=e.activeUser.collection,c=Object(L.a)(a);try{var i=function(){var e=n.value,t=e._id,a=e.action,c=e.card,i=-1;switch(a){case"CREATED":r.push(c);break;case"UPDATED":i=r.findIndex((function(e){return e._id===t})),-1!==i&&Object.assign(r[i],c);break;case"DELETED":i=r.findIndex((function(e){return e._id===t})),-1!==i&&r.splice(i,1)}};for(c.s();!(n=c.n()).done;)i()}catch(o){c.e(o)}finally{c.f()}e.activeUser.collection=r,localStorage.setItem("collection",JSON.stringify(r||[]))}},B=z,F={toggleThemeType:function(e,t){var n="dark"===e.theme.themeType?"light":"dark";localStorage.setItem("themeType",n),e.theme=Object(l.a)(Object(l.a)({},e.theme),{},{themeType:n,currentTheme:"dark"===n?h():g()})}},U=F,W=n(51),V=(Object(W.b)({app:M,account:B,theme:U}),Object(s.b)({name:"actions",initialState:N,reducers:Object(l.a)(Object(l.a)(Object(l.a)({},M),B),U)})),H=V.reducer,q=V.actions,Y=Object(s.a)({reducer:{actions:H},middleware:function(e){return e({serializableCheck:!1})}}),G=q.setActiveUser,X=q.setCurrentCollection,$=q.updateCollection,J=q.toggleThemeType,K=(q.setCurrency,q.toggleCurrency),Z=q.setCurrentTab,Q=q.setView,ee=q.setCurrentOpenCardId,te=q.setSelectedCardIds,ne=q.removeSelectedCardIds,ae=q.addSelectedCardIds,re=q.setFilters,ce=q.addFilters,ie=(q.removeFilters,q.setCardsSelectableEnabled),oe=q.toggleCardsSelectableEnabled,se=q.setPageNumber,le=q.setPerPage,de=q.setViewIndex_CardInfo,ue=q.setEditEnabled_CardInfo,je=q.setColumns_TableView,be=(q.setTiltEnabled_GridView,q.toggleTiltEnabled_GridView),pe=(q.setTransform3dEnabled_GridView,q.toggleTransform3dEnabled_GridView),me=n(21),fe=n(613),Oe=n(210),he=n(98),ge=n(615),xe=n(586),ve=function(e){return{root:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:e.spacing(2)},content:{padding:"".concat(e.spacing(3),"px ").concat(e.spacing(5),"px ").concat(e.spacing(3),"px ").concat(e.spacing(5),"px")}}},ye=n(1),Ce=Object(o.b)((function(e){return{}}),(function(e){return{dispatch:{setCurrentTab:function(t){return e(Z(t))}}}}))(Object(xe.a)(ve)((function(e){var t=Object.assign({},(Object(me.a)(e),e)),n=t.classes,r=t.dispatch;return Object(a.useEffect)((function(){r.setCurrentTab({tab:"home"})}),[]),Object(ye.jsx)(fe.a,{container:!0,justifyContent:"center",className:n.root,children:Object(ye.jsxs)(fe.a,{item:!0,container:!0,component:Oe.a,xs:12,sm:10,md:9,lg:8,className:n.content,spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,container:!0,justifyContent:"center",xs:12,children:Object(ye.jsx)(fe.a,{item:!0,xs:11,sm:10,md:9,children:Object(ye.jsx)("img",{src:"/logo.png",width:"100%",alt:"home"})})}),Object(ye.jsx)(fe.a,{item:!0,xs:12,component:he.a,variant:"h6",children:"Welcome to Magicdex"}),Object(ye.jsx)(fe.a,{item:!0,xs:12,component:he.a,varinat:"body2",children:"This is webapp is still in development, feel free to explore and report any bug you encounter."}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(ge.a,{})}),Object(ye.jsxs)(fe.a,{item:!0,xs:12,component:he.a,variant:"body2",children:["Active Config:",JSON.stringify({MODIFY_DB_ALLOWED:S.MODIFY_DB_ALLOWED,API_URL:S.API_URL,username:"test",password:"test"},null,2).slice(2,-1).trim().split("\n").map((function(e,t){return Object(ye.jsx)("div",{children:Object(ye.jsx)("code",{children:e})},t)}))]}),Object(ye.jsxs)(fe.a,{item:!0,xs:12,component:he.a,variant:"h2",children:[Object(ye.jsx)("span",{className:"ss ss-fw ss-afr"}),Object(ye.jsx)("span",{className:"ss ss-fw ss-war"})]})]})})}))),we=n(4),Se=n(663),ke=n(664),Ee=n(620),Ie=n(665),_e=n(24),Pe=n(61),Te=n(602),Ne=n(37),Re=n(29),Ae=n(587),De=n(598),Me=n(628),Le=n(624),ze=n(647),Be=n(657),Fe=n(686),Ue=n(659),We=n(658),Ve=n(660),He=n(661),qe=n(662),Ye=n(93),Ge=n.n(Ye),Xe=n(8),$e=["children","data"],Je=["currency"],Ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd",n=e.prices,a=e.foil,r=e.amount,c=Number(a?null===n||void 0===n?void 0:n["".concat(t,"_foil")]:null===n||void 0===n?void 0:n[t]);return Object(l.a)(Object(l.a)({},e),{},{currency:t,price:c,total_price:c*r})},Ze=Object(o.b)((function(e){return{currency:e.actions.app.currency}}))((function(e){var t=e.children,n=e.data,c=void 0===n?[]:n,i=Object(we.a)(e,$e),o=i.currency,s=Object(we.a)(i,Je),d=Object(a.useState)(c),u=Object(Xe.a)(d,2),j=u[0],b=u[1];return Object(a.useEffect)((function(){b(c instanceof Array&&c.map((function(e){return Ke(e,o)})))}),[c,o]),r.a.Children.map(t,(function(e){return r.a.cloneElement(e,Object(l.a)({data:j},s))}))})),Qe=["children","data"],et=["filters"],tt=Object(o.b)((function(e){return{filters:e.actions.app.collection.filters}}))((function(e){var t=e.children,n=e.data,c=void 0===n?[]:n,i=Object(we.a)(e,Qe),o=i.filters,s=Object(we.a)(i,et),d=Object(a.useState)(c),u=Object(Xe.a)(d,2),j=u[0],b=u[1];return Object(a.useEffect)((function(){b(A.a.filter(null!==c&&void 0!==c?c:[],(function(e){return A.a.every(Object.entries(null!==o&&void 0!==o?o:{}),(function(t){var n=Object(Xe.a)(t,2),a=n[0],r=n[1];return"boolean"===typeof r?r:r instanceof Function?r(e[a],e):Array.isArray(r)?!(r.length>0)||(Array.isArray(e[a])?A.a.intersection(r,e[a]).length>0:r.includes(e[a])):e[a]===r}))})))}),[o,c]),r.a.Children.map(t,(function(e){return r.a.cloneElement(e,Object(l.a)({data:j},s))}))})),nt=n(145),at=n.n(nt),rt=function(e){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"some";e=e?e instanceof Array?e:[e]:[],t=t?t instanceof Array?t:[t]:[];var a=at()(e,t,(function(e,t){return e.includes(t)}));switch(n){case"some":return a.length>0;case"every":return a.length===t.length;default:return!1}};return Object(l.a)(Object(l.a)({},e),{},{is_transform:t(e.layout,["modal","transform"]),is_split:t(e.layout,["split","fuse"]),is_flip:t(e.layout,["flip"])})},ct=n(13),it=n(22),ot=n(44),st=n.n(ot),lt=n(345),dt=n.n(lt),ut=n(346),jt=n.n(ut),bt=n(347),pt=n.n(bt),mt={getAuthHeaders:function(){var e=localStorage.getItem("accessToken");return e?{Authorization:"Bearer ".concat(e)}:{}},authHeadersDecorator:function(e){return function(t){var n;return t=Object(l.a)(Object(l.a)({},t),{},{headers:Object(l.a)(Object(l.a)({},null===(n=t)||void 0===n?void 0:n.headers),ft())}),e(t)}},catchErrors:function(e){throw e.response?console.error("Request made and server responded",e.response):e.request?console.error("Request was made but no response was recieved",e.request):console.error("Something happened in setting up the request that triggered an error",e.message),e},fetchScryfallCardData:function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){var n,a,r,c;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.a.getSets();case 2:return n=e.sent,a=pt()(n.map((function(e){return e.id})),n),r=t.map((function(e){return{id:e.id}})),e.next=7,st.a.getCollection(r);case 7:return c=e.sent,e.abrupt("return",c.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{set_data:a[e.set_id]})})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),arrayContains:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"some";e=e instanceof Array?e:[e],t=t instanceof Array?t:[t];var a=at()(e,t,(function(e,t){return e.includes(t)}));switch(n){case"some":return a.length>0;case"every":return a.length===t.length;default:return!1}},populateCardData:function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){var n,a,r;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(Array.isArray(t)?t:[t]).map((function(e){return e.id=e.scryfall_id,delete e.scryfall_id,e})),e.next=3,gt(n);case 3:return a=e.sent,e.next=6,Promise.all(n.map(function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t,n){var r,c,i,o;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={is_transform:xt(a[n].layout,["modal","transform"]),is_split:xt(a[n].layout,["split","fuse"]),is_flip:xt(a[n].layout,["flip"])},c=r.is_transform,i=r.is_split,o=r.is_flip,e.abrupt("return",Object.assign(a[n],Object(l.a)(Object(l.a)({},t),{},{is_transform:c,is_split:i,is_flip:o,date_created:new Date(t.date_created),mana_cost:c?[a[n].card_faces[0].mana_cost,a[n].card_faces[1].mana_cost]:a[n].mana_cost})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:return r=e.sent,e.abrupt("return",Array.isArray(t)?r:r[0]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pickCardFields:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["_id","id","amount","tag","foil","condition","signed","altered","misprint"],n=function(e){var n=jt()(e,t);return n.hasOwnProperty("id")&&(n.scryfall_id=n.id,delete n.id),n};return Array.isArray(e)?e.map(n):n(e)}},ft=mt.getAuthHeaders,Ot=mt.authHeadersDecorator,ht=mt.catchErrors,gt=mt.fetchScryfallCardData,xt=mt.arrayContains,vt=mt.populateCardData,yt=mt.pickCardFields,Ct="".concat(k,"/auth"),wt=function(e,t){return Object.keys(e).reduce((function(n,a){return n[t[a]||a]=e[a],n}),{})},St={login:Ot((function(e){var t=e.username,n=e.password,a=e.headers,r={username:t,password:n};return v.a.post(Ct,r,{headers:a}).then((function(e){return wt(e.data,{"access-token":"accessToken"})}))})),register:function(e){var t={username:e.username,password:e.password};return v.a.put(Ct,t).then((function(e){return wt(e.data,{"access-token":"accessToken"})}))}},kt=St.login,Et=St.register,It="".concat(k,"/collections"),_t={getCards:function(e,t,n){var a=ft(),r={page:e,per_page:t,cards:n};return v.a.get(It,{params:r,headers:a}).then((function(e){return vt(e.data.data)})).catch((function(e){return ht(e)}))},updateCards:function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){var n,a;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ft(),t=yt(t),e.prev=2,e.next=5,v.a.post(It,{cards:t},{headers:n});case 5:return a=e.sent,e.next=8,Promise.all(a.data.map(function(){var e=Object(it.a)(Object(ct.a)().mark((function e(n,a){return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=l.a,e.t1=Object(l.a)({},n),e.t2={},!n.card){e.next=15;break}return e.t4=l.a,e.t5=l.a,e.t6={},e.next=9,vt(n.card);case 9:e.t7=e.sent,e.t8=(0,e.t5)(e.t6,e.t7),e.t9=n.card,e.t3=(0,e.t4)(e.t8,e.t9),e.next=16;break;case 15:e.t3=t[a];case 16:return e.t10=e.t3,e.t11={card:e.t10},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t11));case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 8:return a=e.sent,e.abrupt("return",a);case 12:e.prev=12,e.t0=e.catch(2),ht(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),deleteCards:function(e){var t=ft();return v.a.delete(It,{cards:e},{headers:t}).then((function(e){return e})).catch((function(e){return ht(e)}))},getAllCards:function(e){var t=ft(),n={cards:e};return v.a.get("".concat(It,"/all"),{params:n,headers:t}).then((function(e){return vt(e.data.data)})).catch((function(e){return ht(e)}))},deleteAllCards:function(){var e=ft();return v.a.delete("".concat(It,"/all"),{headers:e}).then((function(e){return e})).catch((function(e){return ht(e)}))},getCardById:function(e){var t=ft();return v.a.get("".concat(It,"/").concat(e),{headers:t}).then((function(e){return vt(e.data)})).catch((function(e){return ht(e)}))},updateCardById:function(e,t){var n=ft();return v.a.post("".concat(It,"/").concat(e),t,{headers:n}).then((function(e){return e})).catch((function(e){return ht(e)}))},deleteCardById:function(e){var t=ft();return v.a.delete("".concat(It,"/").concat(e),{headers:t}).then((function(e){return e})).catch((function(e){return ht(e)}))}},Pt=_t.getCards,Tt=_t.updateCards,Nt=_t.deleteCards,Rt=_t.getAllCards,At=_t.deleteAllCards,Dt=_t.getCardById,Mt=_t.updateCardById,Lt=_t.deleteCardById,zt={login:kt,register:Et,getCards:Pt,updateCards:Tt,deleteCards:Nt,getAllCards:Rt,deleteAllCards:At,getCardById:Dt,updateCardById:Mt,deleteCardById:Lt},Bt=zt,Ft=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){var n,a,r,c,i,o,s,l=arguments;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:"set",a=t.oracle_id,r=t.set,c=t.collector_number,i=[],o=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(){return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.a.search("oracleid:".concat(a,"+set:").concat(r,"+lang:any"),{unique:"prints",include_multilingual:!0,include_extras:!0});case 2:return i=e.sent,i=dt()(i,{collector_number:c}),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(){return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.a.search("oracleid:".concat(a),{unique:"prints",order:"released",dir:"desc",include_variations:!0,include_extras:!0});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.t0=n,e.next="both"===e.t0?8:"lang"===e.t0?22:(e.t0,32);break;case 8:return e.prev=8,e.next=11,o();case 11:return e.t1=e.sent,e.next=14,s();case 14:e.t2=e.sent,i={lang:e.t1,set:e.t2},e.next=21;break;case 18:e.prev=18,e.t3=e.catch(8),console.error({error:e.t3});case 21:return e.abrupt("break",42);case 22:return e.prev=22,e.next=25,o();case 25:i=e.sent,e.next=31;break;case 28:e.prev=28,e.t4=e.catch(22),console.error({error:e.t4});case 31:return e.abrupt("break",42);case 32:return e.prev=32,e.next=35,s();case 35:i=e.sent,e.next=41;break;case 38:e.prev=38,e.t5=e.catch(32),console.error({error:e.t5});case 41:return e.abrupt("break",42);case 42:return e.next=44,gt(i);case 44:return i=e.sent,e.abrupt("return",i);case 46:case"end":return e.stop()}}),e,null,[[8,18],[22,28],[32,38]])})));return function(t){return e.apply(this,arguments)}}(),Ut=n(681),Wt=n(360),Vt=n(633),Ht=n(634),qt=n(146),Yt=n.n(qt),Gt=n(676),Xt=n(23),$t=n(682),Jt=n(5),Kt=n(107),Zt=n.n(Kt),Qt={addLeadingZero:function(e){return e<10?e="0"+e:e},toManaFont:function(e,t){return"string"===typeof e&&(e=e.replace(/(^{)|(\/)|(}$)/g,"").split("}{")),e.map((function(e){return"T"===e?"tap":e})).map((function(e){return e?"ms-".concat(e.toLowerCase()):""})).map((function(e,n){return Object(ye.jsx)("span",Object(l.a)(Object(l.a)({},t),{},{style:null===t||void 0===t?void 0:t.style,className:Jt.a.apply(void 0,["ms","ms-cost","ms-shadow","ms-fw",e].concat(Object(Re.a)(null===t||void 0===t?void 0:t.className)))}),n)}))},toColorIndicator:function(e,t){return"string"===typeof e&&(e=e.replace(/(^{)|(\/)|(}$)/g,"").split("}{")),(e=Zt()(e)).map((function(e,n){return Object(ye.jsx)("span",Object(l.a)(Object(l.a)({},t),{},{style:null===t||void 0===t?void 0:t.style,className:Object(Jt.a)("ms","ms-ci","ms-ci-".concat(e.length),"ms-ci-".concat(e.toLowerCase()))}),n)}))},transformStringArray:function(e,t,n,a){for(var r=0;r<e.length;r++){var c=e[r];if("string"===typeof c){var i=c.search(t),o=c.search(n);if(-1!==i&&-1!==o){var s=a(c.substring(i,o+1));s=s instanceof Array?s:[s],e.splice.apply(e,[r,1,c.substring(0,i)].concat(Object(Re.a)(s),[c.substring(o+1)]))}}}return Zt()(e)},limitPrecision:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t=Math.pow(10,t),Math.round(Number(e)*t)/t}},en=Qt,tn=n(11),nn=function(e){var t;return{chip:{boxShadow:e.shadows[1]},preWrap:{whiteSpace:"pre-wrap"},mana:{marginRight:"0.25em",fontSize:"0.85em"},colorIndicator:{marginRight:"0.25em",fontSize:"0.9em"},set:{fontSize:"1.25em"},flavorText:{fontStyle:"italic",fontFamily:"Georgia, fangsong, Times New Roman",whiteSpace:"pre-wrap",'&[lang="ph"]':{fontFamily:"PhyrexianHorizontal",lineBreak:"anywhere"}},condition:{padding:"3px 8px 3px 8px",borderRadius:12,boxShadow:e.shadows[1],fontFamily:'"Red Hat Mono", Consolas, monospace',fontSize:"0.93em"},widthLimit:(t={maxWidth:"22 em"},Object(tn.a)(t,e.breakpoints.down("lg"),{maxWidth:"17em"}),Object(tn.a)(t,e.breakpoints.down(1400),{maxWidth:"10em"}),Object(tn.a)(t,e.breakpoints.down("sm"),{maxWidth:"7em"}),t)}},an=["card","columnName"],rn={DefaultRender:Object(xe.a)(nn)(Object(a.memo)((function(e){var t=e.classes,n=e.card,a=e.columnName,r=e.cardFace,c=(void 0!==r?n.card_faces[r]:n)[a];return(c=c||n[a])?Object(ye.jsx)("span",{className:t.preWrap,children:c}):""}))),RenderName:Object(xe.a)(nn)(Object(a.memo)((function(e){var t=e.classes,n=e.card,a=e.cardFace,r=e.renderStyle,c=void 0===r?"row":r,i=(void 0!==a?n.card_faces[a]:n).name,o=Object(Ae.a)((function(e){return e.breakpoints.down("md")}));switch(c){default:case"row":var s=(i=i.replace(/\u2014/g,"-").replace(/Legendary/g,"Lgd.")).split("//").map((function(e){return e.trim()}));return Object(ye.jsxs)(he.a,{noWrap:!0,variant:"body2",className:t.widthLimit,title:o?i:"",children:[s[0],s.length>1&&Object(ye.jsx)(Ut.a,{mdDown:!0,children:" // "+s[1]})]});case"content":return Object(ye.jsx)("b",{children:i})}}))),RenderOracleText:Object(xe.a)(nn)(Object(a.memo)((function(e){var t=e.classes,n=e.card,r=e.columnName,c=void 0===r?"oracle_text":r,i=e.cardFace,o=(void 0!==i?n.card_faces[i]:n)[c],s=A.a.words(o).length>2?"left":"center";return o&&(o=[o],o=en.transformStringArray(o,/\{/g,/\}/g,(function(e){return en.toManaFont(e,{className:t.mana,style:{fontSize:"0.68em",transform:"translateY(-1px)"}})})),o=en.transformStringArray(o,/\(http/g,/\)/g,(function(e){return e=e.slice(1,-1),Object(ye.jsxs)("span",{style:{fontStyle:"italic",fontSize:"0.88em",lineBreak:"anywhere"},children:["(",Object(ye.jsx)("a",{href:e,children:e}),")"]})})),o=en.transformStringArray(o,/\(/g,/\)/g,(function(e){return Object(ye.jsx)("span",{style:{fontStyle:"italic",fontSize:"0.88em"},children:e})}))),o?Object(ye.jsx)("div",{align:s,className:t.preWrap,children:o.map((function(e,t){return Object(ye.jsx)(a.Fragment,{children:e},t)}))}):""}))),RenderPowerToughness:Object(xe.a)(nn)(Object(a.memo)((function(e){e.classes;var t=e.card,n=e.cardFace,a=void 0!==n?t.card_faces[n]:t,r=a.power,c=a.toughness;return r&&c?Object(ye.jsx)("span",{align:"right",style:{fontSize:"1rem"},children:"".concat(r,"/").concat(c)}):""}))),RenderSet:Object(xe.a)(nn)(Object(a.memo)((function(e){var t=e.classes,n=e.card,a=e.renderStyle,r=void 0===a?"row":a,c=Object(Xt.a)(),i=n.set_data,o=n.rarity,s=n.foil,d=null!==i&&void 0!==i&&i.parent_set_code?i.parent_set_code:i.code;return Object(ye.jsx)("span",{className:"".concat(t.set," ss ss-fw ss-").concat(o," ss-").concat(d),title:"content"===r?"".concat(i.name," - ").concat(A.a.upperFirst(o)).concat(s?" [F]":""):null,style:Object(l.a)({},"common"===o&&"dark"===c.palette.type?{color:"#CCCCCC"}:{})})}))),RenderBoolean:Object(xe.a)(nn)(Object(a.memo)((function(e){var t=e.classes,n=e.card,a=e.columnName,r=e.renderStyle,c=void 0===r?"row":r,i=n[a];switch(c){default:case"row":return"true"===i.toString()?Object(ye.jsx)($t.a,{className:t.chip,label:"\u2714",size:"small"}):Object(ye.jsx)($t.a,{className:t.chip,label:"\u2716",size:"small"});case"content":return"true"===i.toString()?Object(ye.jsx)($t.a,{className:t.chip,label:"Yes",size:"small",color:"secondary"}):Object(ye.jsx)($t.a,{className:t.chip,label:"No",size:"small"})}}))),RenderCondition:Object(xe.a)(nn)(Object(a.memo)((function(e){var t=e.classes,n=e.card,a=Object(Xt.a)(),r=n.condition.toUpperCase();return Object(ye.jsx)("code",{className:"".concat(t.condition),style:function(e){var t;return{backgroundColor:t={NM:"#ffce10",LP:"#ff9f10",MP:"#ff9010",HP:"#e84c10",DAMAGED:"#c41313"}[e],color:a.palette.getContrastText(t)}}(r),children:r})}))),RenderAmount:Object(xe.a)(nn)(Object(a.memo)((function(e){var t=e.classes,n=e.card;return Object(ye.jsx)($t.a,{className:t.chip,label:"x"+n.amount,size:"small"})}))),RenderPrice:Object(xe.a)(nn)(Object(a.memo)((function(e){e.classes;var t=e.card,n=e.columnName,a=t[void 0===n?"price":n],r=t.currency;return(a=en.limitPrecision(a,2))>0?"usd"===r?"$"+a:a+"\u20ac":"-"}))),RenderTag:Object(xe.a)(nn)(Object(a.memo)((function(e){e.classes;var t=e.card,n=e.columnName,a=void 0===n?"tags":n,r=(e.renderStyle,t[a]);return r.length>0?r.map((function(e,t){return Object(ye.jsx)($t.a,{label:e,size:"small"},t)})):""}))),RenderManaCost:Object(xe.a)(nn)(Object(a.memo)((function(e){var t=e.classes,n=e.card,a=e.columnName,r=void 0===a?"mana_cost":a,c=e.cardFace,i=e.renderStyle,o=void 0===i?"row":i,s=void 0!==c?n.card_faces[c]:n,l=s[r],d=s.cmc;return(l=l||[])instanceof Array||(l=l.includes("//")?l.split("//").map((function(e){return e.trim()})):[l]),0===(l=A.a.compact(l)).length?"row"===o?"-":"":((l=l.map((function(e){return en.toManaFont(e,{className:t.mana,style:{marginRight:"0.25em",fontSize:"0.85em"}})}))).length>1&&l.splice(1,0," // "),Object(ye.jsx)(he.a,{variant:"body2",noWrap:!0,children:d?Object(ye.jsx)("span",{title:"".concat(d," Cmc"),children:l}):l}))}))),RenderType:Object(xe.a)(nn)(Object(a.memo)((function(e){var t=e.classes,n=e.card,a=e.columnName,r=void 0===a?"type_line":a,c=e.cardFace,i=e.renderStyle,o=void 0===i?"row":i,s=void 0!==c?n.card_faces[c]:n,l=s[r],d=s.color_indicator,u=Object(Ae.a)((function(e){return e.breakpoints.down("md")}));switch(o){default:case"row":var j=(l=l.replace(/\u2014/g,"-").replace(/Legendary/g,"Lgd.")).split("//").map((function(e){return e.trim()}));return Object(ye.jsxs)(he.a,{noWrap:!0,variant:"body2",className:t.widthLimit,title:u?l:"",children:[j[0],j.length>1&&Object(ye.jsx)(Ut.a,{mdDown:!0,children:" // "+j[1]})]});case"content":return l=l.replace(/\u2014/g,"-"),(d=d&&en.toColorIndicator(d,{style:{marginRight:"0.25em",fontSize:"0.9em"}}))?Object(ye.jsxs)(ye.Fragment,{children:[d,l]}):l}}))),RenderDate:Object(xe.a)(nn)(Object(a.memo)((function(e){e.classes;var t=e.card,n=e.columnName,a=new Date(t[void 0===n?"date_added":n]),r=[a.getFullYear(),a.getMonth()+1,a.getDate()],c=r[0],i=r[1],o=r[2];return[en.addLeadingZero(o),en.addLeadingZero(i),c].join("/")}))),RenderFlavorText:Object(xe.a)(nn)(Object(a.memo)((function(e){var t=e.classes,n=e.card,a=e.cardFace,r=n.lang,c=(void 0!==a?n.card_faces[a]:n).flavor_text,i=A.a.words(c).length>2?"left":"center";return c?Object(ye.jsx)("div",{align:i,lang:r,className:Object(Jt.a)(t.flavorText),children:c}):""})))},cn=function(e){var t=e.card,n=e.columnName,a=Object(we.a)(e,an);n=n.replace(/[ ]+/g,"_");var r=Object(l.a)({card:t,columnName:n},a);switch(n){case"name":return Object(ye.jsx)(rn.RenderName,Object(l.a)({},r));case"set":return Object(ye.jsx)(rn.RenderSet,Object(l.a)({},r));case"condition":return Object(ye.jsx)(rn.RenderCondition,Object(l.a)({},r));case"power_toughness":return Object(ye.jsx)(rn.RenderPowerToughness,Object(l.a)({},r));case"oracle":case"oracle_text":return Object(ye.jsx)(rn.RenderOracleText,Object(l.a)({},r));case"signed":case"altered":case"misprint":case"foil":return Object(ye.jsx)(rn.RenderBoolean,Object(l.a)({},r));case"amount":return Object(ye.jsx)(rn.RenderAmount,Object(l.a)({},r));case"total_price":case"price":return Object(ye.jsx)(rn.RenderPrice,Object(l.a)({},r));case"tag":return Object(ye.jsx)(rn.RenderTag,Object(l.a)({},r));case"mana_cost":return Object(ye.jsx)(rn.RenderManaCost,Object(l.a)({},r));case"type_line":case"type":return Object(ye.jsx)(rn.RenderType,Object(l.a)({},r));case"date":case"date_created":case"date_added":return Object(ye.jsx)(rn.RenderDate,Object(l.a)({},r));case"flavor":case"flavor_text":return Object(ye.jsx)(rn.RenderFlavorText,Object(l.a)({},r));default:return Object(ye.jsx)(rn.DefaultRender,Object(l.a)({},r))}},on=(rn.DefaultRender,rn.RenderName,rn.RenderOracleText,rn.RenderPowerToughness,rn.RenderSet,rn.RenderBoolean,rn.RenderAmount,rn.RenderPrice,rn.RenderTag,rn.RenderManaCost,rn.RenderType,rn.RenderDate,rn.RenderFlavorText,["card","renderStyle"]),sn=function(e){var t=e.card,n=e.renderStyle,a=void 0===n?"content":n,r=Object(we.a)(e,on),c=Object.assign({},(Object(me.a)(r),r)),i=t&&cn(Object(l.a)({card:t,columnName:"name",renderStyle:a},c)),o=t&&cn(Object(l.a)({card:t,columnName:"mana_cost",renderStyle:a},c)),s=t&&cn(Object(l.a)({card:t,columnName:"type_line",renderStyle:a},c)),d=t&&cn(Object(l.a)({card:t,columnName:"set",renderStyle:a},c)),u=t&&cn(Object(l.a)({card:t,columnName:"oracle_text",renderStyle:a},c)),j=t&&cn(Object(l.a)({card:t,columnName:"flavor_text",renderStyle:a},c)),b=t&&cn(Object(l.a)({card:t,columnName:"artist",renderStyle:a},c)),p=t&&cn(Object(l.a)({card:t,columnName:"collector_number",renderStyle:a},c)),m=t&&cn(Object(l.a)({card:t,columnName:"power_toughness",renderStyle:a},c));return Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"space-between",direction:"column",style:{height:"100%"},children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"center",spacing:2,children:[Object(ye.jsx)(fe.a,{item:!0,name:"name",children:i}),o&&Object(ye.jsx)(fe.a,{item:!0,name:"mana-cost",children:o})]}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,component:Gt.a,justifyContent:"center",spacing:1,flexGrow:1,children:[Object(ye.jsx)(fe.a,{item:!0,name:"type-line",children:s}),Object(ye.jsx)(fe.a,{item:!0,name:"set",children:d})]}),u&&Object(ye.jsx)(fe.a,{item:!0,name:"oracle-text",component:Gt.a,paddingTop:1,flexGrow:1,children:u}),j&&Object(ye.jsx)(fe.a,{item:!0,name:"flavor-text",component:Gt.a,align:"left",flexGrow:1,paddingTop:"0.45em",children:j}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"space-between",alignItems:"baseline",wrap:"nowrap",component:he.a,variant:"overline",style:{marginTop:"0.3em"},children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,spacing:1,children:[Object(ye.jsxs)(fe.a,{item:!0,name:"collector-number",children:["#",p]}),Object(ye.jsxs)(fe.a,{item:!0,name:"artist",children:[Object(ye.jsx)("span",{className:"ms ms-shadow ms-artist-nib"}),b]})]}),m&&Object(ye.jsx)(fe.a,{item:!0,name:"power-toughness",children:m})]})]})},ln=n(621),dn=n(339),un=n(625),jn=n(679),bn=n(626),pn=n(627),mn=n(629),fn=n(683),On=n(630),hn=n(632),gn=n(365),xn=n(364),vn=n(680),yn=n(622),Cn=n(631),wn=function(e){return{root:{},accordion:{backgroundColor:"dark"===e.palette.type?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.12)",marginBottom:e.spacing(1)},"accordion-expanded":{paddingBottom:e.spacing(1)},listing:{margin:0,"& > li":{margin:"8px 1.25em 8px 0"},"& > li:first-child":{paddingTop:0},"& > li:last-child":{paddingBottom:0}},editButtonContainer:{}}},Sn=["card","updateHeight","onMenuHover"],kn=["foil"],En=["foil"],In=Object(xe.a)(wn)(Object(o.b)((function(e){return{tagFilters:e.actions.app.collection.filters.tag||[],editEnabled:e.actions.app.collection.cardInfo.editEnabled}}),(function(e){return{dispatch:{updateCollection:function(t){return e($({cards:t}))},addFilters:function(t){return e(ce({filters:t}))},setEditEnabled:function(t){return e(ue({enabled:t}))}}}}))((function(e){var t=e.card,n=e.updateHeight,r=e.onMenuHover,c=Object(we.a)(e,Sn),i=c.classes,o=c.dispatch,s=c.tagFilters,d=c.editEnabled,u=Object(Ne.b)().enqueueSnackbar,j=Object(Ae.a)((function(e){return e.breakpoints.down("sm")})),b=function(){return setTimeout((function(){return n()}),150)},p=Object(a.useState)(!1),m=Object(Xe.a)(p,2),f=m[0],O=m[1],h=Object(a.useState)({}),g=Object(Xe.a)(h,2),x=g[0],v=g[1],y=Object(a.useState)([]),C=Object(Xe.a)(y,2),w=C[0],k=C[1],E=Object(a.useState)([]),I=Object(Xe.a)(E,2),_=I[0],P=I[1],T=Object(a.useState)(void 0),N=Object(Xe.a)(T,2),R=N[0],D=N[1],M=function(){k([]),P([]),r(null),O(!1),o.setEditEnabled(!1),v({id:t.id,tag:t.tag,amount:t.amount,foil:t.foil,condition:t.condition,signed:t.signed,altered:t.altered,misprint:t.misprint,set:t.set,collector_number:t.collector_number,lang:t.lang}),Promise.all([Ft(t,"set"),Ft(t,"lang")]).then((function(e){var t=Object(Xe.a)(e,2),n=t[0],a=t[1];k(n),P(a)}))};Object(a.useEffect)((function(){M(),fetch(t.rulings_uri).then((function(e){return e.json()})).then((function(e){D(A.a.chain(e.data).reverse().map((function(e){return Object.assign(e,{published_at:new Date(e.published_at)})})).sortBy("published_at").value())}))}),[t]);var L=function(e){return function(t){Array.isArray(s)?o.addFilters({tag:s.includes(e)?s.filter((function(t){return t!==e})):s.concat(e)}):o.addFilters({tag:[e]})}},z=function(e){return function(n){if(e){var a={_id:t._id,amount:0};S.MODIFY_DB_ALLOWED?Bt.updateCards([a]).then((function(e){o.updateCollection(e),u("Deleted ".concat(t.name," [").concat(t.set.toUpperCase(),"]"),{variant:"success"})})).catch((function(e){u("Failed to delete ".concat(t.name," [").concat(t.set.toUpperCase(),"]"),{variant:"error"})})):(o.updateCollection(a.map((function(e){return{action:"UPDATED",card:e}}))),u("Deleted ".concat(t.name," [").concat(t.set.toUpperCase(),"]"),{variant:"success"}))}else O(!0)}},B=function(e,n){switch(e){case"amount":n=function(e,t,n){return Math.max(Math.min(e,n),t)}(n,1,999999),v((function(e){return Object(l.a)(Object(l.a)({},e),{},{amount:n})})),r(Object(l.a)(Object(l.a)(Object(l.a)({},t),x),{},{amount:n}));break;case"foil":v((function(e){return Object(l.a)(Object(l.a)({},e),{},{foil:n})})),r(Object(l.a)(Object(l.a)(Object(l.a)({},t),x),{},{foil:n}));break;case"condition":case"signed":case"altered":case"misprint":v((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(tn.a)({},e,n))}));break;case"tag":n=A.a.chain(n).map((function(e){return e.trim()})).compact().uniqBy((function(e){return e.toLowerCase()})).value(),v((function(e){return Object(l.a)(Object(l.a)({},e),{},{tag:n})}));break;case"set":var a=n.split(":"),c=Object(Xe.a)(a,2),i=c[0],o=c[1],s=w.find((function(e){return e.set===i&&e.collector_number===o})),d=(s.foil,Object(we.a)(s,kn));v((function(e){return Object(l.a)(Object(l.a)({},e),d)})),P([]),Ft(d,"lang").then(P);break;case"lang":var u=_.find((function(e){return e.lang===n})),j=(u.foil,Object(we.a)(u,En));v((function(e){return Object(l.a)(Object(l.a)({},e),j)}))}};return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,xs:12,spacing:1,justifyContent:"center",alignItems:"center",className:i.root,children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,xs:12,spacing:1,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center",className:i.editButtonContainer,children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{size:"small",variant:"contained",color:"primary",onClick:function(e){if(d){var n=Object.assign(A.a.cloneDeep(t),x);S.MODIFY_DB_ALLOWED?Bt.updateCards([n]).then((function(e){o.updateCollection(e),u("Updated ".concat(t.name," [").concat(t.set.toUpperCase(),"]"),{variant:"info"})})).catch((function(e){u("Error updating ".concat(t.name," [").concat(t.set.toUpperCase(),"]"),{variant:"error"}),console.error({error:e})})):(o.updateCollection([{action:"UPDATED",card:n}]),u("Updated ".concat(t.name," [").concat(t.set.toUpperCase(),"]"),{variant:"info"}))}r(null),o.setEditEnabled(!d),b()},children:d?"Save":"Edit"})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(ln.a,{in:d,style:{transformOrigin:"center right"},children:Object(ye.jsx)(Ee.a,{size:"small",variant:"outlined",onClick:function(e){M(),r(null),o.setEditEnabled(!1),b()},children:"cancel"})})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(ln.a,{in:d,style:{transformOrigin:"center right"},children:Object(ye.jsx)(Wt.a,{title:"Delete",size:"small",onClick:z(!1),children:Object(ye.jsx)(yn.a,{})})})})]}),d?Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"center",alignItems:"flex-start",spacing:1,children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,direction:"column",justifyContent:"center",alignItems:"flex-start",style:{maxWidth:"min-content"},children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(dn.a,{size:"small",variant:"outlined",type:"number",label:"Amount",color:"secondary",value:x.amount,inputProps:{inputMode:"numeric",min:1},onChange:function(e){return B("amount",e.target.value)},style:{marginLeft:0}})}),Object(ye.jsx)(fe.a,{item:!0,style:{width:"9em",paddingTop:8},children:Object(ye.jsx)(dn.a,{select:!0,color:"secondary",variant:"outlined",margin:"dense",size:"small",align:"left",label:"Condition",value:x.condition||"",onChange:function(e){return B("condition",e.target.value)},style:{marginLeft:0},children:[["NM","NM"],["LP","LP"],["MP","MP"],["HP","HP"],["DAMAGED","Damaged"]].map((function(e){return Object(ye.jsx)(Le.a,{value:e[0],children:e[1]},e[0])}))})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(un.a,{label:"Foil",control:Object(ye.jsx)(jn.a,{checked:x.foil,onChange:function(e){return B("foil",e.target.checked)}})})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(un.a,{label:"Signed",control:Object(ye.jsx)(jn.a,{checked:x.signed,onChange:function(e){return B("signed",e.target.checked)}})})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(un.a,{label:"Altered",control:Object(ye.jsx)(jn.a,{checked:x.altered,onChange:function(e){return B("altered",e.target.checked)}})})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(un.a,{label:"Misprint",control:Object(ye.jsx)(jn.a,{checked:x.misprint,onChange:function(e){return B("misprint",e.target.checked)}})})})]}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,direction:"column",spacing:1,xs:12,sm:10,md:!0,children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,wrap:"nowrap",spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,xs:!0,style:{width:"1px"},children:Object(ye.jsx)(dn.a,{select:!0,color:"secondary",variant:"outlined",margin:"dense",size:"small",align:"left",disabled:w.length<=1,label:"Set",value:0===(w||[]).length?"":"".concat(x.set,":").concat(x.collector_number),onChange:function(e){return B("set",e.target.value)},SelectProps:{onClose:function(e){return r(Object(l.a)(Object(l.a)({},t),x))}},InputProps:0===w.length?{startAdornment:Object(ye.jsx)(bn.a,{position:"start",children:Object(ye.jsx)(pn.a,{size:20})})}:{},children:(w||[]).map((function(e){return Object(ye.jsx)(Le.a,{value:"".concat(e.set,":").concat(e.collector_number),onMouseEnter:function(t){return r(Object(l.a)(Object(l.a)({},e),{},{foil:x.foil}))},onMouseLeave:function(e){return r(Object(l.a)(Object(l.a)({},t),x))},children:"".concat(e.set_name," - #").concat(e.collector_number)},"".concat(e.set,":").concat(e.collector_number))}))})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(dn.a,{select:!0,color:"secondary",variant:"outlined",margin:"dense",size:"small",align:"left",label:"Language",disabled:_.length<=1,value:0===(_||[]).length?"":x.lang,style:{width:"6em"},onChange:function(e){return B("lang",e.target.value)},SelectProps:{onClose:function(e){return r(Object(l.a)(Object(l.a)({},t),x))}},InputProps:0===_.length?{startAdornment:Object(ye.jsx)(bn.a,{position:"start",children:Object(ye.jsx)(pn.a,{size:20})})}:{},children:(_||[]).map((function(e){return Object(ye.jsx)(Le.a,{value:e.lang,onMouseEnter:function(t){return r(Object(l.a)(Object(l.a)({},e),{},{foil:x.foil}))},onMouseLeave:function(e){return r(Object(l.a)(Object(l.a)({},t),x))},children:e.lang},e.lang)}))})})]}),Object(ye.jsx)(fe.a,{item:!0,style:{marginRight:11},children:Object(ye.jsx)(vn.a,{multiple:!0,freeSolo:!0,disableClearable:!0,limitTags:4,label:"Tags",variant:"outlined",margin:"dense",size:"small",color:"secondary",options:[],value:x.tag,onChange:function(e,t){B("tag",t)},onInputChange:function(e,t){if(null!==t&&void 0!==t&&t.match(/[;,]/g)){var n=A.a.chain(t).split(/[;,]/).map((function(e){return e.trim()})).compact().uniqBy((function(e){return e.toLowerCase()})).value();n.length>0?B("tag",x.tag.concat(n)):B("tag",x.tag)}},renderInput:function(e){return Object(ye.jsx)(dn.a,Object(l.a)(Object(l.a)({multiline:!0},e),{},{color:"secondary",variant:"outlined",label:"Tags",helperText:["Tags are seperated by ",Object(ye.jsx)("code",{children:"Enter"})," or ",Object(ye.jsx)("code",{children:"[;,]"})].map((function(e,t){return Object(ye.jsx)(a.Fragment,{children:e},t)}))}))}})})]})]}):Object(ye.jsxs)(fe.a,{item:!0,container:!0,spacing:2,children:[Object(ye.jsx)(fe.a,{item:!0,xs:4,component:"table",style:{borderSpacing:8,height:"fit-content"},children:Object(ye.jsx)("tbody",{children:["amount","condition","","foil","signed","altered","misprint"].map((function(e,n){return Object(ye.jsx)("tr",{style:{verticalAlign:"condition"===e?"baseline":"middle"},children:e?Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)("td",{style:{width:0},children:Object(ye.jsx)(he.a,{children:A.a.upperFirst(e)})}),Object(ye.jsx)("td",{align:"center",children:Object(ye.jsx)(cn,{card:t,columnName:e,renderStyle:"content"})})]}):Object(ye.jsx)("td",{colSpan:2,children:Object(ye.jsx)(ge.a,{})})},n)}))})}),Object(ye.jsx)(fe.a,{item:!0,container:!0,xs:!0,justifyContent:"flex-start",alignItems:"flex-start",children:Object(ye.jsxs)(fe.a,{item:!0,container:!0,xs:12,spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,xs:12,component:he.a,variant:"h6",align:"left",children:Object(ye.jsx)(mn.a,{arrow:!0,placement:"right",enterDelay:300,style:{cursor:"help"},title:t.tag.length>0?Object(ye.jsxs)(ye.Fragment,{children:["Click a tag to search for ",Object(ye.jsx)("br",{})," more cards with that tag"]}):"",children:Object(ye.jsx)("span",{children:"Tags"})})}),Object(ye.jsx)(fe.a,{item:!0,container:!0,spacing:1,style:{paddingLeft:16},children:t.tag.length>0?t.tag.map((function(e,t){return Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)($t.a,{label:e,color:Array.isArray(s)&&s.includes(e)?"secondary":"default",onClick:L(e),size:"small",variant:"outlined"})},t)})):Object(ye.jsx)(he.a,{style:{fontFamily:"Determination Mono"},children:"* But nobody came."})})]})}),(null===R||void 0===R?void 0:R.length)>0&&Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(fe.a,{item:!0,xs:12,children:Object(ye.jsx)(ge.a,{})}),Object(ye.jsx)(fe.a,{item:!0,container:!0,style:{paddingTop:12},children:Object(ye.jsxs)(fn.a,{className:i.accordion,classes:{expanded:i["accordion-expanded"]},TransitionProps:{onEntering:b,onEntered:b,onExiting:b,onExited:b},children:[Object(ye.jsx)(On.a,{expandIcon:Object(ye.jsx)(Cn.a,{}),children:Object(ye.jsx)(he.a,{variant:"h6",children:j?"Rulings":"Additional Rulings"})}),Object(ye.jsx)(hn.a,{style:{padding:0},children:Object(ye.jsx)("ul",{className:i.listing,children:R.map((function(e,t){return Object(ye.jsx)("li",{children:Object(ye.jsx)(cn,{card:{oracle_text:e.comment},columnName:"oracle_text"})},t)}))})})]})})]})]})]}),Object(ye.jsx)(fe.a,{container:!0,spacing:5,justifyContent:"center",alignItems:"center",component:gn.a,closeAfterTransition:!0,onClose:function(e){return O(!1)},open:f,BackdropProps:{timeout:500},children:Object(ye.jsx)(fe.a,{item:!0,component:xn.a,in:f,children:Object(ye.jsx)(Oe.a,{children:Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:2,children:[Object(ye.jsxs)(fe.a,{item:!0,xs:12,align:"center",children:[Object(ye.jsx)(he.a,{noWrap:!0,variant:"h5",align:"left",children:"Confirm Action"}),Object(ye.jsx)(he.a,{noWrap:!0,variant:"body1",align:"left",children:"Are you sure you want to delete this card?"}),Object(ye.jsx)(he.a,{noWrap:!0,variant:"body2",align:"left",color:"error",children:"This action is irreversible."})]}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"flex-end",xs:12,spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"outlined",onClick:function(e){return O(!1)},children:"Nop"})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"contained",color:"secondary",onClick:z(!0),children:"Yep"})})]})]})})})})]})}))),_n=function(e){var t=e.breakpoints.down("sm");return{baseContainer:{position:"relative"},root:{backgroundColor:e.palette.background.secondary,position:"relative",marginTop:e.spacing(1),padding:"".concat(e.spacing(5),"px ").concat(e.spacing(5),"px ").concat(e.spacing(5),"px ").concat(e.spacing(4),"px")},topArrow:{content:'""',zIndex:1,top:-1,width:0,height:0,position:"absolute",backgroundColor:"unset",border:"solid transparent",borderWidth:"1.5rem 1.75rem 0rem 1.75rem",left:"calc(50% - (1.75rem / 2))",transition:"all 0.3s ease"},image:{marginRight:-e.spacing(1)},content:Object(tn.a)({transition:"all 0.3s ease",padding:e.spacing(2),marginTop:0,maxWidth:"42.5vw"},t,{maxWidth:"70vw"})}},Pn=["refs","card","rootComponent","rootProps","topArrowProps"],Tn=Object(xe.a)(_n)(Object(o.b)((function(e){return{viewIndex:e.actions.app.collection.cardInfo.viewIndex}}),(function(e){return{dispatch:{setViewIndex:function(t){return e(de({index:t}))}}}}))((function(e){var t,n=e.refs,r=e.card,c=e.rootComponent,i=e.rootProps,o=e.topArrowProps,s=Object(we.a)(e,Pn),d=s.classes,u=s.dispatch,j=s.viewIndex,b=Object(a.useRef)(),p=Object(a.useState)(),m=Object(Xe.a)(p,2),f=m[0],O=m[1],h=Object(Ae.a)((function(e){return e.breakpoints.down("sm")})),g=Object(Ae.a)((function(e){return e.breakpoints.down("md")}));Object(a.useImperativeHandle)(n,(function(){var e;return{updateHeight:(null===(e=b.current)||void 0===e?void 0:e.updateHeight)||function(){}}})),Object(a.useEffect)((function(){u.setViewIndex(0)}),[]);var x=function(e){return function(t){u.setViewIndex(e)}};return Object(ye.jsxs)("div",{className:d.baseContainer,children:[Object(ye.jsx)("div",Object(l.a)({className:d.topArrow},o)),Object(ye.jsxs)(fe.a,Object(l.a)(Object(l.a)({container:!0,justifyContent:"center",alignItems:h?"center":"flex-start",direction:h?"column":"row",component:c,wrap:"nowrap",className:d.root},i),{},{children:[Object(ye.jsx)(Ut.a,{smDown:!0,children:Object(ye.jsx)(fe.a,{item:!0,className:d.image,children:Object(ye.jsx)(vr,{showPrice:!0,tiltEnabled:!0,transform3dEnabled:!0,card:f||r})})}),Object(ye.jsx)(Ut.a,{mdUp:!0,children:Object(ye.jsx)(fe.a,{item:!0,style:{marginBottom:16},children:Object(ye.jsx)(vr,{showPrice:!0,tiltEnabled:!0,transform3dEnabled:!0,card:f||r})})}),Object(ye.jsx)(fe.a,{item:!0,xs:12,md:9,lg:8,xl:7,align:"center",component:Oe.a,elevation:3,className:d.content,children:Object(ye.jsxs)(Yt.a,{ignoreNativeScroll:!0,ref:b,animateHeight:!0,index:j,onChangeIndex:x,slideStyle:{overflow:"hidden"},children:[Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"center",alignItems:"center",wrap:"nowrap",style:{padding:1.5},children:[Object(ye.jsx)(fe.a,{item:!0,xs:12,children:r.is_transform||r.is_split||r.is_flip?Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"center",alignItems:"stretch",spacing:g?0:2,children:[Object(ye.jsx)(fe.a,{item:!0,container:!0,justifyContent:"center",xs:12,sm:11,lg:!0,children:Object(ye.jsx)(sn,{card:r,cardFace:0})}),Object(ye.jsx)(Ut.a,{lgUp:!0,children:Object(ye.jsx)(fe.a,{container:!0,wrap:"nowrap",alignItems:"center",style:{alignSelf:"center"},children:Object(ye.jsx)(fe.a,{item:!0,xs:!0,component:ge.a,style:{marginBottom:8}})})}),Object(ye.jsx)(Ut.a,{mdDown:!0,children:Object(ye.jsx)(ge.a,{flexItem:!0,orientation:"vertical"})}),Object(ye.jsx)(fe.a,{item:!0,container:!0,justifyContent:"center",xs:12,sm:11,lg:!0,children:Object(ye.jsx)(sn,{card:r,cardFace:1})})]}):Object(ye.jsx)(fe.a,{item:!0,container:!0,justifyContent:"center",xs:12,md:10,lg:9,xl:8,children:Object(ye.jsx)(sn,{card:r})})}),Object(ye.jsx)(fe.a,{item:!0,style:{alignSelf:"flex-start"},children:Object(ye.jsx)(Wt.a,{size:"small",onClick:x(1),children:Object(ye.jsx)(Vt.a,{})})})]}),Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"center",alignItems:"center",wrap:"nowrap",style:{padding:1.5},children:[Object(ye.jsx)(fe.a,{item:!0,style:{alignSelf:"flex-start"},children:Object(ye.jsx)(Wt.a,{size:"small",onClick:x(0),children:Object(ye.jsx)(Ht.a,{})})}),Object(ye.jsx)(fe.a,{item:!0,container:!0,xs:!0,children:Object(ye.jsx)(In,{card:r,updateHeight:null===(t=b.current)||void 0===t?void 0:t.updateHeight,onMenuHover:function(e){e?(e=Ke(e,r.currency),e=rt(e),O(e)):O(null)}})})]})]})})]}))]})}))),Nn=n(639),Rn=n(640),An=n(641),Dn=n(635),Mn=n(636),Ln=n(684),zn=n(642),Bn=n(643),Fn=n(685),Un=n(645),Wn=n(646),Vn=n(618),Hn=n(110),qn=n(637),Yn=n(638),Gn=n(206),Xn=n.n(Gn),$n=function(e){var t="dark"===e.palette.type?Xn.a[700]:Xn.a.A100;return{root:{"& > *":{borderBottom:"unset"}},content:{position:"relative"},floating:{zIndex:2,position:"absolute",top:e.spacing(1),left:e.spacing(9),maxWidth:e.spacing(25),width:"max-content",padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1.25),"px ").concat(e.spacing(.5),"px ").concat(e.spacing(1.25),"px"),backgroundColor:t,color:e.palette.getContrastText(t)},checkboxCell:{},checkbox:{padding:"5px 0 5px 8px"}}},Jn=["columns","key","card","onMouseEnter"],Kn=Object(xe.a)($n)(Object(o.b)((function(e){return{selectedCardIds:e.actions.app.collection.selectedCardIds,cardsSelectableEnabled:e.actions.app.collection.cardsSelectableEnabled,currentOpenCardId:e.actions.app.collection.currentOpenCardId}}),(function(e){return{dispatch:{addSelectedCardId:function(t){return e(ae({id:t}))},removeSelectedCardId:function(t){return e(ne({id:t}))},setCurrentOpenCardId:function(t){return e(ee({id:t}))}}}}))((function(e){var t=e.columns,n=e.key,r=e.card,c=e.onMouseEnter,i=Object(we.a)(e,Jn),o=i.classes,s=i.dispatch,d=i.cardsSelectableEnabled,u=i.selectedCardIds,j=i.currentOpenCardId,b=Object(Hn.a)(),p=Object(a.useRef)(),m=Object(a.useRef)(),f=Object(a.useRef)(),O=Object(a.useState)(!1),h=Object(Xe.a)(O,2),g=h[0],x=h[1],v=Object(a.useState)(!1),y=Object(Xe.a)(v,2),C=y[0],w=y[1],S=Object(a.useState)({clearSelectedCardsOnExit:!1}),k=Object(Xe.a)(S,2),E=k[0],I=k[1],_=Object(a.useState)(!1),P=Object(Xe.a)(_,2),T=P[0],N=P[1];Object(a.useEffect)((function(){x(j===r._id)}),[j]),Object(a.useEffect)((function(){E.mouseY&&E.mouseX?0===u.length&&(s.addSelectedCardId(r._id),I((function(e){return Object(l.a)(Object(l.a)({},e),{},{clearSelectedCardsOnExit:!0})}))):E.clearSelectedCardsOnExit&&(s.removeSelectedCardId(r._id),I({clearSelectedCardsOnExit:!1}))}),[E.mouseY,E.mouseX]);var R=function(){g?s.setCurrentOpenCardId(null):s.setCurrentOpenCardId(r._id)},A=function(e){return function(t){var n;null!=e&&w(e),null===(n=m.current)||void 0===n||n.updateHeight()}};return Object(ye.jsxs)(a.Fragment,{children:[Object(ye.jsx)(ba,Object(l.a)({setState:I},E)),Object(ye.jsxs)(Dn.a,{className:Object(Jt.a)(o.root,"cursor-pointer"),onClick:R,onMouseEnter:c,onContextMenu:function(e){e.preventDefault(),I((function(t){return Object(l.a)(Object(l.a)({},t),{},{mouseX:e.clientX,mouseY:e.clientY})}))},onMouseDown:function(e){e.preventDefault(),1===e.button&&(u.includes(r._id)?s.removeSelectedCardId(r._id):s.addSelectedCardId(r._id))},style:{backgroundColor:u.includes(r._id)?b.palette.action.selected:"unset"},children:[Object.entries(t).map((function(e,t){var n=Object(Xe.a)(e,2),a=n[0];n[1];return Object(ye.jsxs)(Mn.a,Object(l.a)(Object(l.a)({align:"center",className:o.content},"set"===a?{ref:p,onMouseEnter:function(e){return N(!0)},onMouseLeave:function(e){return N(!1)}}:{}),{},{children:[Object(ye.jsx)(cn,{card:r,columnName:a}),"set"===a&&T&&Object(ye.jsx)(Oe.a,{elevation:5,className:o.floating,onMouseEnter:function(e){return N(!1)},children:[r.set_name,Ge()(r.rarity),"#"+r.collector_number].join(" - ")})]}),t)})),d?Object(ye.jsx)(Mn.a,{onClick:function(e){e.stopPropagation(),f.current.checked?s.removeSelectedCardId(r._id):s.addSelectedCardId(r._id)},className:o.checkboxCell,children:Object(ye.jsx)(jn.a,{size:"small",checked:u.includes(r._id),onChange:function(e){e.target.checked?s.addSelectedCardId(r._id):s.removeSelectedCardId(r._id)},className:o.checkbox,inputProps:{ref:f}})}):Object(ye.jsx)(Ut.a,{smDown:!0,children:Object(ye.jsx)(Mn.a,{children:Object(ye.jsx)(Wt.a,{size:"small",onClick:R,children:g?Object(ye.jsx)(qn.a,{}):Object(ye.jsx)(Yn.a,{})})})})]}),Object(ye.jsx)(Dn.a,{onMouseEnter:c,className:o.row,style:{display:C?"table-row":"none"},children:Object(ye.jsx)(Mn.a,{colSpan:10,style:{padding:0},children:Object(ye.jsx)(Vn.a,{mountOnEnter:!0,unmountOnExit:!0,timeout:"auto",in:g,onEnter:A(!0),onExited:A(!1),onEntering:A(),children:Object(ye.jsx)(Tn,{card:r,refs:m,topArrowProps:{style:{borderTopColor:b.palette.background.paper}}})})})})]},n)}))),Zn=function(e){return{root:{paddingBottom:e.spacing(1)},"card-image":{zIndex:1,position:"sticky",top:e.spacing(8),marginRight:e.spacing(2)},tableContainer:{maxWidth:"90vw"},tableFooter:{borderTop:"1px solid ".concat(e.palette.divider)}}},Qn=["data"],ea=Object(xe.a)(Zn)(Object(o.b)((function(e){return{columns:e.actions.app.collection.tableView.columns,cardsSelectableEnabled:e.actions.app.collection.cardsSelectableEnabled,selectedCardIds:e.actions.app.collection.selectedCardIds,pageNumber:e.actions.app.collection.pageNumber,perPage:e.actions.app.collection.perPage}}),(function(e){return{dispatch:{setSelectedCardIds:function(t){return e(te({selectedCardIds:t}))},setPageNumber:function(t){return e(se({pageNumber:t}))},setPerPage:function(t){return e(le({perPage:t}))}}}}))((function(e){var t=e.data,n=Object(we.a)(e,Qn),r=n.classes,c=n.dispatch,i=n.columns,o=n.pageNumber,s=n.perPage,l=n.cardsSelectableEnabled,d=n.selectedCardIds,u=Object(a.useState)(),j=Object(Xe.a)(u,2),b=j[0],p=j[1],m=Object(a.useState)(),f=Object(Xe.a)(m,2),O=f[0],h=f[1],g=Object(a.useState)("desc"),x=Object(Xe.a)(g,2),v=x[0],y=x[1],C=Object(a.useState)(t),w=Object(Xe.a)(C,2),S=w[0],k=w[1],E=Object(a.useState)(t),I=Object(Xe.a)(E,2),_=I[0],P=I[1];Object(a.useEffect)((function(){P((function(){return-1===s?S:S.slice(o*s,o*s+s)}))}),[S,o,s]),Object(a.useEffect)((function(){var e;switch(O){case"mana_cost":case"mana_value":e=["cmc"];break;case"total_price":case"prices":case"price":e=["price"];break;case"type":case"type_line":e=[function(e){return e.type_line.replace("Legendary ","")}];break;case"set":case"rarity":e=[function(e){var t;return null!==(t=e.set_data.parent_set_code)&&void 0!==t?t:e.set},function(e){switch(e.rarity){default:return 4;case"common":return 3;case"uncommon":return 2;case"rare":return 1;case"mythic":return 0}}];break;default:e=[O];break;case null:case void 0:case"":e=[function(e){return new Date(e.date_created)}]}k(A.a.orderBy(t,[].concat(Object(Re.a)(e),["name","collector_number"]),v)),c.setPageNumber(0)}),[t,v,O]),Object(a.useEffect)((function(){p(null)}),[S,_]),Object(a.useEffect)((function(){c.setSelectedCardIds([])}),[t]);return Object(ye.jsx)(fe.a,{item:!0,container:!0,spacing:1,xs:11,className:r.root,children:Object(ye.jsxs)(fe.a,{item:!0,container:!0,wrap:"nowrap",justifyContent:"center",children:[Object(ye.jsx)(Ut.a,{mdDown:!0,children:Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)("div",{className:r["card-image"],children:Object(ye.jsx)(vr,{tiltEnabled:!0,transform3dEnabled:!0,card:b})})})}),Object(ye.jsx)(fe.a,{item:!0,md:!0,children:Object(ye.jsx)(Nn.a,{component:Oe.a,className:r.tableContainer,elevation:5,children:Object(ye.jsxs)(Rn.a,{size:"small",children:[Object(ye.jsx)(An.a,{className:r.tableHead,children:Object(ye.jsxs)(Dn.a,{children:[Object.entries(i).map((function(e){var t=Object(Xe.a)(e,2),n=t[0],a=t[1];return Object(ye.jsx)(Mn.a,{style:{paddingLeft:"16px"},align:"center",sortDirection:O===n&&v,children:Object(ye.jsx)(Ln.a,{style:{whiteSpace:"nowrap"},active:O===n,direction:O===n?v:"asc",onClick:function(e){var t;(t=n)===O?"desc"===v?y("asc"):(h(""),y("desc")):(h(t),y("desc"))},children:a})},n)})),l?Object(ye.jsx)(Mn.a,{onClick:function(e){return e.stopPropagation()},className:r.checkbox,children:Object(ye.jsx)(mn.a,{arrow:!0,placement:"top",title:d.length>=t.length?"Clear Selection":"Select All",children:Object(ye.jsx)(jn.a,{size:"small",checked:d.length>=t.length,indeterminate:d.length>0&&d.length<t.length,onChange:function(e){e.target.checked?c.setSelectedCardIds(t.map((function(e){return e._id}))):c.setSelectedCardIds([])}})})}):Object(ye.jsx)(Ut.a,{smDown:!0,children:Object(ye.jsx)(Mn.a,{className:r.iconCell})})]})}),Object(ye.jsx)(zn.a,{children:_ instanceof Array&&_.map((function(e){return Object(ye.jsx)(Kn,{onMouseEnter:function(t){return function(e,t){p(e)}(e)},columns:i,card:e},e._id)}))}),Object(ye.jsx)(Bn.a,{className:r.tableFooter,children:Object(ye.jsx)(Dn.a,{children:Object(ye.jsx)(Fn.a,{rowsPerPageOptions:[10,25,50,100,{label:"All",value:-1}],labelRowsPerPage:"Cards per page:",colSpan:9,count:t.length,rowsPerPage:s,page:o,labelDisplayedRows:function(e){var t=e.from,n=e.to,a=e.count;return"".concat(t,"-").concat(-1!==n?n:a," of ").concat(-1!==a?a:"more than ".concat(n))},onPageChange:function(e,t){return c.setPageNumber(t)},onRowsPerPageChange:function(e){return c.setPerPage(parseInt(e.target.value))},SelectProps:{native:!0},ActionsComponent:function(e){var t=e.count,n=e.page,a=e.rowsPerPage,r=e.onPageChange;return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Wt.a,{size:"small",onClick:function(e){return r(e,0)},disabled:0===n,"aria-label":"first page",children:Object(ye.jsx)(Un.a,{})}),Object(ye.jsx)(Wt.a,{size:"small",onClick:function(e){return r(e,n-1)},disabled:0===n,"aria-label":"previous page",children:Object(ye.jsx)(Ht.a,{})}),Object(ye.jsx)(Wt.a,{size:"small",onClick:function(e){return r(e,n+1)},disabled:n>=Math.ceil(t/a)-1,"aria-label":"next page",children:Object(ye.jsx)(Vt.a,{})}),Object(ye.jsx)(Wt.a,{size:"small",onClick:function(e){return r(e,Math.max(0,Math.ceil(t/a)-1))},disabled:n>=Math.ceil(t/a)-1,"aria-label":"last page",children:Object(ye.jsx)(Wn.a,{})})]})}})})})]})})})]})})}))),ta=n(594),na=n(355),aa=function(e){return{root:{},topArrow:{borderTopColor:e.palette.background.default}}},ra=["data","menuItemRef","cardWidth"],ca=Object(xe.a)(aa)(Object(o.b)((function(e){return{selectedCardIds:e.actions.app.collection.selectedCardIds,tiltEnabled:e.actions.app.collection.gridView.tiltEnabled,transform3dEnabled:e.actions.app.collection.gridView.transform3dEnabled}}),(function(e){return{dispatch:{toggleTiltEnabled:function(){return e(be())},toggleTransform3dEnabled:function(){return e(pe())},addSelectedCardId:function(t){return e(ae({id:t}))},removeSelectedCardId:function(t){return e(ne({id:t}))},setViewIndex:function(t){return e(de({index:t}))}}}}))((function(e){var t=e.data,n=e.menuItemRef,r=e.cardWidth,c=void 0===r?209:r,i=Object(we.a)(e,ra),o=i.dispatch,s=i.tiltEnabled,d=i.transform3dEnabled,u=i.selectedCardIds,j=Object(Hn.a)(),b=Object(a.useRef)(),p=Object(a.useState)([]),m=Object(Xe.a)(p,2),f=m[0],O=m[1],h=Object(na.a)(b),g=Object(Xe.a)(h,1)[0],x=Object(a.useState)(),v=Object(Xe.a)(x,2),y=v[0],C=v[1],w=Object(a.useState)({clearSelectedCardsOnExit:!1}),S=Object(Xe.a)(w,2),k=S[0],E=S[1],I=Object(a.useState)({}),_=Object(Xe.a)(I,2),P=_[0],T=_[1],N=Object(a.useState)([]),R=Object(Xe.a)(N,2),D=R[0],M=R[1];Object(a.useEffect)((function(){M(A.a.sortBy(t,(function(e){return e.type_line.replace("Legendary","")}))),T((function(e){var n=t.find((function(t){var n;return t._id===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n._id)}));return n?Object(l.a)(Object(l.a)({},e),{},{data:n}):{data:void 0,targetCollapse:void 0,box:void 0}}))}),[t]),Object(a.useEffect)((function(){var e=Math.floor(g/(c+16));C(e=e>0?e:1),O(A.a.times(Math.floor(t.length/e)+1,(function(){return{collapse:Object(a.createRef)(),cardInfo:Object(a.createRef)()}})))}),[g,c,t]),Object(a.useEffect)((function(){k.mouseY&&k.mouseX?0===u.length&&(o.addSelectedCardId(k.card._id),E((function(e){return Object(l.a)(Object(l.a)({},e),{},{clearSelectedCardsOnExit:!0})}))):k.clearSelectedCardsOnExit&&(o.removeSelectedCardId(k.card._id),E({clearSelectedCardsOnExit:!1}))}),[k.mouseY,k.mouseX]);var L=function(e){var t=e.card,n=e.key;return function(e){var a=P.data,r=P.targetCollapse,c=Math.floor(n/y)||0;void 0!==r&&(null===a||void 0===a?void 0:a._id)===t._id?T(Object(l.a)(Object(l.a)({},P),{},{targetCollapse:void 0,box:e.target.getBoundingClientRect()})):(T({data:t,targetCollapse:c,box:e.target.getBoundingClientRect()}),setTimeout((function(){var e,t,n;o.setViewIndex(0),null===(e=f[c])||void 0===e||null===(t=e.cardInfo)||void 0===t||null===(n=t.current)||void 0===n||n.updateHeight()}),10))}},z=function(e){return function(t){t.preventDefault(),1===t.button&&(u.includes(e._id)?o.removeSelectedCardId(e._id):o.addSelectedCardId(e._id))}},B=function(e){var t=e.card,n=e.key;return function(e){e.preventDefault(),e.persist(),E((function(a){return Object(l.a)(Object(l.a)({},a),{},{mouseX:e.clientX,mouseY:e.clientY,card:t,onEditClick:function(){return L({card:t,key:n})(e)}})}))}};return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(ba,Object(l.a)({setState:E},k)),Object(ye.jsxs)(ta.a,{container:n.current,children:[Object(ye.jsx)(Le.a,{onClick:o.toggleTiltEnabled,children:Object(ye.jsx)(ze.a,{primary:"Card Tilt",secondary:s?"Enabled":"Disabled"})}),Object(ye.jsx)(Le.a,{onClick:o.toggleTransform3dEnabled,children:Object(ye.jsx)(ze.a,{primary:"3D Transform",secondary:d?"Enabled":"Disabled"})})]}),Object(ye.jsx)(fe.a,{item:!0,container:!0,ref:b,xs:12,lg:10,spacing:2,justifyContent:"center",children:D&&D.map((function(e,t){var n,r,i,o,l,u=Math.floor(t/y);return Object(ye.jsxs)(a.Fragment,{children:[e&&Object(ye.jsx)(fe.a,{item:!0,xs:"auto",children:Object(ye.jsx)(vr,{packTransformButton:!0,showCheckbox:!0,transform3dEnabled:d,tiltEnabled:s,card:e,width:c,height:1.4*c,tiltProps:{tiltMaxAngleX:12.5,tiltMaxAngleY:12.5},imageProps:{width:c,height:1.4*c},rootProps:{className:"cursor-pointer",onClick:L({card:e,key:t}),onContextMenu:B({card:e,key:t}),onMouseDown:z(e)}})}),((t+1)%y===0||t===D.length-1)&&Object(ye.jsx)(fe.a,{item:!0,xs:12,children:Object(ye.jsx)(Vn.a,{mountOnEnter:!0,unmountOnExit:!0,ref:null===(n=f[u])||void 0===n?void 0:n.collapse,timeout:"auto",in:u===P.targetCollapse,children:(null===P||void 0===P?void 0:P.data)&&Object(ye.jsx)(Tn,{refs:null===(r=f[u])||void 0===r?void 0:r.cardInfo,card:P.data,rootComponent:Oe.a,rootProps:{elevation:1},topArrowProps:{style:{borderTopColor:j.palette.background.default,left:"calc(".concat((null===P||void 0===P||null===(i=P.box)||void 0===i?void 0:i.left)+.5*(null===P||void 0===P||null===(o=P.box)||void 0===o?void 0:o.width)-(null===b||void 0===b||null===(l=b.current)||void 0===l?void 0:l.offsetLeft),"px - 2.25rem)")}}})})})]},t)}))})]})}))),ia=n(349),oa=n(648),sa=n(649),la=n(650),da=function(e){return{root:{},modal:{maxWidth:"90vw"}}},ua=["mouseY","mouseX","setState","clearSelectedCards","card","onEditClick","clearSelectedCardsOnExit"],ja=["classes","dispatch","selectedCardIds","collection"],ba=Object(xe.a)(da)(Object(o.b)((function(e){return{collection:e.actions.activeUser.collection,selectedCardIds:e.actions.app.collection.selectedCardIds}}),(function(e){return{dispatch:{updateCollection:function(t){return e($({cards:t}))},addSelectedCardId:function(t){return e(ae({id:t}))},setSelectedCardIds:function(t){return e(te({selectedCardIds:t}))},setCurrentOpenCardId:function(t){return e(ee({id:t}))},setViewIndex:function(t){return e(de({index:t}))},setEditEnabled:function(t){return e(ue({enabled:t}))}}}}))((function(e){var t=e.mouseY,n=e.mouseX,r=e.setState,c=(e.clearSelectedCards,e.card,e.onEditClick),i=(e.clearSelectedCardsOnExit,Object(we.a)(e,ua)),o=i.classes,s=i.dispatch,d=i.selectedCardIds,u=i.collection,j=Object(we.a)(i,ja),b=Object(Ne.b)().enqueueSnackbar,p=Object(a.useState)(!1),m=Object(Xe.a)(p,2),f=m[0],O=m[1],h=Object(a.useState)([]),g=Object(Xe.a)(h,2),x=g[0],v=g[1],y=function(){r((function(e){return Object(l.a)(Object(l.a)({},e),{},{mouseY:null,mouseX:null})})),O(!1)},C=function(e){v((function(t){return A.a.chain(e).map((function(e){return e.trim()})).compact().uniqBy((function(e){return e.toLowerCase()})).value()}))},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){switch(e){case"edit":c&&c(),s.setCurrentOpenCardId(d[0]),setTimeout((function(){s.setEditEnabled(!0),s.setViewIndex(1)}),300),y();break;case"delete":if(t){var a=d.length;if(a>0){var r=d.map((function(e){return{_id:e,amount:0}}));S.MODIFY_DB_ALLOWED?Bt.updateCards(r).then((function(e){s.updateCollection(e);var t=A.a.countBy(e,"action");t.DELETED&&b("Deleted ".concat(t.DELETED," card entries"),{variant:"success"})})).catch((function(e){b("Failed to delete ".concat(a," card entries"),{variant:"error"})})):(s.updateCollection(r.map((function(e){return{action:"UPDATED",card:e}}))),b("Deleted ".concat(a," card entries"),{variant:"success"}))}y()}else O("delete");break;case"tag":if(t){var i=d.length;if(i>0){var o=d.map((function(e){return{_id:e,tag:x}}));S.MODIFY_DB_ALLOWED?Bt.updateCards(o).then((function(e){s.updateCollection(e);var t=A.a.countBy(e,"action");t.DELETED&&b("Deleted ".concat(t.DELETED," card entries"),{variant:"success"}),t.UPDATED&&b("Updated ".concat(t.UPDATED," card entries"),{variant:"info"})})).catch((function(e){b("Failed to tag ".concat(i," card entries"),{variant:"error"})})):(s.updateCollection(o.map((function(e){return{action:"UPDATED",card:e}}))),b("Updated ".concat(i," card entries"),{variant:"success"}))}y()}else v(A.a.chain(u).filter((function(e){return d.includes(e._id)})).flatMap((function(e){return e.tag})).uniqBy((function(e){return e.toLowerCase()})).value()),O("tag");break;default:y()}}};return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(ia.a,Object(l.a)(Object(l.a)({keepMounted:!0,disableAutoFocusItem:!0,onContextMenu:function(e){return e.preventDefault()},open:Boolean(t&&n),onClose:y,anchorReference:"anchorPosition",anchorPosition:t&&n?{top:t-4,left:n-2}:void 0,MenuListProps:{dense:!0}},j),{},{className:Object(Jt.a)(o.root,i.className),children:[1===d.length&&Object(ye.jsxs)(Le.a,{onClick:w("edit"),children:[Object(ye.jsx)(oa.a,{style:{minWidth:40},children:Object(ye.jsx)(sa.a,{fontSize:"small"})}),"Edit"]}),Object(ye.jsxs)(Le.a,{onClick:w("tag"),children:[Object(ye.jsx)(oa.a,{style:{minWidth:40},children:Object(ye.jsx)(la.a,{fontSize:"small"})}),"Assign Tags"]}),Object(ye.jsxs)(Le.a,{onClick:w("delete"),children:[Object(ye.jsx)(oa.a,{style:{minWidth:40},children:Object(ye.jsx)(yn.a,{fontSize:"small"})}),"Delete"]})]})),Object(ye.jsx)(fe.a,{container:!0,spacing:5,justifyContent:"center",alignItems:"center",component:gn.a,closeAfterTransition:!0,onClose:y,open:Boolean(f),BackdropProps:{timeout:500},children:Object(ye.jsx)(fe.a,{item:!0,xs:8,sm:6,lg:4,component:xn.a,in:Boolean(f),children:Object(ye.jsx)(Oe.a,{children:Object(ye.jsx)(fe.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:1,className:o.modal,children:function(e){switch(e){case"delete":return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(fe.a,{item:!0,xs:12,align:"center",children:[Object(ye.jsx)(he.a,{noWrap:!0,variant:"h5",align:"left",children:"Confirm Action"}),Object(ye.jsx)(he.a,{noWrap:!0,variant:"body1",align:"left",children:"Are you sure you want to delete the selected ".concat(d.length>1?"cards":"card","?")}),Object(ye.jsx)(he.a,{noWrap:!0,variant:"body2",align:"left",color:"error",children:"This action is irreversible."})]}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"flex-end",xs:12,spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"outlined",onClick:y,children:"Nop"})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"contained",color:"secondary",onClick:w("delete",!0),children:"Yep"})})]})]});case"tag":return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(fe.a,{item:!0,xs:12,align:"left",component:he.a,variant:"h5",children:"Assign Tags"}),Object(ye.jsx)(fe.a,{item:!0,xs:12,align:"left",component:he.a,variant:"body2",children:"The following tags will be assigned to the selected ".concat(d.length>1?"cards":"card",":")}),Object(ye.jsx)(fe.a,{item:!0,xs:12,sm:10,md:9,lg:7,children:Object(ye.jsx)(vn.a,{multiple:!0,freeSolo:!0,label:"Tags",variant:"outlined",margin:"dense",size:"small",color:"secondary",options:[],value:x,onChange:function(e,t){C(t)},onKeyDown:(t="tag",function(e){"tag"===t&&"Enter"===e.key&&""===e.target.value&&w("tag",!0)()}),onInputChange:function(e,t){if(null!==t&&void 0!==t&&t.match(/[;,]/g)){var n=A.a.chain(t).split(/[;,]/).map((function(e){return e.trim()})).compact().uniqBy((function(e){return e.toLowerCase()})).value();n.length>0?C(x.concat(n)):C(x)}},renderInput:function(e){return Object(ye.jsx)(dn.a,Object(l.a)(Object(l.a)({multiline:!0},e),{},{color:"secondary",variant:"outlined",label:"Tags",helperText:["Tags are seperated by ",Object(ye.jsx)("code",{children:"Enter"})," or ",Object(ye.jsx)("code",{children:"[;,]"})].map((function(e,t){return Object(ye.jsx)(a.Fragment,{children:e},t)}))}))}})}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"flex-end",spacing:1,xs:12,children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"outlined",onClick:y,children:"Cancel"})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"contained",color:"secondary",onClick:w("tag",!0),children:"Save"})})]})]});default:return Object(ye.jsx)(ye.Fragment,{})}var t}(f)})})})})]})}))),pa=(n(651),n(677),["label","value","onChange"]),ma=function(e){var t=e.label,n=e.value,a=e.onChange,r=Object(we.a)(e,pa);return Object(ye.jsx)(dn.a,Object(l.a)({margin:"dense",size:"small",variant:"outlined",color:"secondary",label:t,value:n,onChange:a},r))},fa=function(e){var t=Object.assign({},(Object(me.a)(e),e));return Object(ye.jsx)(vn.a,Object(l.a)({multiple:!0,disableCloseOnSelect:!0,filterSelectedOptions:!0,style:Object(l.a)({width:"95%"},null===t||void 0===t?void 0:t.style),color:"secondary",ChipProps:Object(l.a)({variant:"outlined",size:"small"},null===t||void 0===t?void 0:t.ChipProps),renderTags:function(e,n){return e.map((function(e,a){var r;return Object(ye.jsx)($t.a,Object(l.a)(Object(l.a)({},n({index:a})),{},{label:null!==t&&void 0!==t&&null!==(r=t.ChipProps)&&void 0!==r&&r.label?t.ChipProps.label instanceof Function?t.ChipProps.label(e):t.ChipProps.label:e}),a)}))},renderInput:function(e){return Object(ye.jsx)(dn.a,Object(l.a)(Object(l.a)({},e),{},{color:"secondary",size:"small",margin:"dense",variant:"outlined",label:null===t||void 0===t?void 0:t.label},null===t||void 0===t?void 0:t.InputProps))}},t))},Oa=n(593),ha=n(617),ga=n(596),xa=n(351),va=n.n(xa),ya=function(e){return{icon:{},popover:{},paper:{minWidth:e.spacing(20),maxWidth:e.spacing(30)}}},Ca=Object(a.forwardRef)((function(e,t){var n=Object.assign({},(Object(me.a)(e),e)),r=Object(a.useState)(null),c=Object(Xe.a)(r,2),i=c[0],o=c[1],s=Boolean(i),l=Object(a.useRef)(),d=Object(Te.a)(ya(Object(Hn.a)()))();Object(a.useImperativeHandle)(t,(function(){return{openMenu:function(){u(l)},closeMenu:function(){j(null)}}}));var u=function(e){o(e)},j=function(e){o(null)};return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Wt.a,{color:"inherit",className:d.icon,ref:l,onClick:function(e){u(e.currentTarget),e.stopPropagation()},children:Object(ye.jsx)(va.a,{})}),Object(ye.jsx)(Oa.a,{className:d.popover,open:s,anchorEl:i,onClose:j,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:Object(ye.jsx)(Oe.a,{className:d.paper,children:Object(ye.jsx)(ha.a,{onClickAway:j,children:Object(ye.jsx)(ga.a,{dense:!0,disablePadding:!0,children:n.children})})})})]})})),wa=function(e){return{root:{},search:{},minus:{},rangeInput:{},autocompleteInput:{}}},Sa=Object(xe.a)(wa)(Object(o.b)((function(e){return{filters:e.actions.app.collection.filters}}),(function(e){return{dispatch:{setFilters:function(t){return e(re(t))}}}}))((function(e){var t=Object.assign({},(Object(me.a)(e),e)),n=t.dispatch,c=t.classes,i=t.filters,o=Object(a.createRef)(),s=Object(a.useState)([]),d=Object(Xe.a)(s,2),u=d[0],j=d[1],b=Object(a.useState)(""),p=Object(Xe.a)(b,2),m=p[0],f=p[1],O=Object(a.useState)(""),h=Object(Xe.a)(O,2),g=h[0],x=h[1],v=Object(a.useState)(""),y=Object(Xe.a)(v,2),C=y[0],w=y[1],S=Object(a.useState)([]),k=Object(Xe.a)(S,2),E=k[0],I=k[1],_=Object(a.useState)([]),P=Object(Xe.a)(_,2),T=P[0],N=P[1];Object(a.useEffect)((function(){var e=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(){var t;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.a.getSets();case 2:t=e.sent,j(A.a.chain(t).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{set_type:A.a.chain(e.set_type).replace(/[_]+/g," ").upperFirst().value(),released_at:new Date(e.released_at)})})).sortBy(["set_type","released_at"]).value());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(a.useEffect)((function(){n.setFilters({filters:{name:function(e){return e.toLowerCase().includes(m.toLowerCase())},oracle_text:function(e){return!g||(null===e||void 0===e?void 0:e.toLowerCase().includes(g))},type_line:function(e){return e.toLowerCase().includes(C)},tag:!(E.length>0)||E,set:!(T.length>0)||T}})}),[m,g,C,E,T]),Object(a.useEffect)((function(){Array.isArray(i.tag)&&I(i.tag)}),[i]);var R=function(e){I((function(t){return A.a.chain(e).map((function(e){return e.trim()})).compact().uniqBy((function(e){return e.toLowerCase()})).value()}))};return Object(ye.jsx)(fe.a,{item:!0,container:!0,className:c.root,children:Object(ye.jsx)(dn.a,{id:"filled-search",label:"Search Card Name",size:"small",type:"search",color:"secondary",variant:"filled",className:c.search,value:m,onChange:function(e){return f(e.target.value)},InputProps:{endAdornment:Object(ye.jsx)(bn.a,{position:"end",children:Object(ye.jsxs)(Ca,{ref:o,children:[Object(ye.jsx)(Me.a,{children:"Filters"}),Object(ye.jsx)(De.a,{children:Object(ye.jsx)(ma,{label:"Oracle Text",value:g,onChange:function(e){return x(e.target.value)}})}),Object(ye.jsx)(De.a,{children:Object(ye.jsx)(ma,{label:"Type",value:C,onChange:function(e){return w(e.target.value)}})}),Object(ye.jsx)(De.a,{style:{paddingRight:28},children:Object(ye.jsx)(vn.a,{multiple:!0,freeSolo:!0,limitTags:4,label:"Tags",variant:"outlined",margin:"dense",size:"small",color:"secondary",options:[],value:E,onChange:function(e,t){R(t)},onInputChange:function(e,t){if(null!==t&&void 0!==t&&t.match(/[;,]/g)){var n=A.a.chain(t).split(/[;,]/).map((function(e){return e.trim()})).compact().uniqBy((function(e){return e.toLowerCase()})).value();n.length>0?R(E.concat(n)):R(E)}},renderInput:function(e){return Object(ye.jsx)(dn.a,Object(l.a)(Object(l.a)({multiline:!0},e),{},{color:"secondary",variant:"outlined",label:"Tags",helperText:["Tags are seperated by ",Object(ye.jsx)("code",{children:"Enter"})," or ",Object(ye.jsx)("code",{children:"[;,]"})].map((function(e,t){return Object(ye.jsx)(r.a.Fragment,{children:e},t)}))}))}})}),Object(ye.jsx)(ge.a,{}),Object(ye.jsx)(De.a,{children:Object(ye.jsx)(fa,{label:"Sets",options:u,value:T,onChange:function(e,t){return N(t)},className:c.autocompleteInput,groupBy:function(e){return e.set_type},getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.code===t.code},ChipProps:{label:function(e){return e.code}}})})]})})}})})}))),ka=n(652),Ea=n(653),Ia=n(654),_a=function(e){Object.assign({},(Object(me.a)(e),e));var t=Object(_e.g)(),n=function(e){return function(n){switch(e){case"import":t.push("/collection/import");break;case"export":t.push("/collection/export")}}};return Object(ye.jsxs)(fe.a,{container:!0,spacing:1,direction:"column-reverse",children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(mn.a,{arrow:!0,placement:"left",title:"Import Cards",enterDelay:250,children:Object(ye.jsx)(ka.a,{name:"import",size:"small",color:"primary",onClick:n("import"),children:Object(ye.jsx)(Ea.a,{})})})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(mn.a,{arrow:!0,placement:"left",title:"Export Cards",enterDelay:250,children:Object(ye.jsx)(ka.a,{name:"export",size:"small",color:"primary",onClick:n("export"),children:Object(ye.jsx)(Ia.a,{})})})})]})},Pa=n(655),Ta=n(352),Na=n.n(Ta),Ra=function(e){e.spacing(8);return{root:{},modal:{maxWidth:"90vw"}}},Aa=["refs","updateHeight"],Da=Object(xe.a)(Ra)((function(e){var t=e.refs,n=e.updateHeight,r=void 0===n?function(){}:n,c=Object(we.a)(e,Aa).classes,i={cardName:{autocomplete:Object(a.useRef)(),input:Object(a.useRef)(),listbox:Object(a.useRef)()}},o=Object(a.useState)({}),s=Object(Xe.a)(o,2),d=s[0],u=s[1],j=Object(a.useState)([]),b=Object(Xe.a)(j,2),p=b[0],m=b[1],f=Object(a.useState)(null),O=Object(Xe.a)(f,2),h=O[0],g=O[1],x=Object(a.useState)([]),v=Object(Xe.a)(x,2),y=v[0],C=v[1],w=Object(a.useState)([]),S=Object(Xe.a)(w,2),k=S[0],E=S[1],I=Object(a.useState)([]),_=Object(Xe.a)(I,2),P=_[0],T=_[1],N=Object(a.useState)(!1),R=Object(Xe.a)(N,2),A=R[0],D=R[1],M=Object(a.useState)(!1),L=Object(Xe.a)(M,2),z=L[0],B=L[1];Object(a.useImperativeHandle)(t,(function(){return{handleSubmit:U,reset:V,focus:W}}));var F=function(){C([]),E([]),T([]),u({}),Y(null)};Object(a.useEffect)((function(){r()})),Object(a.useEffect)((function(){d.name?st.a.getCardNamed(d.name).then((function(e){G(Object(l.a)(Object(l.a)({},e),{},{amount:d.amount||1,condition:d.condition||"NM",foil:d.foil||!1,signed:d.signed||!1,altered:d.altered||!1,misprint:d.misprint||!1})),C([]),E([]),Promise.all([Ft(e,"set"),Ft(e,"lang")]).then((function(e){var t=Object(Xe.a)(e,2),n=t[0],a=t[1];C(n),E(a)}))})):F()}),[d.name]),Object(a.useEffect)((function(){d.set&&(E([]),Ft(d,"lang").then((function(e){var t=e[0];delete t.foil,G(t),E(e)})))}),[d.set]);var U=function(e){return new Promise((function(e,t){var n,a=(null===(n=i.cardName.input.current)||void 0===n?void 0:n.value.trim())||"";""===a&&p.length>0?B({source:"submit",reject:t,resolve:function(){e(p),q()}}):(a===d.name?H():a&&P.length>0&&P[0].toLowerCase().startsWith(a.toLowerCase())&&(G({name:P[0]}),D(!1)),t())}))},W=function(){var e;null===(e=i.cardName.input.current)||void 0===e||e.focus()},V=function(){m([]),F()},H=function(){var e,t=(null===(e=i.cardName.input.current)||void 0===e?void 0:e.value.trim())||"";t&&t===d.name&&d.set&&d.lang&&(m((function(e){return[].concat(Object(Re.a)(e),[Na()(d)])})),F())},q=function(){z.hasOwnProperty("reject")&&z.reject(),B(!1)},Y=function(e){e?(e=Ke(e),e=rt(e),g(e)):g(null)},G=function(e){var t=Object.assign({},(Object(me.a)(e),e));g(null),u((function(e){return e=Object(l.a)(Object(l.a)({},e),t),e=Ke(e),e=rt(e)}))},X=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=9;break}return e.t0=T,e.next=5,st.a.autocomplete(t);case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=10;break;case 9:throw Error();case 10:e.next=15;break;case 12:e.prev=12,e.t2=e.catch(0),T([]);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"center",alignItems:"flex-start",spacing:2,xs:12,className:c.root,children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"center",alignItems:"flex-start",spacing:5,xs:12,lg:9,children:[Object(ye.jsx)(Ut.a,{smDown:!0,children:Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(vr,{tiltEnabled:!0,transform3dEnabled:!0,showPrice:Boolean(d.prices),card:h||d})})}),Object(ye.jsx)(Ut.a,{mdUp:!0,children:Object(ye.jsx)(fe.a,{item:!0,style:{marginBottom:16},children:Object(ye.jsx)(vr,{showPrice:!0,tiltEnabled:!0,transform3dEnabled:!0,card:h||d})})}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,xs:!0,children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"center",alignItems:"center",xs:12,wrap:"nowrap",children:[Object(ye.jsx)(fe.a,{item:!0,xs:!0,children:Object(ye.jsx)(vn.a,{clearOnEscape:!0,ref:i.cardName.autocomplete,handleHomeEndKeys:!1,open:A,onOpen:function(){return D(!0)},onClose:function(){return D(!1)},label:"Card Name",variant:"outlined",margin:"dense",size:"small",color:"secondary",options:P,value:(null===d||void 0===d?void 0:d.name)||"",onChange:function(e,t){G({name:t})},onInputChange:function(e,t){X(t)},renderInput:function(e){return Object(ye.jsx)(dn.a,Object(l.a)(Object(l.a)({},e),{},{color:"secondary",variant:"outlined",label:"Card Name",style:{marginLeft:0},inputRef:i.cardName.input,InputProps:Object(l.a)(Object(l.a)({},e.InputProps),{},{endAdornment:Object(ye.jsxs)(a.Fragment,{children:[null===P&&Object(ye.jsx)(pn.a,{size:20}),e.InputProps.endAdornment]})})}))}})}),Object(ye.jsx)(fe.a,{item:!0,style:{margin:"0px 8px"},children:Object(ye.jsx)(mn.a,{arrow:!0,disableFocusListener:!(null!==d&&void 0!==d&&d.name),disableHoverListener:!(null!==d&&void 0!==d&&d.name),disableTouchListener:!(null!==d&&void 0!==d&&d.name),placement:"top",title:"Add card to import list",children:Object(ye.jsx)("span",{children:Object(ye.jsx)(Ee.a,{disabled:!(null!==d&&void 0!==d&&d.name),variant:"contained",color:"secondary",onClick:H,style:{minWidth:0,width:"3em"},children:Object(ye.jsx)(Ea.a,{})})})})})]}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,direction:"column",justifyContent:"center",alignItems:"flex-start",style:{maxWidth:"min-content"},children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(dn.a,{disabled:!(null!==d&&void 0!==d&&d.name),size:"small",variant:"outlined",type:"number",label:"Amount",color:"secondary",value:(null===d||void 0===d?void 0:d.amount)||"",inputProps:{inputMode:"numeric",min:1},onChange:function(e){return G({amount:e.target.value})},style:{marginLeft:0}})}),Object(ye.jsx)(fe.a,{item:!0,style:{width:"9em",paddingTop:8},children:Object(ye.jsx)(dn.a,{select:!0,disabled:!(null!==d&&void 0!==d&&d.name),color:"secondary",variant:"outlined",margin:"dense",size:"small",align:"left",label:"Condition",value:(null===d||void 0===d?void 0:d.condition)||"",onChange:function(e){return G({condition:e.target.value})},style:{marginLeft:0},children:[["NM","NM"],["LP","LP"],["MP","MP"],["HP","HP"],["DAMAGED","Damaged"]].map((function(e){return Object(ye.jsx)(Le.a,{value:e[0],children:e[1]},e[0])}))})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(un.a,{disabled:!(null!==d&&void 0!==d&&d.name),label:"Foil",control:Object(ye.jsx)(jn.a,{checked:Boolean(null===d||void 0===d?void 0:d.foil),onChange:function(e){return G({foil:e.target.checked})}})})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(un.a,{disabled:!(null!==d&&void 0!==d&&d.name),label:"Signed",control:Object(ye.jsx)(jn.a,{checked:Boolean(null===d||void 0===d?void 0:d.signed),onChange:function(e){return G({signed:e.target.checked})}})})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(un.a,{disabled:!(null!==d&&void 0!==d&&d.name),label:"Altered",control:Object(ye.jsx)(jn.a,{checked:Boolean(null===d||void 0===d?void 0:d.altered),onChange:function(e){return G({altered:e.target.checked})}})})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(un.a,{disabled:!(null!==d&&void 0!==d&&d.name),label:"Misprint",control:Object(ye.jsx)(jn.a,{checked:Boolean(null===d||void 0===d?void 0:d.misprint),onChange:function(e){return G({misprint:e.target.checked})}})})})]}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,direction:"column",spacing:1,xs:12,sm:10,md:!0,children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,wrap:"nowrap",spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,xs:!0,style:{width:"1px"},children:Object(ye.jsx)(dn.a,{select:!0,color:"secondary",variant:"outlined",margin:"dense",size:"small",align:"left",disabled:!d.name||(null===y||void 0===y?void 0:y.length)<=1,label:"Set",value:0===(!d.name&&[]||y||[]).length?"":d.id,onChange:function(e){var t=y.find((function(t){return t.id===e.target.value}));delete t.foil,G(t)},SelectProps:{onClose:function(e){return Y(d)}},InputProps:null!==d&&void 0!==d&&d.name&&0===(null===y||void 0===y?void 0:y.length)?{startAdornment:Object(ye.jsx)(bn.a,{position:"start",children:Object(ye.jsx)(pn.a,{size:20})})}:{},children:(y||[]).map((function(e){return Object(ye.jsx)(Le.a,{value:e.id,onMouseEnter:function(t){return Y(Object(l.a)(Object(l.a)({},e),{},{foil:null===d||void 0===d?void 0:d.foil}))},onMouseLeave:function(e){return Y(null)},children:"".concat(e.set_name," [#").concat(e.collector_number,"]")},e.id)}))})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(dn.a,{select:!0,color:"secondary",variant:"outlined",margin:"dense",size:"small",align:"left",label:null!==d&&void 0!==d&&d.name?"Language":"Lang",disabled:!d.name||(null===k||void 0===k?void 0:k.length)<=1,value:0===(!d.name&&[]||k||[]).length?"":d.id,style:{width:"6em"},onChange:function(e){var t=k.find((function(t){return t.id===e.target.value}));delete t.foil,G(t)},SelectProps:{onClose:function(e){return Y(d)}},InputProps:null!==d&&void 0!==d&&d.name&&0===(null===k||void 0===k?void 0:k.length)?{startAdornment:Object(ye.jsx)(bn.a,{position:"start",children:Object(ye.jsx)(pn.a,{size:20})})}:{},children:(k||[]).map((function(e){return Object(ye.jsx)(Le.a,{value:e.id,onMouseEnter:function(t){return Y(Object(l.a)(Object(l.a)({},e),{},{foil:null===d||void 0===d?void 0:d.foil}))},onMouseLeave:function(e){return Y(null)},children:e.lang},e.id)}))})})]}),Object(ye.jsx)(fe.a,{item:!0,style:{marginRight:11},children:Object(ye.jsx)(vn.a,{multiple:!0,freeSolo:!0,disableClearable:!0,disabled:!(null!==d&&void 0!==d&&d.name),limitTags:4,label:"Tags",variant:"outlined",margin:"dense",size:"small",color:"secondary",options:[],value:(null===d||void 0===d?void 0:d.tag)||[],onChange:function(e,t){G({tag:t})},onInputChange:function(e,t){if(null!==t&&void 0!==t&&t.match(/[;,]/g)){var n=lodash.chain(t).split(/[;,]/).map((function(e){return e.trim()})).compact().uniqBy((function(e){return e.toLowerCase()})).value();n.length>0?G({tag:null===d||void 0===d?void 0:d.tag.concat(n)}):G({tag:null===d||void 0===d?void 0:d.tag})}},renderInput:function(e){return Object(ye.jsx)(dn.a,Object(l.a)(Object(l.a)({multiline:!0},e),{},{color:"secondary",variant:"outlined",label:"Tags",helperText:["Tags are seperated by ",Object(ye.jsx)("code",{children:"Enter"})," or ",Object(ye.jsx)("code",{children:"[;,]"})].map((function(e,t){return Object(ye.jsx)(a.Fragment,{children:e},t)}))}))}})})]})]})]}),Object(ye.jsx)(fe.a,{item:!0,xs:12,children:Object(ye.jsx)(ge.a,{})}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",xs:12,spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,xs:12,align:"left",component:he.a,children:0===p.length?Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(he.a,{gutterBottom:!0,variant:"h6",children:"No new cards to add."}),Object(ye.jsxs)(he.a,{color:"textSecondary",variant:"body1",children:["Start adding cards by entering a card name above and filling the appropriate fields.",Object(ye.jsx)("br",{}),"You may use the keyboard to navigate the fields and to select options.",Object(ye.jsx)("br",{}),"Press enter while the search bar is focused to add the current card to the list. If no text is present in the search bar, pressing enter will submit the form instead."]})]}):Object(ye.jsx)(he.a,{gutterBottom:!0,variant:"h6",children:1===p.length?"".concat(p.length," card entry:"):"".concat(p.length," card entires:")})}),Object(ye.jsx)(fe.a,{item:!0,component:"ul",style:{textAlign:"left"},children:p.map((function(e,t){return Object(ye.jsx)(he.a,{component:"li",variant:"body1",children:["x".concat(e.amount),e.name,"[".concat(e.set.toUpperCase(),"]"),"[#".concat(e.collector_number,"]"),"[@".concat(e.lang,"]"),e.foil?"[F]":""].join(" ")},t)}))})]})]}),Object(ye.jsx)(fe.a,{container:!0,spacing:5,justifyContent:"center",alignItems:"center",component:gn.a,closeAfterTransition:!0,onClose:q,open:Boolean(z),BackdropProps:{timeout:500},children:Object(ye.jsx)(fe.a,{item:!0,xs:8,sm:6,lg:4,component:xn.a,in:Boolean(z),children:Object(ye.jsx)(Oe.a,{children:Object(ye.jsx)(fe.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:1,className:c.modal,children:function(){switch(z.source){case"delete":return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(fe.a,{item:!0,xs:12,align:"center",children:[Object(ye.jsx)(he.a,{noWrap:!0,variant:"h5",align:"left",children:"Confirm Action"}),Object(ye.jsx)(he.a,{noWrap:!0,variant:"body1",align:"left",children:"Are you sure you want to delete the selected card?"}),Object(ye.jsx)(he.a,{noWrap:!0,variant:"body2",align:"left",color:"error",children:"This action is irreversible."})]}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"flex-end",xs:12,spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsxs)(Ee.a,{variant:"outlined",onClick:q,children:[" ","Nop"]})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"contained",color:"secondary",children:"Yep"})})]})]});case"submit":return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(fe.a,{item:!0,xs:12,align:"center",children:[Object(ye.jsx)(he.a,{noWrap:!0,variant:"h5",align:"left",children:"Confirm Action"}),Object(ye.jsxs)(he.a,{noWrap:!0,variant:"body1",align:"left",children:["Update ",p.length," card ",p.length>1?"entries":"entry","?"]})]}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"flex-end",xs:12,spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsxs)(Ee.a,{variant:"outlined",onClick:q,children:[" ","Nop"]})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"contained",color:"secondary",onClick:z.resolve,children:"Yep"})})]})]});default:return Object(ye.jsx)(ye.Fragment,{})}}()})})})})]})})),Ma=n(353),La=n.n(Ma),za=["refs","updateHeight"],Ba=Object(xe.a)(La.a)((function(e){var t=e.refs,n=e.updateHeight,r=(Object(we.a)(e,za).classes,Object(a.useRef)()),c=Object(a.useState)(""),i=Object(Xe.a)(c,2),o=i[0],s=i[1],d=Object(a.useState)([]),u=Object(Xe.a)(d,2),j=u[0],b=u[1];Object(a.useImperativeHandle)(t,(function(){return{handleSubmit:m,reset:O,focus:f}}));var p=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){var n,a,r,c,i,o;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=[],r=t.trim().split("\n").map((function(e){return e.trim()})),c=0;case 4:if(!(c<r.length)){e.next=18;break}if(i=Zt()(r[c].split(/[\s]+/g)),o={line:c},0!==i.length){e.next=9;break}return e.abrupt("continue",15);case 9:for(i[0].match(/(^x[1-9][0-9]*$)|(^[1-9][0-9]*x$)/gi)?(o.amount=parseInt(i[0].replace(/x/gi,"")),i.splice(0,1)):i[0].match(/^[1-9][0-9]*$/g)?(o.amount=parseInt(i[0]),i.splice(0,1)):i[0].match(/(^x{2,}[0-9]+$)|(^[0-9]+x{2,}$)|(^[^x][0-9]+$)|((^[0-9]+[^x]$))/gi)?a.push({line:c,message:"Invalid amount format."}):o.amount=1,i[0].match(/^\[/g)&&a.push({line:c,message:"Card name cannot start with '['."});i.length>1&&i[1].match(/^[^[]/g);)i.splice(0,2,i.slice(0,2).join(" "));for(o.name=i.splice(0,1)[0];i.length>0;)i[0].match(/^\[f\]$/gi)?o.foil=!0:i[0].match(/^\[\w+]$/g)?o.set=i[0].replace(/[\]\[]/g,""):i[0].match(/^\[#.+]$/g)?o.collector_number=i[0].replace(/[#\]\[]/g,""):i[0].match(/^\[@[a-z]+]$/gi)&&(o.lang=i[0].replace(/[\]\[]/g,"")),i.splice(0,1);n.push(o);case 15:c++,e.next=4;break;case 18:return e.next=20,Promise.all(n.map(function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){var n,a,r,c,i,o,s,d,u,j,b,p,m,f;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.prev=2,e.next=5,st.a.getCard(t.name,"fuzzyName");case 5:n=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new Error('Card name not found: "'.concat(t.name,'".'));case 11:return e.next=13,Ft(n,"set");case 13:if(a=e.sent,!t.set){e.next=38;break}r=!0,c=Object(L.a)(a),e.prev=17,c.s();case 19:if((i=c.n()).done){e.next=28;break}if((o=i.value).set.toLowerCase()!==t.set.toLowerCase()){e.next=26;break}return delete o.foil,n=Object(l.a)(Object(l.a)({},n),o),r=!1,e.abrupt("break",28);case 26:e.next=19;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(17),c.e(e.t1);case 33:return e.prev=33,c.f(),e.finish(33);case 36:if(!r){e.next=38;break}throw new Error('Set not found: "'.concat(t.set,'".'));case 38:if(!t.collector_number){e.next=62;break}s=!0,d=Object(L.a)(a),e.prev=41,d.s();case 43:if((u=d.n()).done){e.next=52;break}if((j=u.value).collector_number!==t.collector_number){e.next=50;break}return delete j.foil,n=Object(l.a)(Object(l.a)({},n),j),s=!1,e.abrupt("break",52);case 50:e.next=43;break;case 52:e.next=57;break;case 54:e.prev=54,e.t2=e.catch(41),d.e(e.t2);case 57:return e.prev=57,d.f(),e.finish(57);case 60:if(!s){e.next=62;break}throw new Error('Collector number not found: "'.concat(t.collector_number,'".'));case 62:if(!t.lang){e.next=85;break}return e.next=65,Ft(n,"lang");case 65:b=e.sent,p=Object(L.a)(b),e.prev=67,p.s();case 69:if((m=p.n()).done){e.next=77;break}if((f=m.value).lang.toLowerCase()!==t.lang.toLowerCase()){e.next=75;break}return delete f.foil,n=Object(l.a)(Object(l.a)({},n),f),e.abrupt("break",77);case 75:e.next=69;break;case 77:e.next=82;break;case 79:e.prev=79,e.t3=e.catch(67),p.e(e.t3);case 82:return e.prev=82,p.f(),e.finish(82);case 85:return e.abrupt("return",Object(l.a)(Object(l.a)(Object(l.a)({},n),t),{},{foil:Boolean(t.foil)}));case 88:return e.prev=88,e.t4=e.catch(1),console.error(e.t4),e.abrupt("return",{card:t,error:{line:t.line,message:e.t4.message}});case 92:case"end":return e.stop()}}),e,null,[[1,88],[2,8],[17,30,33,36],[41,54,57,60],[67,79,82,85]])})));return function(t){return e.apply(this,arguments)}}()));case 20:return n=(n=e.sent).filter((function(e){return!e.hasOwnProperty("error")||(a.push(e.error),!1)})),a.sort((function(e,t){return e.line-t.line})),e.abrupt("return",{cards:n,errors:a});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){n()}));var m=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){var n,a,r;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==o.trim()){e.next=2;break}throw new Error("No cards to import");case 2:return e.next=4,p(o);case 4:if(n=e.sent,a=n.cards,!((r=n.errors).length>0)){e.next=10;break}throw b(r),new Error(r);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e;null===(e=r.current)||void 0===e||e.focus()},O=function(){b([]),s("")};return Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:1,children:[j.length>0&&Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(fe.a,{item:!0,xs:12,component:he.a,color:"error",variant:"h6",align:"left",style:{marginLeft:8},children:"We found errors in your card list"}),Object(ye.jsx)(fe.a,{item:!0,container:!0,xs:12,direction:"column",style:{marginLeft:8,marginBottom:12},children:Object.values(j).map((function(e,t){var n=e.line,a=e.message;return Object(ye.jsx)(fe.a,{item:!0,component:"li",align:"left",style:{whiteSpace:"break-spaces",marginLeft:12},children:Object(ye.jsx)(he.a,{color:"error",align:"left",children:"Line ".concat(n+1,", \t").concat(Ge()(a))})},t)}))})]}),Object(ye.jsx)(fe.a,{item:!0,xs:12,children:Object(ye.jsx)(dn.a,{multiline:!0,fullWidth:!0,inputRef:r,color:"secondary",rows:20,variant:"filled",label:"Card List",value:o,onChange:function(e){return s(e.target.value)},placeholder:["Paste your collection here, the supported format is:","\tx2 cardname [setid] [#collectorNumber] [@lang] [isFoil]","","Fuzzy named search is supported.","","------------------------","","2 fireball [m12] [f]","atraxa [@fr]","3x Garruk's Gorehorn [#306]","1x Garruk's Gorehorn [#108]","..."].join("\n"),InputLabelProps:{shrink:!0}})})]})})),Fa=function(e){var t=e.spacing(8);return{root:{minHeight:"calc(100vh - 2*".concat(t,"px)"),marginBottom:e.spacing(2),justifyContent:"center",alignItems:"center",display:"flex",flexGrow:1},hoverHighlight:{cursor:"pointer","&:hover":{backgroundColor:e.palette.action.hover}},view1Container:{height:"350px"},view2Container:{padding:[2,2,0,2].map((function(t){return"".concat(e.spacing(t),"px")})).join(" ")}}},Ua=Object(xe.a)(Fa)(Object(o.b)((function(e){return{username:e.actions.activeUser.username}}),(function(e){return{dispatch:{setCurrentTab:function(t){return e(Z({tab:t}))},setCurrentCollection:function(t){return e(X({collection:t}))},updateCollection:function(t){return e($({cards:t}))}}}}))((function(e){var t=Object.assign({},(Object(me.a)(e),e)),n=t.classes,r=t.dispatch,c=t.username,i=Object(Ne.b)().enqueueSnackbar,o=Object(_e.g)(),s={viewRef:Object(a.useRef)(),wizardRef:Object(a.useRef)(),bulkRef:Object(a.useRef)()},d=Object(a.useState)(1),u=Object(Xe.a)(d,2),j=u[0],b=u[1],p=Object(a.useState)(!1),m=Object(Xe.a)(p,2),f=m[0],O=m[1],h=function(){var e;return setTimeout(null===(e=s.viewRef.current)||void 0===e?void 0:e.updateHeight,10)},g=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){var n,a;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.MODIFY_DB_ALLOWED){e.next=17;break}return e.prev=1,e.next=4,Bt.updateCards(t);case 4:n=e.sent,a=_.countBy(n,"action"),r.updateCollection(n.map((function(e){return e.card}))),a.CREATED&&i("Created ".concat(a.CREATED," card entries"),{variant:"success"}),a.UPDATED&&i("Updated ".concat(a.UPDATED," card entries"),{variant:"info"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),i("Error updating cards",{variant:"error"}),console.error({error:e.t0});case 15:e.next=19;break;case 17:r.updateCollection([{action:"UPDATED",cards:t}]),i("Updated ".concat(t.length," card entries"),{variant:"info"});case 19:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){r.setCurrentTab("collection")}),[]),Object(a.useEffect)((function(){if(!c)return o.push("/login")}),[c]);var x=function(e){var t,n;switch(b(e),h(),e){case 0:setTimeout(null===(t=s.bulkRef.current)||void 0===t?void 0:t.focus,350);break;default:case 1:break;case 2:setTimeout(null===(n=s.wizardRef.current)||void 0===n?void 0:n.focus,350)}},v=function(e){return function(t){switch(e){case"bulk":x(0);break;case"wizard":x(2);break;default:x(1)}}},y=function(e){return function(){var t=Object(it.a)(Object(ct.a)().mark((function t(n){var a,r,c;return Object(ct.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=null,r=[],t.t0=e,t.next="bulk"===t.t0?5:"wizard"===t.t0?7:9;break;case 5:return a=s.bulkRef.current,t.abrupt("break",10);case 7:return a=s.wizardRef.current,t.abrupt("break",10);case 9:return t.abrupt("break",10);case 10:return t.prev=10,t.next=13,a.handleSubmit(n);case 13:return c=t.sent.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{amount:"+".concat(e.amount)})})),O(!0),t.next=17,g(c);case 17:x(1),a.reset(),r=Promise.resolve(c),t.next=25;break;case 22:t.prev=22,t.t1=t.catch(10),r=Promise.reject(t.t1);case 25:return t.prev=25,O(!1),t.abrupt("return",r);case 29:case"end":return t.stop()}}),t,null,[[10,22,25,29]])})));return function(e){return t.apply(this,arguments)}}()};return Object(ye.jsx)(fe.a,{container:!0,className:n.root,children:Object(ye.jsx)(fe.a,{item:!0,xs:12,component:Oe.a,children:Object(ye.jsxs)(Yt.a,{animateHeight:!0,ignoreNativeScroll:!0,ref:s.viewRef,index:j,slideStyle:{overflow:"hidden"},style:{overflow:"hidden"},children:[Object(ye.jsx)(fe.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:2,className:n.view2Container,children:Object(ye.jsx)(Ar,{onSubmit:y("bulk"),instantValidate:!1,elevation:0,style:{width:"100%"},header:"Bulk Import",headerProps:{align:"left"},icon:function(){return Object(ye.jsx)(Gt.a,{marginBottom:-2,children:Object(ye.jsx)(Pa.a,{style:{fontSize:"1.5em"}})})},content:function(){return Object(ye.jsx)(Ba,{refs:s.bulkRef,updateHeight:h})},contentProps:{style:{paddingRight:"8px"}},actions:function(){var e;return Object(ye.jsx)(Gt.a,{paddingTop:2,marginLeft:1.5,marginRight:1.5,children:Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"flex-end",alignItems:"center",spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,xs:!0,align:"left",children:Object(ye.jsx)(Ee.a,{variant:"contained",color:"secondary",onClick:null===(e=s.bulkRef.current)||void 0===e?void 0:e.reset,children:"Reset"})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"outlined",onClick:function(){return x(1)},children:"Back"})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"contained",type:"submit",color:"primary",children:"Submit"})})]})})}})}),Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"center",alignItems:"center",className:"MuiPaper-rounded ".concat(n.view1Container),children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,xs:!0,component:Ee.a,style:{height:"100%",borderRadius:0},onClick:v("bulk"),children:[Object(ye.jsx)(fe.a,{item:!0,style:{marginTop:6,marginRight:12},children:Object(ye.jsx)(Ht.a,{fontSize:"large"})}),Object(ye.jsx)(fe.a,{item:!0,component:he.a,variant:"h5",children:"Bulk Import"})]}),Object(ye.jsx)(ge.a,{flexItem:!0,orientation:"vertical"}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,xs:!0,component:Ee.a,style:{height:"100%",borderRadius:0},onClick:v("wizard"),children:[Object(ye.jsx)(fe.a,{item:!0,component:he.a,variant:"h5",children:"Import Wizard"}),Object(ye.jsx)(fe.a,{item:!0,style:{marginTop:6,marginLeft:12},children:Object(ye.jsx)(Vt.a,{fontSize:"large"})})]})]}),Object(ye.jsx)(fe.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:2,className:n.view2Container,children:Object(ye.jsx)(Ar,{onSubmit:y("wizard"),disableBackdrop:!f,instantValidate:!1,elevation:0,style:{width:"100%"},header:function(){return Object(ye.jsxs)(ye.Fragment,{children:["Import Wizard ",Object(ye.jsx)("span",{style:{fontSize:"0.5em"},children:"(of the coast\u2122)"})]})},headerProps:{align:"left"},icon:function(){return Object(ye.jsx)(Gt.a,{marginBottom:2,children:"\ud83e\uddd9\u200d\u2642\ufe0f"})},content:function(){return Object(ye.jsx)(Da,{refs:s.wizardRef,updateHeight:h})},contentProps:{style:{paddingRight:"8px"}},actions:function(){var e;return Object(ye.jsx)(Gt.a,{paddingTop:2,marginLeft:1.5,marginRight:1.5,children:Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"flex-end",alignItems:"center",spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,xs:!0,align:"left",children:Object(ye.jsx)(Ee.a,{variant:"contained",color:"secondary",onClick:null===(e=s.wizardRef.current)||void 0===e?void 0:e.reset,children:"Reset"})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"outlined",onClick:function(){return x(1)},children:"Back"})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"contained",color:"primary",type:"submit",children:"Submit"})})]})})}})})]})})})}))),Wa=n(656),Va=function(e){var t=e.spacing(8);return{root:{minHeight:"calc(100vh - 2*".concat(t,"px)"),justifyContent:"center",alignItems:"center",display:"flex",flexGrow:1},paper:{height:"350px"}}},Ha=Object(xe.a)(Va)(Object(o.b)((function(e){return{username:e.actions.activeUser.username,collection:e.actions.activeUser.collection}}),(function(e){return{dispatch:{setCurrentTab:function(t){return e(Z({tab:t}))},setCurrentCollection:function(t){return e(X({collection:t}))}}}}))((function(e){var t=Object.assign({},(Object(me.a)(e),e)),n=t.classes,r=t.dispatch,c=t.username,i=(t.collection,Object(_e.g)());Object(a.useEffect)((function(){r.setCurrentTab("collection")}),[]),Object(a.useEffect)((function(){if(!c)return i.push("/login")}),[c]);return Object(ye.jsx)("div",{className:n.root,children:Object(ye.jsx)(Ar,{onSubmit:function(){},instantValidate:!1,style:{width:"100%"},header:"Export Data",headerProps:{align:"left"},icon:Object(ye.jsx)(Wa.a,{style:{fontSize:"1em"}}),content:function(){return Object(ye.jsx)(ye.Fragment,{children:"todo"})},actions:function(){return Object(ye.jsx)(Gt.a,{paddingTop:2,marginLeft:1.5,marginRight:1.5,children:Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"flex-end",alignItems:"center",spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,xs:!0,align:"left",children:Object(ye.jsx)(Ee.a,{variant:"contained",color:"secondary",children:"Reset"})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"outlined",children:"Back"})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{variant:"contained",type:"submit",color:"primary",children:"Submit"})})]})})}})})}))),qa=function(e){return{"@global":{".MuiTableCell-head":{fontWeight:"bold",textTransform:"uppercase"},".MuiTableCell-sizeSmall":{padding:"0.3em"}},root:{marginBottom:e.spacing(3)},fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(3)},filtersContainer:{marginBottom:e.spacing(4.5)},subheader:{justifyContent:"center",fontWeight:600,height:"2.5rem",alignItems:"baseline"}}},Ya=Object(xe.a)(qa)(Object(o.b)((function(e){return{username:e.actions.activeUser.username,collection:e.actions.activeUser.collection,view:e.actions.app.collection.view,currency:e.actions.app.currency,cardsSelectableEnabled:e.actions.app.collection.cardsSelectableEnabled}}),(function(e){return{dispatch:{setCurrentTab:function(t){return e(Z({tab:t}))},setCurrentCollection:function(t){return e(X({collection:t}))},setCurrentOpenCardId:function(t){return e(ee({id:t}))},setView:function(t){return e(Q({view:t}))},setColumns:function(t){return e(je({columns:t}))},toggleCurrency:function(){return e(K())},setCardsSelectableEnabled:function(t){return e(ie({enabled:t}))},toggleCardsSelectableEnabled:function(){return e(oe())},setPageNumber:function(t){return e(se({pageNumber:t}))},setPerPage:function(t){return e(le({perPage:t}))}}}}))((function(e){var t=Object.assign({},(Object(me.a)(e),e)),n=t.classes,r=t.dispatch,c=t.username,i=t.collection,o=t.view,s=t.currency,d=t.cardsSelectableEnabled,u=Object(_e.g)(),j=Object(_e.h)(),b=Object(a.useRef)(),p=Object(a.useRef)(),m=Object(Ae.a)((function(e){return e.breakpoints.down("md")}));Object(a.useEffect)((function(){return r.setCurrentTab("collection"),r.setCurrentOpenCardId(null),function(){r.setCurrentOpenCardId(null),r.setCardsSelectableEnabled(!1),r.setPageNumber(0)}}),[]),Object(a.useEffect)((function(){var e=new URLSearchParams(j.search).get("view");e&&e!==o&&f(e)}),[j]),Object(a.useEffect)((function(){m?r.setColumns({amount:"amount",name:"name",set:"set",mana_cost:"cost",type_line:"type",foil:"foil",total_price:"price"}):r.setColumns({amount:"amount",name:"name",set:"set",mana_cost:"mana cost",type_line:"type",foil:"foil",total_price:"price (".concat(s,")"),date_created:"date added"})}),[m,s]),Object(a.useEffect)((function(){if(!c)return u.push("/login");r.setCurrentCollection(JSON.parse(localStorage.getItem("collection"))),Bt.getAllCards().then((function(e){return r.setCurrentCollection(e)}))}),[c]);var f=function(e){if(e&&e!==o){var t=new URLSearchParams(j.search);t.set("view",e),u.push({search:t.toString()}),r.setView(e),r.setCurrentOpenCardId(null),r.setCardsSelectableEnabled(!1),r.setPageNumber(0)}};return Object(ye.jsx)(ye.Fragment,{children:Object(ye.jsx)("div",{className:n.root,children:i?Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"center",children:[Object(ye.jsxs)(fe.a,{item:!0,container:!0,xs:12,lg:10,wrap:"nowrap",justifyContent:"center",alignItems:"center",className:n.filtersContainer,children:[Object(ye.jsx)(fe.a,{item:!0,container:!0,xs:11,children:Object(ye.jsx)(Sa,{})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsxs)(Za,{refs:b,icon:Object(ye.jsx)(We.a,{}),listProps:{dense:!0},children:[Object(ye.jsx)(De.a,{style:{justifyContent:"center"},children:Object(ye.jsxs)(Fe.a,{exclusive:!0,style:{height:"2.4em"},size:"small",value:o,onChange:function(e,t){return f(t)},children:[Object(ye.jsx)(Ue.a,{value:"table",children:Object(ye.jsx)(Ve.a,{})}),Object(ye.jsx)(Ue.a,{value:"grid",children:Object(ye.jsx)(He.a,{})}),Object(ye.jsx)(Ue.a,{value:"compact",children:Object(ye.jsx)(qe.a,{})})]})}),Object(ye.jsx)(ge.a,{style:{marginTop:8}}),Object(ye.jsx)(Me.a,{className:n.subheader,children:"".concat(Ge()(o)," View")}),Object(ye.jsx)(Le.a,{onClick:r.toggleCardsSelectableEnabled,children:Object(ye.jsx)(ze.a,{primary:"Selection Mode",secondary:d?"On":"Off"})}),Object(ye.jsx)(Le.a,{onClick:r.toggleCurrency,children:Object(ye.jsx)(ze.a,{primary:"Change Currency",secondary:"Viewing ".concat(s.toUpperCase())})}),Object(ye.jsx)("span",{ref:p}),"  "]})})]}),Object(ye.jsx)(fe.a,{item:!0,container:!0,wrap:"nowrap",justifyContent:"center",xs:12,children:Object(ye.jsx)(Ze,{data:i,children:Object(ye.jsx)(tt,{children:function(){var e={menuItemRef:p};switch(o){default:case"table":return Object(ye.jsx)(ea,Object(l.a)({},e));case"grid":return Object(ye.jsx)(ca,Object(l.a)({},e));case"compact":return Object(ye.jsx)("div",{children:"TBD"})}}()})})})]}),Object(ye.jsx)("div",{className:n.fab,children:Object(ye.jsx)(_a,{})})]}):Object(ye.jsx)(fe.a,{container:!0,justifyContent:"center",children:Object(ye.jsxs)(fe.a,{item:!0,container:!0,xs:12,sm:11,md:10,spacing:2,children:[Object(ye.jsx)(fe.a,{item:!0,xs:2,children:Object(ye.jsx)(Be.a,{variant:"rect",height:"100%"})}),Object(ye.jsxs)(fe.a,{item:!0,container:!0,xs:10,children:[Object(ye.jsx)(fe.a,{item:!0,xs:2,children:Object(ye.jsx)(Be.a,{variant:"circle",width:75,height:75})}),Object(ye.jsxs)(fe.a,{item:!0,xs:10,children:[Object(ye.jsx)(Be.a,{variant:"rect",height:32}),Object(ye.jsx)(Be.a,{variant:"text"})]}),Object(ye.jsx)(fe.a,{item:!0,xs:12,children:Object(Re.a)(Array(10).keys()).map((function(e){return Object(ye.jsx)(Be.a,{variant:"text"},e)}))})]})]})})})})}))),Ga=function(e){var t=e.spacing(10),n=e.spacing(8);return{"@global":{"#root":{maxWidth:"100wh",width:"100wh"}},root:{display:"flex",justifyContent:"center"},content:{overflow:"visible",paddingTop:n,paddingLeft:t,paddingRight:t,minHeight:"100vh"},bottomBar:{minHeight:n,backgroundColor:e.palette.primary.dark,color:e.palette.getContrastText(e.palette.primary.dark)}}},Xa=["theme"],$a=Object(o.b)((function(e){return{theme:e.actions.theme.currentTheme}}),(function(e){return{dispatch:{setActiveUser:function(t){return e(G(t))}}}}))((function(e){var t=e.theme,n=Object(we.a)(e,Xa).dispatch,r=Object(a.createRef)(),c=Object.assign({},t),i=Object(Te.a)(Ga(c))(),o=[{component:_e.b,props:{path:"/",component:Ce,exact:!0}},{component:_e.b,props:{path:"/collection",component:Ya,exact:!0}},{component:_e.b,props:{path:"/collection/import",component:Ua,exact:!0}},{component:_e.b,props:{path:"/collection/export",component:Ha,exact:!0}},{component:_e.b,props:{path:"/decks",component:Sr,exact:!0}},{component:_e.b,props:{path:"/login",component:Mr,exact:!0}},{component:_e.b,props:{path:"/register",component:zr,exact:!0}},{component:_e.b,props:{path:"/profile",component:Er,exact:!0}},{component:_e.a,props:{to:"/",exact:!1}}];return Object(a.useEffect)((function(){Bt.login().then((function(e){n.setActiveUser(e),r.current.enqueueSnackbar("Welcome back ".concat(e.username),{variant:"info"})})).catch((function(e){return n.setActiveUser({username:null})}))}),[]),Object(ye.jsxs)(Se.a,{theme:c,children:[Object(ye.jsx)(ke.a,{}),Object(ye.jsx)(Ne.a,{ref:r,autoHideDuration:3250,maxSnack:3,action:function(e){return Object(ye.jsx)(Ee.a,{endIcon:Object(ye.jsx)(Ie.a,{}),onClick:function(t){return r.current.closeSnackbar(e)},color:"inherit",children:"Dismiss"})},children:Object(ye.jsxs)(fe.a,{container:!0,component:Pe.a,justifyContent:"center",alignItems:"flex-start",children:[Object(ye.jsx)(fe.a,{item:!0,xs:12,component:sr}),Object(ye.jsx)(fe.a,{item:!0,xs:12,align:"center",className:i.content,children:Object(ye.jsx)(_e.d,{children:o.map((function(e,t){return Object(ye.jsx)(e.component,Object(l.a)({},e.props),t)}))})}),Object(ye.jsx)(fe.a,{item:!0,container:!0,justifyContent:"center",alignItems:"center",xs:12,className:"".concat(i.bottomBar," MuiPaper-elevation8"),children:Object(ye.jsx)(Cr,{})})]})})]})})),Ja=function(e){return{icon:{},popover:{},paper:{minWidth:e.spacing(20)}}},Ka=["refs","icon","iconButtonProps","popoverProps","listProps"],Za=Object(xe.a)(Ja)((function(e){var t=e.refs,n=e.icon,r=e.iconButtonProps,c=e.popoverProps,i=e.listProps,o=Object(we.a)(e,Ka),s=o.classes,d=o.children,u=Object(a.useRef)(),j=Object(a.useState)(n),b=Object(Xe.a)(j,2),p=b[0],m=b[1],f=Object(a.useState)(null),O=Object(Xe.a)(f,2),h=O[0],g=O[1],x=Boolean(h);Object(a.useImperativeHandle)(t,(function(){return{openMenu:function(){v(u)},closeMenu:function(){y(null)}}})),Object(a.useEffect)((function(){m(n)}),[n]);var v=function(e){g(e)},y=function(e){g(null)};return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Wt.a,Object(l.a)(Object(l.a)({color:"inherit",className:s.icon,ref:u,onClick:function(e){v(e.currentTarget),e.stopPropagation()}},r),{},{children:p})),Object(ye.jsx)(Oa.a,Object(l.a)(Object(l.a)({keepMounted:!0,ref:t,className:s.popover,open:x,anchorEl:h,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"}},c),{},{children:Object(ye.jsx)(Oe.a,{className:s.paper,children:Object(ye.jsx)(ha.a,{onClickAway:y,children:Object(ye.jsx)(ga.a,Object(l.a)(Object(l.a)({},i),{},{children:d}))})})}))]})})),Qa=n(666),er=n(678),tr=n(668),nr=n(672),ar=n(673),rr=n(669),cr=n(670),ir=n(671),or=function(e){var t=e.spacing(10);return{root:{position:"absolute"},appBar:{paddingLeft:t,paddingRight:t},iconButton:{color:e.palette.text.secondary},dropdown_tab:{display:"flex",whiteSpace:"nowrap",flexDirection:"row",alignItems:"center",justifyContent:"center"}}},sr=Object(o.b)((function(e){return{themeType:e.actions.theme.themeType,username:e.actions.activeUser.username,currentTab:e.actions.app.topMenu.currentTab}}),(function(e){return{dispatch:{toggleThemeType:function(t){return e(J(t))},setActiveUser:function(t){return e(G(t))}}}}))(Object(xe.a)(or)((function(e){var t=Object.assign({},(Object(me.a)(e),e)),n=t.classes,r=t.dispatch,c=t.currentTab,i=t.themeType,o=t.username,s=Object(_e.g)(),l=Object(Ne.b)().enqueueSnackbar,d=Object(a.useRef)(),u=function(e){var t,n,a,c,i=null===(t=e.currentTarget.attributes.goto)||void 0===t?void 0:t.value;switch(null===(n=e.currentTarget.attributes.id)||void 0===n?void 0:n.value){default:null===(a=d.current)||void 0===a||a.closeMenu();break;case"profile":case"login":case"register":null===(c=d.current)||void 0===c||c.closeMenu(),s.push(i);break;case"logout":r.setActiveUser({username:null}),l("Logged out",{variant:"info"});break;case"mode":r.toggleThemeType()}};return Object(ye.jsx)("div",{className:n.root,children:Object(ye.jsx)(Qa.a,{className:n.appBar,children:Object(ye.jsxs)(fe.a,{container:!0,wrap:"nowrap",justifyContent:"space-between",children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsxs)(er.a,{variant:"scrollable",value:c,onChange:function(e,t){s.push("/"+t)},children:[Object(ye.jsx)(tr.a,{value:"home",label:"Home"}),Object(ye.jsx)(tr.a,{value:"collection",label:"Collection"}),Object(ye.jsx)(tr.a,{value:"decks",label:"Decks"}),Object(ye.jsx)(tr.a,{value:"profile",style:{display:"none"}}),Object(ye.jsx)(tr.a,{value:"login",style:{display:"none"}}),Object(ye.jsx)(tr.a,{value:"register",style:{display:"none"}})]})}),Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsxs)(Za,{refs:d,icon:function(){return Object(ye.jsx)(rr.a,{})},children:[Object(ye.jsxs)(Me.a,{children:[Object(ye.jsx)(cr.a,{}),null!==o&&void 0!==o?o:"Account"]}),o?Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Le.a,{onClick:u,id:"profile",goto:"/profile",children:"Personal Info"}),Object(ye.jsx)(Le.a,{onClick:u,id:"logout",children:"Logout"})]}):Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Le.a,{onClick:u,id:"login",goto:"/login",children:"Login"}),Object(ye.jsx)(Le.a,{onClick:u,id:"register",goto:"/register",children:"Register"})]}),Object(ye.jsx)(ge.a,{}),Object(ye.jsxs)(Me.a,{children:[Object(ye.jsx)(ir.a,{}),"Settings"]}),Object(ye.jsxs)(De.a,{style:{paddingTop:0,paddingBottom:0},children:[Object(ye.jsx)(ze.a,{primary:"Toggle Theme",secondary:i}),Object(ye.jsx)(nr.a,{children:Object(ye.jsx)(ar.a,{edge:"end",checked:"dark"===i,onChange:u,id:"mode"})})]})]})})]})})})}))),lr=n(357),dr=function(e){return{root:{position:"relative",borderRadius:"4.75% / 3.5%"},loading:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:0,left:0,color:"white",background:"url(cardback.png) 0 0 / cover",opacity:.65,backgroundSize:"cover",borderRadius:"4.75% / 3.5%"},base:{borderRadius:"4.75% / 3.5%",position:"absolute",top:0,left:0},overlay:{borderRadius:"4.75% / 3.5%",position:"absolute",top:0,left:0}}},ur=["name","rootProps","baseSrc","baseProps","overlaySrc","overlayEnabled","overlayProps","width","height"],jr=["classes"],br=Object(xe.a)(dr)((function(e){var t=e.name,n=void 0===t?"Loading..":t,r=e.rootProps,c=e.baseSrc,i=e.baseProps,o=e.overlaySrc,s=e.overlayEnabled,d=e.overlayProps,u=e.width,j=e.height,b=Object(we.a)(e,ur),p=b.classes,m=Object(we.a)(b,jr),f=Object(a.useState)(!1),O=Object(Xe.a)(f,2),h=O[0],g=O[1];return Object(a.useEffect)((function(){g(!1)}),[c]),Object(ye.jsxs)("div",Object(l.a)(Object(l.a)(Object(l.a)({className:p.root,style:{width:u,height:j}},r),m),{},{children:[!h&&Object(ye.jsx)("div",{className:p.loading,style:{width:u,height:j},children:Object(ye.jsx)(un.a,{control:Object(ye.jsx)(pn.a,{}),labelPlacement:"bottom",label:Object(ye.jsx)("span",{style:{fontSize:"0.9rem"},children:n})})}),Object(ye.jsx)("img",Object(l.a)(Object(l.a)({width:u,height:j,src:c,alt:"base"},i),{},{className:Object(Jt.a)(p.base,null===i||void 0===i?void 0:i.className),onLoad:function(e){return g(!0)},style:{display:h?"":"none"}})),s&&Object(ye.jsx)("img",Object(l.a)(Object(l.a)({width:u,height:j,src:o,alt:"overlay"},d),{},{className:Object(Jt.a)(p.overlay,null===d||void 0===d?void 0:d.className)}))]}))})),pr=function(e){return{root:{position:"relative",overflow:"visible",transition:"all 0.33s cubic-bezier(0.75, 0, 0.25, 1)"},face:{position:"absolute",top:0,left:0},front:{},back:{transform:"scaleX(-1)"}}},mr=["card","flipped","width","height","imageProps"],fr=Object(xe.a)(pr)((function(e){var t,n,r,c,i=e.card,o=e.flipped,s=e.width,d=e.height,u=e.imageProps,j=Object(we.a)(e,mr).classes,b=Object(a.useState)(o),p=Object(Xe.a)(b,2),m=p[0],f=p[1],O=Object(a.useState)("1"),h=Object(Xe.a)(O,2),g=h[0],x=h[1];return Object(a.useEffect)((function(){x(o?"-1":"1"),setTimeout((function(){f(o)}),150)}),[o]),Object(ye.jsxs)("div",{className:j.root,style:{width:s||"250px",height:d||"350px",transform:"scaleX(".concat(g,")")},children:[Object(ye.jsx)("div",{className:Object(Jt.a)(j.face,j.front),style:{display:m?"none":"unset"},children:Object(ye.jsx)(br,Object(l.a)({overlayEnabled:i.foil,baseProps:{alt:null===i||void 0===i||null===(t=i.card_faces[0])||void 0===t?void 0:t.name},baseSrc:i.card_faces[0].image_uris.png,overlaySrc:"/foil-overlay.png",overlayProps:{style:{opacity:.65}},name:null===i||void 0===i||null===(n=i.card_faces[0])||void 0===n?void 0:n.name,width:250,height:350},u))}),Object(ye.jsx)("div",{className:Object(Jt.a)(j.face,j.back),style:{display:m?"unset":"none"},children:Object(ye.jsx)(br,Object(l.a)({overlayEnabled:i.foil,baseProps:{alt:null===i||void 0===i||null===(r=i.card_faces[0])||void 0===r?void 0:r.name},baseSrc:i.card_faces[1].image_uris.png,overlaySrc:"/foil-overlay.png",overlayProps:{style:{opacity:.65}},name:null===i||void 0===i||null===(c=i.card_faces[0])||void 0===c?void 0:c.name,width:250,height:350},u))})]})})),Or=function(e){return{imageContainer:{zIndex:1,position:"relative",transition:"all 0.4s cubic-bezier(0.75, 0, 0.25, 1)"},dfcSymbol:{fontSize:"1.5em",position:"absolute",top:"2.5%",left:"2.5%"},checkboxContainer:{position:"absolute",top:"4%",right:"5%"},checkbox:{transform:"scale(1.5)"},priceContainer:{marginTop:e.spacing(1)},buttonContainer:{marginTop:e.spacing(1)},buttonThridly:{color:"#fff",backgroundColor:"#9c27b0","&:hover":{backgroundColor:"#7b1fa2"}}}},hr=["arrow","enterDelay","placement"],gr=["card","width","height","rootProps","imageProps","buttonProps","tiltProps","tiltEnabled","transform3dEnabled","packTransformButton","showPrice","showCheckbox"],xr=Object(xe.a)((function(e){return{tooltip:{backgroundColor:"dark"===e.palette.type?"#787878":"#909090",fontSize:e.typography.pxToRem(12.25),boxShadow:e.shadows[2]},arrow:{color:"dark"===e.palette.type?"#787878":"#909090"}}}))((function(e){var t=e.arrow,n=void 0===t||t,a=e.enterDelay,r=void 0===a?500:a,c=e.placement,i=void 0===c?"right":c,o=Object(we.a)(e,hr);return Object(ye.jsx)(mn.a,Object(l.a)({placement:i,arrow:n,enterDelay:r},o))})),vr=Object(xe.a)(Or)(Object(o.b)((function(e){return{selectedCardIds:e.actions.app.collection.selectedCardIds,cardsSelectableEnabled:e.actions.app.collection.cardsSelectableEnabled}}),(function(e){return{dispatch:{addSelectedCardId:function(t){return e(ae({id:t}))},removeSelectedCardId:function(t){return e(ne({id:t}))}}}}))((function(e){var t,n,r,c,i,o,s,d,u,j,b,p=e.card,m=e.width,f=void 0===m?250:m,O=e.height,h=void 0===O?350:O,g=e.rootProps,x=e.imageProps,v=e.buttonProps,y=e.tiltProps,C=e.tiltEnabled,w=void 0!==C&&C,S=e.transform3dEnabled,k=void 0!==S&&S,E=e.packTransformButton,I=void 0!==E&&E,_=e.showPrice,P=void 0!==_&&_,T=e.showCheckbox,N=void 0!==T&&T,R=Object(we.a)(e,gr),A=R.classes,D=R.dispatch,M=R.selectedCardIds,L=R.cardsSelectableEnabled,z=Object(Ae.a)((function(e){return e.breakpoints.down("md")})),B=Object(a.useState)(!1),F=Object(Xe.a)(B,2),U=F[0],W=F[1];Object(a.useEffect)((function(){W(!1)}),[p]);var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(t){W(null!==e&&void 0!==e?e:!U)}};return Object(ye.jsxs)(fe.a,Object(l.a)(Object(l.a)({container:!0,direction:"column"},g),{},{onClick:function(e){(null===g||void 0===g?void 0:g.onClick)&&g.onClick(e)},children:[Object(ye.jsx)(fe.a,{item:!0,className:A.imageContainer,style:{transform:U&&(p.is_split?"rotate(90deg) scale(0.825) translateX(-35%) translateY(".concat(z?"2%":"7%",")"):p.is_flip?"rotate(180deg)":"")},children:Object(ye.jsxs)(lr.a,Object(l.a)(Object(l.a)({tiltEnable:w,glareEnable:w,tiltMaxAngleX:10,tiltMaxAngleY:10,glareBorderRadius:"4.75% / 3.5%",glarePosition:"all",glareMaxOpacity:.13,onEnter:((null===p||void 0===p?void 0:p.is_transform)||(null===p||void 0===p?void 0:p._isDoublesided))&&I&&V(!0),onLeave:((null===p||void 0===p?void 0:p.is_transform)||(null===p||void 0===p?void 0:p._isDoublesided))&&I&&V(!1)},y),{},{children:[null!==p&&void 0!==p&&p.is_transform||null!==p&&void 0!==p&&p._isDoublesided?k?Object(ye.jsx)(fr,{flipped:U,width:f,height:h,card:p,imageProps:x}):Object(ye.jsx)(br,Object(l.a)({overlayEnabled:null===p||void 0===p?void 0:p.foil,baseProps:{alt:null===p||void 0===p?void 0:p.name},baseSrc:p&&p.hasOwnProperty("image_uris")?null!==(t=null!==(n=null===(r=p.card_faces[U?1:0].image_uris)||void 0===r?void 0:r.png)&&void 0!==n?n:null===(c=p.card_faces[U?1:0].image_uris)||void 0===c?void 0:c.large)&&void 0!==t?t:null===(i=p.card_faces[U?1:0].image_uris)||void 0===i?void 0:i.normal:"/cardback.png",overlaySrc:"/foil-overlay.png",overlayProps:{style:{opacity:.65}},name:null===p||void 0===p||null===(o=p.card_faces[U?1:0])||void 0===o?void 0:o.name,width:f,height:h},x)):Object(ye.jsx)(br,Object(l.a)({overlayEnabled:null===p||void 0===p?void 0:p.foil,baseProps:{alt:null===p||void 0===p?void 0:p.name},baseSrc:p&&p.hasOwnProperty("image_uris")?null!==(s=null!==(d=null===(u=p.image_uris)||void 0===u?void 0:u.png)&&void 0!==d?d:null===(j=p.image_uris)||void 0===j?void 0:j.large)&&void 0!==s?s:null===(b=p.image_uris)||void 0===b?void 0:b.normal:"/cardback.png",overlaySrc:"/foil-overlay.png",overlayProps:{style:{opacity:.65}},name:null===p||void 0===p?void 0:p.name,width:f,height:h},x)),N&&(M.includes(null===p||void 0===p?void 0:p._id)||L)&&Object(ye.jsx)("span",{className:A.checkboxContainer,onClick:function(e){return e.stopPropagation()},children:Object(ye.jsx)("input",{type:"checkbox",checked:M.includes(p._id),className:A.checkbox,onChange:function(e){return function(t){t.target.checked?D.addSelectedCardId(e._id):D.removeSelectedCardId(e._id)}}(p)})})]}))}),P&&Object(ye.jsx)(fe.a,{item:!0,align:"center",className:A.priceContainer,children:p.price>0?p.amount>1?[Object(ye.jsx)(xr,{title:"Price for x1",placement:"left",children:Object(ye.jsx)("span",{children:Object(ye.jsx)(cn,{card:p,columnName:"price"})})},"one")," / ",Object(ye.jsx)(xr,{title:"Price for x".concat(p.amount),children:Object(ye.jsx)("span",{children:Object(ye.jsx)(cn,{card:p,columnName:"total_price"})})},"multiple")]:Object(ye.jsx)(xr,{title:"Price for x1",children:Object(ye.jsx)("span",{children:Object(ye.jsx)(cn,{card:p,columnName:"price"})})}):Object(ye.jsx)(xr,{title:"No Price Available",children:Object(ye.jsx)("span",{children:"-"})})}),((null===p||void 0===p?void 0:p.is_transform)||(null===p||void 0===p?void 0:p._isDoublesided)||(null===p||void 0===p?void 0:p.is_split)||(null===p||void 0===p?void 0:p.is_flip))&&!I&&Object(ye.jsx)(fe.a,{item:!0,align:"center",className:A.buttonContainer,children:Object(ye.jsx)(Ee.a,Object(l.a)(Object(l.a)({className:A.buttonThridly,variant:"contained",size:"small",onClick:V()},v),{},{children:(null!==p&&void 0!==p&&p.is_transform||null!==p&&void 0!==p&&p._isDoublesided?"Transform":p.is_split?"Rotate":p.is_flip?"Flip":"")+(U?" \u21aa":" \u21a9")}))})]}))}))),yr=function(e){return{root:{},appBar:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}}},Cr=Object(xe.a)(yr)((function(e){var t=Object.assign({},(Object(me.a)(e),e)).classes,n=function(e){var t=e.href,n=e.children;return Object(ye.jsx)("a",{rel:"noreferrer",target:"_blank",href:t,children:n})},a=function(){return Object(ye.jsx)(n,{href:"https://github.com/LooLzzz",children:"LooLzzz"})},r=function(){return Object(ye.jsx)(n,{href:"https://github.com/Yarintop",children:"Bedopear"})},c=function(){return Object(ye.jsx)(n,{href:"https://scryfall.com/",children:"Scryfall.com"})},i=function(){return Object(ye.jsx)(n,{href:"https://www.npmjs.com/package/scryfall-client",children:"Scryfall-Client"})};return Object(ye.jsxs)(fe.a,{item:!0,container:!0,justifyContent:"center",alignContent:"center",align:"center",className:t.appBar,spacing:1,children:[Object(ye.jsxs)(fe.a,{item:!0,xs:12,component:he.a,variant:"caption",children:["Made with ",Object(ye.jsx)("span",{style:{color:"red"},children:"\u2764"})," by ",Object(ye.jsx)(a,{})," and ",Object(ye.jsx)(r,{})]}),Object(ye.jsxs)(fe.a,{item:!0,xs:12,component:he.a,variant:"caption",children:["Powered by ",Object(ye.jsx)(c,{})," via ",Object(ye.jsx)(i,{})]})]})})),wr=function(e){return{root:{}}},Sr=Object(xe.a)(wr)(Object(o.b)((function(e){return{username:e.actions.activeUser.username}}),(function(e){return{dispatch:{setCurrentTab:function(t){return e(Z(t))}}}}))((function(e){var t=Object.assign({},(Object(me.a)(e),e)),n=t.classes,r=t.dispatch,c=t.username,i=Object(_e.g)();return Object(a.useEffect)((function(){r.setCurrentTab({tab:"decks"})}),[]),Object(a.useEffect)((function(){if(!c)return i.push("/login")}),[c]),Object(ye.jsx)("div",{className:n.root,children:"hello from Decks"})}))),kr=function(e){return{root:{}}},Er=Object(xe.a)(kr)(Object(o.b)((function(e){return{username:e.actions.activeUser.username}}),(function(e){return{dispatch:{setCurrentTab:function(t){return e(Z(t))}}}}))((function(e){var t=Object.assign({},(Object(me.a)(e),e)),n=t.classes,r=t.dispatch,c=t.username,i=Object(_e.g)();return Object(a.useEffect)((function(){r.setCurrentTab({tab:"profile"})}),[]),Object(a.useEffect)((function(){if(!c)return i.push("/login")}),[c]),Object(ye.jsx)("div",{className:n.root,children:"hello from Profile"})}))),Ir=n(674),_r=n(675),Pr=n(53),Tr=function(e){var t="4.5em";return{root:{padding:e.spacing(3),paddingBottom:0,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},header:{textTransform:"uppercase",fontWeight:"bold",width:"100%"},icon:{fontSize:t,alignSelf:"flex-start",position:"relative",zIndex:1},divider1:{bottom:"calc(".concat(t," - 0.55em)"),marginBottom:e.spacing(3),width:"calc(100% + 2*".concat(e.spacing(3),"px)"),position:"relative",zIndex:0},divider2:{marginBottom:e.spacing(3),width:"calc(100% + 2*".concat(e.spacing(3),"px)"),position:"relative",zIndex:0},bottom:{position:"relative",bottom:"2em",width:"100%"},content:{width:"100%",paddingBottom:e.spacing(2)},actions:{width:"100%",alignSelf:"flex-end"}}},Nr=["validationRules","header","icon","content","actions","headerProps","iconProps","contentProps","actionsProps","formRef","disableBackdrop","onSubmit","onError"],Rr=["classes"],Ar=Object(xe.a)(Tr)((function(e){var t=e.validationRules,n=void 0===t?{}:t,r=e.header,c=e.icon,i=e.content,o=e.actions,s=e.headerProps,d=void 0===s?{}:s,u=e.iconProps,j=void 0===u?{}:u,b=e.contentProps,p=void 0===b?{}:b,m=e.actionsProps,f=void 0===m?{}:m,O=e.formRef,h=e.disableBackdrop,g=void 0!==h&&h,x=e.onSubmit,v=void 0===x?function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():x,y=e.onError,C=void 0===y?function(e){console.error(e)}:y,w=Object(we.a)(e,Nr),S=w.classes,k=Object(we.a)(w,Rr),E=Object(a.useState)([]),I=Object(Xe.a)(E,2),_=I[0],P=I[1],T=Object(a.useState)([]),N=Object(Xe.a)(T,2),R=N[0],A=N[1],D=Object(a.useState)([]),M=Object(Xe.a)(D,2),L=M[0],z=M[1],B=Object(a.useState)([]),F=Object(Xe.a)(B,2),U=F[0],W=F[1],V=Object(a.useState)(!1),H=Object(Xe.a)(V,2),q=H[0],Y=H[1];Object(a.useEffect)((function(){var e=n;Object.entries(e).forEach((function(e){var t=Object(Xe.a)(e,2),n=t[0],a=t[1];Pr.ValidatorForm.hasValidationRule(n)||Pr.ValidatorForm.addValidationRule(n,a)}))}),[n]),Object(a.useEffect)((function(){P(r),A(c),z(i),W(o)}),[r,c,i,o]);var G=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),e.prev=1,e.next=4,v(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),C(e.t0);case 9:return e.prev=9,Y(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)(Oe.a,Object(l.a)(Object(l.a)({component:Pr.ValidatorForm,ref:O,className:S.root,elevation:8,onSubmit:G,onError:C},k),{},{children:[Object(ye.jsx)(he.a,Object(l.a)(Object(l.a)({variant:"h4",align:"right",className:S.header},d),{},{children:_})),Object(ye.jsx)("div",Object(l.a)(Object(l.a)({className:S.icon},j),{},{children:R})),Object(ye.jsx)(ge.a,{className:S.divider1}),Object(ye.jsxs)(fe.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",className:S.bottom,children:[Object(ye.jsx)(fe.a,Object(l.a)(Object(l.a)({item:!0,xs:12,className:S.content},p),{},{children:L})),Object(ye.jsx)(fe.a,Object(l.a)(Object(l.a)({item:!0,xs:12,className:S.actions},f),{},{children:U}))]})]})),!g&&Object(ye.jsx)(Ir.a,{open:q,children:Object(ye.jsx)(_r.a,{children:Object(ye.jsx)(pn.a,{})})})]})})),Dr=function(e){var t=e.spacing(8);return{root:{minHeight:"calc(100vh - 2*".concat(t,"px)"),justifyContent:"center",alignItems:"center",display:"flex",flexGrow:1},errorMessages:{color:e.palette.error.main,fontSize:"0.75rem"}}},Mr=Object(xe.a)(Dr)(Object(o.b)((function(e){return{username:e.actions.activeUser.username}}),(function(e){return{dispatch:{setActiveUser:function(t){return e(G(t))},setCurrentTab:function(t){return e(Z(t))}}}}))((function(e){var t=Object.assign({},(Object(me.a)(e),e)),n=t.classes,r=t.dispatch,c=t.username,i=Object(_e.g)(),o=Object(Ne.b)().enqueueSnackbar,s=Object(a.useRef)(),l=Object(a.useState)(!1),d=Object(Xe.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)([]),p=Object(Xe.a)(b,2),m=p[0],f=p[1],O=Object(a.useState)(""),h=Object(Xe.a)(O,2),g=h[0],x=h[1],v=Object(a.useState)(""),y=Object(Xe.a)(v,2),C=y[0],w=y[1];Object(a.useEffect)((function(){r.setCurrentTab({tab:"login"})}),[]),Object(a.useEffect)((function(){c&&i.push("/")}),[c]);var S=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){var n,a,c,i;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,f([]),j(!0),w(""),e.prev=4,e.next=7,Bt.login({username:g,password:C});case 7:a=e.sent,r.setActiveUser(a),o("Login successful",{variant:"success"}),n=Promise.resolve(a),e.next=20;break;case 13:e.prev=13,e.t0=e.catch(4),c=e.t0.response.data.msg||e.t0.response.data.message,i=(i=c instanceof Array?c:[c]).map((function(e){return e.toLowerCase().includes("combination not found")?"Bad credentials":e})),e.t0.message=i,n=Promise.reject(e.t0);case 20:return e.prev=20,j(!1),e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,null,[[4,13,20,24]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){f([]),x(""),w(""),s.current.resetValidations()};return Object(ye.jsx)(fe.a,{container:!0,className:n.root,children:Object(ye.jsx)(Ar,{formRef:s,onSubmit:S,onError:function(e){f(e.message),o("Login failed",{variant:"error"})},instantValidate:!1,header:"Login",icon:function(){return Object(ye.jsx)(Gt.a,{marginBottom:2,children:"\ud83d\udca9"})},content:function(){return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Pr.TextValidator,{id:"username",type:"text",label:"Username",variant:"outlined",size:"small",color:"secondary",value:g,onChange:function(e){return x(e.target.value)},validators:["required","matchRegexp:^([A-Za-z0-9]|[-_.'])*$"],errorMessages:["Field is required","Special characters are not allowed"],autoComplete:"current-username"}),Object(ye.jsx)(Pr.TextValidator,{id:"password",type:"password",label:"Password",variant:"outlined",size:"small",color:"secondary",value:C,onChange:function(e){return w(e.target.value)},validators:["required"],errorMessages:["Field is required"],autoComplete:"current-password"}),Object(ye.jsx)(fe.a,{container:!0,direction:"column",children:Object.values(m).map((function(e,t){return Object(ye.jsxs)(fe.a,{item:!0,className:n.errorMessages,children:[e[0].toUpperCase()+e.slice(1)," "]},t)}))})]})},actions:function(){return Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"flex-end",spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{size:"medium",variant:"outlined",onClick:k,disabled:u,children:"Clear"})}),Object(ye.jsx)(fe.a,{item:!0,style:{paddingRight:0},children:Object(ye.jsx)(Ee.a,{type:"submit",size:"medium",variant:"contained",color:"primary",disabled:u,children:"Submit"})})]})}})})}))),Lr=function(e){var t=e.spacing(8);return{root:{minHeight:"calc(100vh - 2*".concat(t,"px)"),justifyContent:"center",alignItems:"center",display:"flex",flexGrow:1},errorMessages:{color:e.palette.error.main,fontSize:"0.75rem"}}},zr=Object(xe.a)(Lr)(Object(o.b)((function(e){return{username:e.actions.activeUser.username}}),(function(e){return{dispatch:{setActiveUser:function(t){return e(G(t))},setCurrentTab:function(t){return e(Z(t))}}}}))((function(e){var t=Object.assign({},(Object(me.a)(e),e)),n=t.classes,r=t.dispatch,c=t.username,i=Object(_e.g)(),o=Object(Ne.b)().enqueueSnackbar,s=Object(a.useState)(!1),l=Object(Xe.a)(s,2),d=l[0],u=l[1],j=Object(a.useState)([]),b=Object(Xe.a)(j,2),p=b[0],m=b[1],f=Object(a.useState)(""),O=Object(Xe.a)(f,2),h=O[0],g=O[1],x=Object(a.useState)(""),v=Object(Xe.a)(x,2),y=v[0],C=v[1],w=Object(a.useState)(""),S=Object(Xe.a)(w,2),k=S[0],E=S[1],I=Object(a.useRef)(),_=Object(a.useRef)();Object(a.useEffect)((function(){r.setCurrentTab({tab:"register"})}),[]),Object(a.useEffect)((function(){c&&i.push("/")}),[c]);var P=function(){var e=Object(it.a)(Object(ct.a)().mark((function e(t){var n,a,c,i;return Object(ct.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,m([]),u(!0),C(""),E(""),e.prev=5,e.next=8,Bt.register({username:h,password:y});case 8:a=e.sent,r.setActiveUser(a),o("Successfully registered",{variant:"success"}),n=Promise.resolve(a),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(5),c=e.t0.response.data.msg||e.t0.response.data.message,i=c instanceof Array?c:[c],e.t0.message=i,n=Promise.reject(e.t0);case 20:return e.prev=20,u(!1),e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,null,[[5,14,20,24]])})));return function(t){return e.apply(this,arguments)}}(),T=function(e){m([]),g(""),C(""),E(""),_.current.resetValidations()};return Object(ye.jsx)(fe.a,{container:!0,className:n.root,children:Object(ye.jsx)(Ar,{formRef:_,validationRules:{isPasswordMatch:function(e){return e===I.current.props.value}},onSubmit:P,onError:function(e){m(e.message),o("Error registering",{variant:"error"})},instantValidate:!1,header:"Signup",icon:function(){return Object(ye.jsx)(Gt.a,{marginBottom:2,children:"\ud83d\udc81"})},content:function(){return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Pr.TextValidator,{error:A.a.join(p,";").includes("username"),id:"username",name:"username",type:"text",label:"Username",variant:"outlined",size:"small",color:"secondary",value:h,onChange:function(e){return g(e.target.value)},validators:["required","matchRegexp:^[A-Za-z][A-Za-z0-9-_.]*$"],errorMessages:["Field is required","Special characters are not allowed"],autoComplete:"new-username"}),Object(ye.jsx)(Pr.TextValidator,{ref:I,id:"password",name:"password",type:"password",label:"Password",variant:"outlined",size:"small",color:"secondary",value:y,onChange:function(e){return C(e.target.value)},validators:["required","minStringLength:5"],errorMessages:["Field is required","Password is too short"],autoComplete:"new-password"}),Object(ye.jsx)(Pr.TextValidator,{id:"password_repeat",name:"password_repeat",type:"password",label:"Repeat Password",variant:"outlined",size:"small",color:"secondary",value:k,onChange:function(e){return E(e.target.value)},validators:["required","minStringLength:5","isPasswordMatch"],errorMessages:["Field is required","Password is too short","Passwords does not match"],autoComplete:"new-password2"}),Object(ye.jsx)(fe.a,{container:!0,direction:"column",children:Object.values(p).map((function(e,t){return Object(ye.jsx)(fe.a,{item:!0,className:n.errorMessages,children:A.a.upperFirst(e)},t)}))})]})},actions:function(){return Object(ye.jsxs)(fe.a,{container:!0,justifyContent:"flex-end",spacing:1,children:[Object(ye.jsx)(fe.a,{item:!0,children:Object(ye.jsx)(Ee.a,{size:"medium",variant:"outlined",onClick:T,disabled:d,children:"Clear"})}),Object(ye.jsx)(fe.a,{item:!0,style:{paddingRight:0},children:Object(ye.jsx)(Ee.a,{type:"submit",size:"medium",variant:"contained",color:"primary",disabled:d,children:"Submit"})})]})}})})})));n(583),n(584);i.a.render(Object(ye.jsx)(r.a.StrictMode,{children:Object(ye.jsx)(o.a,{store:Y,children:Object(ye.jsx)($a,{})})}),document.getElementById("root"))}},[[585,1,2]]]);
//# sourceMappingURL=main.717b8d63.chunk.js.map